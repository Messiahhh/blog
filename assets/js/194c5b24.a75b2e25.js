"use strict";(self.webpackChunkakara=self.webpackChunkakara||[]).push([[1121],{3905:function(e,n,a){a.d(n,{Zo:function(){return d},kt:function(){return u}});var t=a(7294);function p(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function l(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function i(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?l(Object(a),!0).forEach((function(n){p(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function r(e,n){if(null==e)return{};var a,t,p=function(e,n){if(null==e)return{};var a,t,p={},l=Object.keys(e);for(t=0;t<l.length;t++)a=l[t],n.indexOf(a)>=0||(p[a]=e[a]);return p}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(t=0;t<l.length;t++)a=l[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(p[a]=e[a])}return p}var o=t.createContext({}),m=function(e){var n=t.useContext(o),a=n;return e&&(a="function"==typeof e?e(n):i(i({},n),e)),a},d=function(e){var n=m(e.components);return t.createElement(o.Provider,{value:n},e.children)},k={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},s=t.forwardRef((function(e,n){var a=e.components,p=e.mdxType,l=e.originalType,o=e.parentName,d=r(e,["components","mdxType","originalType","parentName"]),s=m(a),u=p,c=s["".concat(o,".").concat(u)]||s[u]||k[u]||l;return a?t.createElement(c,i(i({ref:n},d),{},{components:a})):t.createElement(c,i({ref:n},d))}));function u(e,n){var a=arguments,p=n&&n.mdxType;if("string"==typeof e||p){var l=a.length,i=new Array(l);i[0]=s;var r={};for(var o in n)hasOwnProperty.call(n,o)&&(r[o]=n[o]);r.originalType=e,r.mdxType="string"==typeof e?e:p,i[1]=r;for(var m=2;m<l;m++)i[m]=a[m];return t.createElement.apply(null,i)}return t.createElement.apply(null,a)}s.displayName="MDXCreateElement"},9863:function(e,n,a){a.r(n),a.d(n,{assets:function(){return d},contentTitle:function(){return o},default:function(){return u},frontMatter:function(){return r},metadata:function(){return m},toc:function(){return k}});var t=a(7462),p=a(3366),l=(a(7294),a(3905)),i=["components"],r={},o="NPM",m={unversionedId:"node/npm",id:"node/npm",title:"NPM",description:".npmrc",source:"@site/docs/node/npm.md",sourceDirName:"node",slug:"/node/npm",permalink:"/blog/docs/node/npm",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/node/npm.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\u6a21\u5757\u5316",permalink:"/blog/docs/node/module"},next:{title:"pnpm",permalink:"/blog/docs/node/pnpm"}},d={},k=[{value:".npmrc",id:"npmrc",level:2},{value:"\u547d\u4ee4",id:"\u547d\u4ee4",level:2},{value:"npm config",id:"npm-config",level:3},{value:"npm init",id:"npm-init",level:3},{value:"npm install",id:"npm-install",level:3},{value:"npm uninstall",id:"npm-uninstall",level:3},{value:"npm update",id:"npm-update",level:3},{value:"npm outdated",id:"npm-outdated",level:3},{value:"npm run",id:"npm-run",level:3},{value:"npm link",id:"npm-link",level:3},{value:"npm exec",id:"npm-exec",level:3},{value:"npm publish",id:"npm-publish",level:3},{value:"npm view",id:"npm-view",level:3},{value:"npm version",id:"npm-version",level:3},{value:"npm audit",id:"npm-audit",level:3},{value:"npm fund",id:"npm-fund",level:3},{value:"package.json",id:"packagejson",level:2},{value:"type",id:"type",level:3},{value:"files",id:"files",level:3},{value:"main",id:"main",level:3},{value:"exports",id:"exports",level:3},{value:"bin",id:"bin",level:3},{value:"script",id:"script",level:3},{value:"pre &amp; Post",id:"pre--post",level:4},{value:"LifeCycle",id:"lifecycle",level:4},{value:"dependencies",id:"dependencies",level:3},{value:"devDependencies",id:"devdependencies",level:3},{value:"peerDependencies",id:"peerdependencies",level:3},{value:"resolutions",id:"resolutions",level:3},{value:"browser | module",id:"browser--module",level:3},{value:"package-lock.json",id:"package-lockjson",level:2},{value:"node_modules",id:"node_modules",level:2}],s={toc:k};function u(e){var n=e.components,a=(0,p.Z)(e,i);return(0,l.kt)("wrapper",(0,t.Z)({},s,a,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"npm"},"NPM"),(0,l.kt)("h2",{id:"npmrc"},".npmrc"),(0,l.kt)("p",null,"NPM\u7684\u914d\u7f6e\u6587\u4ef6"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"registry=https://registry.npmjs.org/\npackage-lock=false # \u4e0d\u542f\u7528NPM\u9501\n")),(0,l.kt)("h2",{id:"\u547d\u4ee4"},"\u547d\u4ee4"),(0,l.kt)("h3",{id:"npm-config"},"npm config"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"npm config set registry https://registry.npmjs.org/\nnpm config get prefix \nnpm config delete registry\nnpm config \n")),(0,l.kt)("h3",{id:"npm-init"},"npm init"),(0,l.kt)("p",null,"\u521d\u59cb\u5316",(0,l.kt)("inlineCode",{parentName:"p"},"package.json")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"npm init -y\n")),(0,l.kt)("h3",{id:"npm-install"},"npm install"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"npm install <name> --save # yarn add <name>\nnpm install <name> --save-dev # yarn add <name> -D\nnpm install -g <name> # yarn global add <name>\n\nnpm install\nnpm ci # \u901a\u5e38\u7528\u4e8eCI\uff0c\u4f7f\u7528\u8be5\u547d\u4ee4\u65f6\u9700\u8981\u786e\u4fdd\u9879\u76ee\u4e2d\u5b58\u5728 package-lock.json\u6216 npm-shrinkwrap.json\uff0c\u5e76\u4e14\u5f53 package.json\u548c package-lock.json\u4e2d\u4f9d\u8d56\u7684\u7248\u672c\u4e0d\u4e00\u81f4\u65f6 npm ci\u4f1a\u629b\u51fa\u9519\u8bef\u3002\n")),(0,l.kt)("p",null,"\u672c\u5730\u5b89\u88c5\u65f6\uff0c\u6a21\u5757\u4f1a\u88ab\u5b89\u88c5\u5728",(0,l.kt)("inlineCode",{parentName:"p"},"/project/node_modules"),"\u4e0b\uff0c\u540c\u65f6\u5982\u679c\u8be5\u6a21\u5757\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"package.json"),"\u4e2d\u5b58\u5728",(0,l.kt)("inlineCode",{parentName:"p"},"bin"),"\u5b57\u6bb5\u65f6\uff0c\u5219\u4f1a\u81ea\u52a8\u6839\u636e",(0,l.kt)("inlineCode",{parentName:"p"},"bin"),"\u8868\u793a\u7684\u5b57\u5178\u5728",(0,l.kt)("inlineCode",{parentName:"p"},"/project/node_modules/.bin"),"\u4e0b\u9762\u521b\u5efa\u5bf9\u5e94\u7684\u7b26\u53f7\u94fe\u63a5\u3002"),(0,l.kt)("p",null,"\u5168\u5c40\u5b89\u88c5\u65f6\uff0c\u6a21\u5757\u4f1a\u88ab\u5b89\u88c5\u5728",(0,l.kt)("inlineCode",{parentName:"p"},"/usr/local/lib/node_modules"),"\uff08\u4ee5MacOS\u4e3e\u4f8b\uff09\u4e0b\uff0c\u540c\u65f6\u5982\u679c\u8be5\u6a21\u5757\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"package.json"),"\u4e2d\u5b58\u5728",(0,l.kt)("inlineCode",{parentName:"p"},"bin"),"\u5b57\u6bb5\u65f6\uff0c\u5219\u4f1a\u81ea\u52a8\u6839\u636e",(0,l.kt)("inlineCode",{parentName:"p"},"bin"),"\u8868\u793a\u7684\u5b57\u5178\u5728",(0,l.kt)("inlineCode",{parentName:"p"},"/usr/local/bin"),"\u4e0b\u9762\u521b\u5efa\u5bf9\u5e94\u7684\u7b26\u53f7\u94fe\u63a5\uff08\u53ef\u7406\u89e3\u4e3aWindows\u4e2d\u7684\u5feb\u6377\u65b9\u5f0f\uff09\u3002"),(0,l.kt)("p",null,"\u4e3e\u4e2a\u4f8b\u5b50\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"akara-project"),"\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"package.json"),"\u4e2d\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"bin"),"\u5b57\u6bb5\u5982\u4e0b\uff0c\u90a3\u4e48\u5f53\u5168\u5c40\u5b89\u88c5",(0,l.kt)("inlineCode",{parentName:"p"},"akara-project"),"\u65f6\u4f1a\u521b\u5efa",(0,l.kt)("inlineCode",{parentName:"p"},"/usr/local/bin/akara"),"\u8fd9\u4e2a\u6587\u4ef6\uff08\u7b26\u53f7\u94fe\u63a5\uff09\uff0c\u8fd9\u4e2a\u6587\u4ef6\u5b9e\u9645\u6307\u5411\u7740",(0,l.kt)("inlineCode",{parentName:"p"},"akara-project"),"\u6839\u8def\u5f84\u4e0b\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"index.js"),"\u3002\uff08\u5176\u5b9e\u8fd9\u5c31\u662f\u5f00\u53d1\u547d\u4ee4\u884c\u5de5\u5177\u7684\u539f\u7406\uff09"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "bin": {\n    "akara": "index.js"\n    }\n}\n')),(0,l.kt)("h3",{id:"npm-uninstall"},"npm uninstall"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"npm uninstall <name> # yarn remove <name>\n")),(0,l.kt)("h3",{id:"npm-update"},"npm update"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"npm update <name> # yarn upgrade <name>\n\nnpm update\n")),(0,l.kt)("p",null,"\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5982\u679c\u6211\u4eec\u7684\u9879\u76ee\uff08\u91c7\u7528\u9501\u673a\u5236\uff09\u5b58\u5728\u8001\u7248\u672c\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"react@^16.0.0"),"\uff0c\u6b64\u65f6\u6211\u4eec\uff08\u5305\u62ecCI\uff09\u53ea\u80fd\u62ff\u5230",(0,l.kt)("inlineCode",{parentName:"p"},"16.0.0"),"\u7248\u672c\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"react"),"\u3002\u5982\u679c\u6211\u4eec\u73b0\u5728\u60f3\u8981\u5347\u7ea7",(0,l.kt)("inlineCode",{parentName:"p"},"react"),"\u53ef\u4ee5\u91c7\u53d6\u4e24\u79cd\u65b9\u5f0f\uff1a",(0,l.kt)("inlineCode",{parentName:"p"},"npm install react"),"\u6216",(0,l.kt)("inlineCode",{parentName:"p"},"npm update react"),"\u3002\u524d\u8005\u66f4\u7c7b\u4f3c\u4e8e\u91cd\u65b0\u5b89\u88c5",(0,l.kt)("inlineCode",{parentName:"p"},"react"),"\uff0c\u5e76\u4f1a\u91cd\u5199",(0,l.kt)("inlineCode",{parentName:"p"},"package.json"),"\u4e2d\u7684\u4f9d\u8d56\u5173\u7cfb\uff1b\u800c",(0,l.kt)("inlineCode",{parentName:"p"},"npm update"),"\u5e76\u4e0d\u4f1a\u6539\u52a8",(0,l.kt)("inlineCode",{parentName:"p"},"package.json"),"\uff0c\u5b83\u4ec5\u4ec5\u662f\u6839\u636e",(0,l.kt)("inlineCode",{parentName:"p"},"package.json"),"\u4e2d\u7684\u7248\u672c",(0,l.kt)("inlineCode",{parentName:"p"},"semver"),"\u6765\u91cd\u65b0\u5b89\u88c5\u53ef\u5b89\u88c5\u7684\u6700\u65b0",(0,l.kt)("inlineCode",{parentName:"p"},"react"),"\u3002\u4e8c\u8005\u90fd\u4f1a\u91cd\u65b0\u751f\u6210",(0,l.kt)("inlineCode",{parentName:"p"},"package-lock.json"),"\u3002"),(0,l.kt)("h3",{id:"npm-outdated"},"npm outdated"),(0,l.kt)("p",null,"\u67e5\u770b\u9879\u76ee\u4e2d\u54ea\u4e9b\u6a21\u5757\u4e0d\u662f\u6700\u65b0\u7248\u672c"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"npm outdated \n")),(0,l.kt)("h3",{id:"npm-run"},"npm run"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"npm run start # \u6267\u884c\u811a\u672c\nnpm run-script <stage>\n")),(0,l.kt)("h3",{id:"npm-link"},"npm link"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"alias: npm ln")),(0,l.kt)("p",null,"\u7b80\u5355\u6765\u8bf4\u8fd9\u4e2a\u547d\u4ee4\u5b58\u5728\u4e24\u79cd\u7528\u6cd5\uff0c\u53ef\u7528\u4e8e\u5c06\u672c\u5730\u6a21\u5757\u94fe\u63a5\u5230\u5168\u5c40\uff0c\u6216\u662f\u5c06\u5168\u5c40\u6a21\u5757\u94fe\u63a5\u5230\u672c\u5730\u3002"),(0,l.kt)("p",null,"\u7528\u6cd5\u4e00\uff1a"),(0,l.kt)("p",null,"\u5f53\u6211\u4eec\u4f4d\u4e8e\u6a21\u5757",(0,l.kt)("inlineCode",{parentName:"p"},"akara-project"),"\u9879\u76ee\u4e2d\u65f6\uff0c\u76f4\u63a5\u6267\u884c",(0,l.kt)("inlineCode",{parentName:"p"},"npm link"),"\u4f1a\u628a\u5f53\u524d\u6a21\u5757\u94fe\u63a5\u5230\u5168\u5c40\uff08\u5177\u4f53\u6765\u8bf4\u7684\u8bdd\uff0c\u4f1a\u5728",(0,l.kt)("inlineCode",{parentName:"p"},"/usr/local/lib/node_modules"),"\u4e0b\u521b\u5efa\u4e00\u4e2a\u7b26\u53f7\u94fe\u63a5\u6307\u5411\u7740",(0,l.kt)("inlineCode",{parentName:"p"},"akara-project"),"\u8fd9\u4e2a\u6a21\u5757\uff0c\u5982\u679c\u8be5\u6a21\u5757\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"package.json"),"\u5b58\u5728",(0,l.kt)("inlineCode",{parentName:"p"},"bin"),"\u5b57\u6bb5\u65f6\u8fd8\u4f1a\u5728",(0,l.kt)("inlineCode",{parentName:"p"},"/usr/local/bin"),"\u4e0b\u9762\u521b\u5efa\u5bf9\u5e94\u7684\u7b26\u53f7\u94fe\u63a5\uff09"),(0,l.kt)("p",null,"\u7528\u6cd5\u4e8c\uff1a"),(0,l.kt)("p",null,"\u5f53\u6211\u4eec\u4f4d\u4e8e\u67d0\u4e2a\u9879\u76ee\u4e2d\u65f6\uff0c\u5e76\u5047\u8bbe\u6211\u4eec\u5df2\u7ecf\u5168\u5c40\u5b89\u88c5\u4e86\u4e00\u4e2a\u6a21\u5757\uff08\u5982",(0,l.kt)("inlineCode",{parentName:"p"},"pm2"),"\uff09\uff0c\u6b64\u65f6\u5728\u9879\u76ee\u4e2d\u6267\u884c",(0,l.kt)("inlineCode",{parentName:"p"},"npm link webpack"),"\u4f1a\u628a\u5168\u5c40\u6a21\u5757\u94fe\u63a5\u5230\u672c\u5730\uff08\u5177\u4f53\u6765\u8bf4\u7684\u8bdd\uff0c\u4f1a\u5728\u5f53\u524d\u9879\u76ee\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"node_modules"),"\u521b\u5efa\u4e00\u4e2a\u7b26\u53f7\u94fe\u63a5",(0,l.kt)("inlineCode",{parentName:"p"},"pm2"),"\u6307\u5411\u7740\u5168\u5c40\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"pm2"),"\u6a21\u5757\uff0c\u5982\u679c\u8be5\u6a21\u5757\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"package.json"),"\u5b58\u5728",(0,l.kt)("inlineCode",{parentName:"p"},"bin"),"\u5b57\u6bb5\u65f6\u8fd8\u4f1a\u5728",(0,l.kt)("inlineCode",{parentName:"p"},"/project/node_modules/.bin"),"\u4e0b\u9762\u521b\u5efa\u5bf9\u5e94\u7684\u7b26\u53f7\u94fe\u63a5\uff09"),(0,l.kt)("p",null,"\u901a\u8fc7\u7ed3\u5408\u65b9\u6cd5\u4e00\u548c\u65b9\u6cd5\u4e8c\u6211\u4eec\u53ef\u4ee5\u5b9e\u73b0\u8fd9\u6837\u7684\u529f\u80fd\uff1a\u5047\u8bbe\u6211\u4eec\u540c\u65f6\u7ef4\u62a4\u7740\u9879\u76eeA\u548c\u6a21\u5757B\uff0c\u5e76\u5728\u9879\u76eeA\u4e2d\u5f15\u7528\u7740\u6a21\u5757B\u3002\u90a3\u4e48\u6bd4\u8f83\u4f20\u7edf\u7684\u65b9\u6cd5\u6765\u7ef4\u62a4\u8fd9\u4e24\u4e2a\u5e93\u662f\u8fd9\u6837\u7684\uff0c\u66f4\u65b0\u5b8c\u6a21\u5757B\u540e\u53d1\u5e03\uff0c\u7136\u540e\u5728\u9879\u76eeA\u4e2d\u66f4\u65b0\u6a21\u5757B\u4ece\u800c\u67e5\u770b\u6700\u65b0\u7684\u6548\u679c\uff1b\u800c\u901a\u8fc7",(0,l.kt)("inlineCode",{parentName:"p"},"npm link"),"\u6211\u4eec\u53ef\u4ee5\u7b80\u5316\u8fd9\u4e2a\u6d41\u7a0b\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5148\u5728B\u6a21\u5757\u4e2d\u901a\u8fc7",(0,l.kt)("inlineCode",{parentName:"p"},"npm link"),"\u6765\u628aB\u6a21\u5757\u94fe\u63a5\u5230\u5168\u5c40\uff0c\u7136\u540e\u5728A\u9879\u76ee\u4e2d\u901a\u8fc7",(0,l.kt)("inlineCode",{parentName:"p"},"npm link B"),"\u6765\u628a\u5168\u5c40B\u6a21\u5757\u94fe\u63a5\u5230A\u9879\u76ee\u672c\u5730\u3002"),(0,l.kt)("h3",{id:"npm-exec"},"npm exec"),(0,l.kt)("p",null,"\u53ef\u4ee5\u76f4\u63a5\u6267\u884c",(0,l.kt)("inlineCode",{parentName:"p"},"node_modules/.bin"),"\u4e0b\u7684\u53ef\u6267\u884c\u6587\u4ef6"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"npm exec webpack # \u7b49\u4e8enpx webpack\n")),(0,l.kt)("h3",{id:"npm-publish"},"npm publish"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"npm publish # \u53d1\u5e03\u6a21\u5757\nnpm unpublish --force # \u4e0b\u67b6\u6a21\u5757\n\nnpm publish --access publish # \u53d1\u5e03\u516c\u5171\u6a21\u5757\n")),(0,l.kt)("p",null,"\u5728\u901a\u8fc7",(0,l.kt)("inlineCode",{parentName:"p"},"npm login"),"\u767b\u9646\u4e86",(0,l.kt)("inlineCode",{parentName:"p"},"npm"),"\u8d26\u6237\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u4efb\u610f\u9879\u76ee\u4e0b\u901a\u8fc7",(0,l.kt)("inlineCode",{parentName:"p"},"npm publish"),"\u6765\u8fdb\u884c\u6a21\u5757\u7684\u53d1\u5e03\uff0c\u6b64\u65f6NPM\u955c\u50cf\u6e90\u9700\u8981\u662f\u5b98\u65b9\u955c\u50cf\u6e90\u3002"),(0,l.kt)("p",null,"\u9664\u4e86\u901a\u5e38\u7684\u6a21\u5757\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u53d1\u5e03\u7c7b\u4f3c",(0,l.kt)("inlineCode",{parentName:"p"},"@akara/my-package"),"\u8fd9\u6837\u7684\u4f5c\u7528\u57df\u6a21\u5757\uff0c\u6b64\u65f6\u6211\u4eec\u9700\u8981",(0,l.kt)("inlineCode",{parentName:"p"},"npm publish --access publish"),"\u3002\u8fd9\u662f\u56e0\u4e3aNPM\u6a21\u5757\u5206\u4e3a\u516c\u5171\u6a21\u5757\u548c\u79c1\u6709\u6a21\u5757\uff0c\u901a\u5e38\u6211\u4eec\u53d1\u5e03\u7684\u90fd\u662f\u516c\u5171\u6a21\u5757\uff0c\u800c\u53d1\u5e03\u79c1\u6709\u6a21\u5757\u662f\u6536\u8d39\u7684\uff0c\u540c\u65f6\u53d1\u5e03\u4f5c\u7528\u57df\u6a21\u5757\u9ed8\u8ba4\u662f\u53d1\u5e03\u79c1\u6709\u6a21\u5757\uff0c\u56e0\u6b64\u6211\u4eec\u9700\u8981\u663e\u5f0f\u7684\u5236\u5b9a\u6a21\u5757\u7684\u7c7b\u578b\u3002"),(0,l.kt)("p",null,"\u53d1\u5e03NPM\u6a21\u5757\u65f6\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},".gitignore"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},".npmignore"),"\u4e2d\u6307\u5b9a\u7684\u6587\u4ef6\u4e0d\u4f1a\u88ab\u53d1\u5e03\u51fa\u53bb\u3002\u9664\u6b64\u4e4b\u5916\u6211\u4eec\u8fd8\u53ef\u4ee5\u901a\u8fc7",(0,l.kt)("inlineCode",{parentName:"p"},"package.json"),"\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"files"),"\u6765\u6307\u5b9a\u53ea\u6709\u54ea\u4e9b\u6587\u4ef6\u80fd\u88ab\u53d1\u5e03\u3002"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},".gitignore"),"\u4e2d\u7684\u6587\u4ef6\u4e0d\u4f1a\u88ab\u53d1\u5e03"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},".npmignore"),"\u4e2d\u7684\u6587\u4ef6\u4e0d\u4f1a\u88ab\u53d1\u5e03"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"package.json"),"\u4e2d\u7684 ",(0,l.kt)("inlineCode",{parentName:"li"},"files"),"\u5b57\u6bb5\u6307\u5b9a\u54ea\u4e9b\u6587\u4ef6\u4f1a\u88ab\u53d1\u5e03")),(0,l.kt)("h3",{id:"npm-view"},"npm view"),(0,l.kt)("p",null,"\u67e5\u770b\u4e00\u4e2a\u6a21\u5757\u7684\u4fe1\u606f"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"npm view <name> # e.g npm view antd\n")),(0,l.kt)("h3",{id:"npm-version"},"npm version"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"npm version # \u67e5\u770b\u5f53\u524d\u7248\u672c\nnpm version patch # \u5347\u7ea7\u4e00\u4e2a\u8865\u4e01\u7248\u672c\uff0c\u540c\u65f6\u81ea\u52a8git commit\u5e76\u6253\u4e0a\u7248\u672c\u53f7\u5bf9\u5e94\u7684git tag\uff0c\u5982v1.0.1\nnpm version minor # \u5347\u7ea7\u4e00\u4e2a\u5c0f\u7248\u672c\uff0c\u5982v1.1.1\nnpm version major # \u5347\u7ea7\u4e00\u4e2a\u5927\u7248\u672c\uff0c\u5982v2.0.0\n")),(0,l.kt)("h3",{id:"npm-audit"},"npm audit"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"npm audit # \u67e5\u770b\u5f53\u524d\u9879\u76ee\u6240\u6709\u4f9d\u8d56\u6a21\u5757\u7684\u6f0f\u6d1e\nnpm audit --fix # \u66f4\u65b0\u6240\u6709\u5b58\u5728\u6f0f\u6d1e\u7684\u6a21\u5757\u6765\u4fee\u590d\u6f0f\u6d1e\n")),(0,l.kt)("p",null,"\u5f53\u6211\u4eec\u5b89\u88c5\u6a21\u5757\u65f6\u4f1a\u81ea\u52a8\u63d0\u793a\u5f53\u524d\u7248\u672c\u7684\u6a21\u5757\u7684\u6f0f\u6d1e\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u901a\u8fc7\u8be5\u547d\u4ee4\u6765\u67e5\u627e\u5f53\u524d\u9879\u76ee\u6240\u6709\u4f9d\u8d56\u4e2d\u53ef\u80fd\u5b58\u5728\u7684\u6f0f\u6d1e"),(0,l.kt)("h3",{id:"npm-fund"},"npm fund"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"npm fund\n")),(0,l.kt)("p",null,"\u5f53\u6211\u4eec\u5b89\u88c5\u6a21\u5757\u65f6\u4f1a\u81ea\u52a8\u63d0\u793a\u6709\u591a\u5c11\u4e2a\u6a21\u5757\u6b63\u5728\u5bfb\u627e\u6295\u8d44/\u8d44\u52a9\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u901a\u8fc7\u8be5\u547d\u4ee4\u6765\u67e5\u770b\u5177\u4f53\u662f\u54ea\u4e9b\u547d\u4ee4\u5728\u5bfb\u627e\u6295\u8d44"),(0,l.kt)("h2",{id:"packagejson"},"package.json"),(0,l.kt)("h3",{id:"type"},"type"),(0,l.kt)("p",null,"\u4ee5",(0,l.kt)("inlineCode",{parentName:"p"},".cjs"),"\u7ed3\u5c3e\u7684\u6587\u4ef6\u4f1a\u88ab\u89c6\u4e3a",(0,l.kt)("inlineCode",{parentName:"p"},"CommonJS"),"\u6a21\u5757\uff0c\u4ee5",(0,l.kt)("inlineCode",{parentName:"p"},".mjs"),"\u7ed3\u5c3e\u7684\u6587\u4ef6\u4f1a\u88ab\u89c6\u4e3a",(0,l.kt)("inlineCode",{parentName:"p"},"ES"),"\u6a21\u5757\uff0c\u800c\u666e\u901a\u7684",(0,l.kt)("inlineCode",{parentName:"p"},".js"),"\u6587\u4ef6\u5219\u4f1a\u6839\u636e",(0,l.kt)("inlineCode",{parentName:"p"},"type"),"\u5b57\u6bb5\u7684\u4e0d\u540c\u89c6\u4e3a\u4e0d\u540c\u7684\u6a21\u5757\uff0c\u9ed8\u8ba4\u4e0d\u5e26",(0,l.kt)("inlineCode",{parentName:"p"},"type"),"\u89c6\u4e3a",(0,l.kt)("inlineCode",{parentName:"p"},"CommonJS"),"\u6a21\u5757\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"type: 'module'"),"\u5219\u89c6\u4e3a",(0,l.kt)("inlineCode",{parentName:"p"},"ES"),"\u6a21\u5757\u3002"),(0,l.kt)("h3",{id:"files"},"files"),(0,l.kt)("p",null,"\u5bf9\u4e8e\u4e00\u4e9b\u6a21\u5757\u800c\u8a00\uff0c\u7528\u6237\u53ea\u9700\u8981\u5f15\u7528\u8be5\u6a21\u5757\u6e90\u7801\u6784\u5efa\u540e\u7684\u4ea7\u7269\uff0c\u800c\u5e76\u4e0d\u60f3\u8fde\u6e90\u4ee3\u7801\u4e5f\u4e00\u8d77\u5b89\u88c5\u3002\u8fd9\u6837\u7684\u6a21\u5757\u901a\u5e38\u4f1a\u901a\u8fc7",(0,l.kt)("inlineCode",{parentName:"p"},"files"),"\u5b57\u6bb5\u6765\u89c4\u5b9a\u54ea\u4e9b\u6a21\u5757\u624d\u4f1a\u88ab\u53d1\u5e03\uff0c\u5982",(0,l.kt)("inlineCode",{parentName:"p"},'"file": ["dist", "README.md"]')),(0,l.kt)("p",null,"\u9700\u8981\u6ce8\u610f\u7684\u662f\u4ee5\u4e0b\u6587\u4ef6\u6c38\u8fdc\u90fd\u4f1a\u88ab\u5916\u90e8\u4e0b\u8f7d\uff1a",(0,l.kt)("inlineCode",{parentName:"p"},"package.json"),"\u3001",(0,l.kt)("inlineCode",{parentName:"p"},"README"),"\u3001",(0,l.kt)("inlineCode",{parentName:"p"},"CHANGE / CHANGELOG / HISTORY \t"),"\u3001",(0,l.kt)("inlineCode",{parentName:"p"},"LICENSE / LICENCE"),"\u3001",(0,l.kt)("inlineCode",{parentName:"p"},"NOTICE"),"\u3001",(0,l.kt)("inlineCode",{parentName:"p"},"main"),"\u5b57\u6bb5\u6307\u5411\u7684\u6587\u4ef6\u3002"),(0,l.kt)("h3",{id:"main"},"main"),(0,l.kt)("p",null,"\u7528\u6765\u89c4\u5b9a\u6a21\u5757\u7684\u9ed8\u8ba4\u5165\u53e3\uff0c\u9ed8\u8ba4\u503c\u4e3a ",(0,l.kt)("inlineCode",{parentName:"p"},"index.js"),"\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const test = require('my-module') // \u5f15\u5165my-module\u6a21\u5757\u7684\u6839\u76ee\u5f55\u7684index.js\u6587\u4ef6\n")),(0,l.kt)("h3",{id:"exports"},"exports"),(0,l.kt)("p",null,"\u529f\u80fd\u7c7b\u4f3c",(0,l.kt)("inlineCode",{parentName:"p"},"main"),"\uff0c\u540c\u65f6\u5b58\u5728",(0,l.kt)("inlineCode",{parentName:"p"},"exports"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"main"),"\u65f6\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"exports"),"\u5b57\u6bb5\u7684\u4f18\u5148\u7ea7\u66f4\u9ad8"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "exports": {\n        ".": "./index.js", \n        "./test": "./src/test.js" \n    }\n}\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const test = require('my-module') // ./index.js\nconst test2 = require('my-module/test') // ./src/test.js\n")),(0,l.kt)("p",null,"\u53ef\u4ee5\u770b\u5230\u4e00\u65e6\u4f7f\u7528\u4e86",(0,l.kt)("inlineCode",{parentName:"p"},"exports"),"\u5b57\u6bb5\uff0c\u90a3\u4e48\u6a21\u5757\u7684\u5f15\u7528\u89c4\u5219\u5c31\u548c\u4ee5\u5f80\u6709\u8f83\u5927\u7684\u533a\u522b\uff0c\u6b64\u65f6\u6211\u4eec\u4e0d\u518d\u80fd\u6839\u636e\u6a21\u5757\u7684\u4efb\u610f\u8def\u5f84\u6765\u5f15\u7528\u76f8\u5bf9\u5e94\u7684\u6587\u4ef6\uff0c\u53ea\u80fd\u6839\u636e",(0,l.kt)("inlineCode",{parentName:"p"},"exports"),"\u6240\u6307\u5b9a\u7684\u6620\u5c04\u5173\u7cfb\u6765\u5f15\u7528\u6240\u7ed9\u5b9a\u7684\u6587\u4ef6\u3002"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"exports"),"\u8fd8\u80fd\u591f\u6839\u636e\u5bfc\u5165\u6a21\u5757\u65f6\u4f7f\u7528\u7684\u662f ",(0,l.kt)("inlineCode",{parentName:"p"},"require"),"\u8fd8\u662f ",(0,l.kt)("inlineCode",{parentName:"p"},"import"),"\u9009\u62e9\u4e0d\u540c\u7684\u5bfc\u51fa\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "exports": {\n        ".": {\n            "require": "./a.js",\n            "import": "./b.mjs"\n        }\n    }\n}\n')),(0,l.kt)("h3",{id:"bin"},"bin"),(0,l.kt)("p",null,"\u5982\u4e4b\u524d\u8bf4\u8fc7\u90a3\u6837\uff0c\u5f53\u6211\u4eec\u901a\u8fc7",(0,l.kt)("inlineCode",{parentName:"p"},"npm install"),"\u5b89\u88c5\u6a21\u5757\u65f6\uff0c\u4f1a\u6839\u636e\u8be5\u6a21\u5757",(0,l.kt)("inlineCode",{parentName:"p"},"package.json"),"\u4e2d\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"bin"),"\u5b57\u6bb5\u6765\u521b\u5efa\u6307\u5411\u6307\u5b9a\u6587\u4ef6\u7684\u7b26\u53f7\u94fe\u63a5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "bin": {\n    "akara": "index.js"\n    }\n}\n')),(0,l.kt)("p",null,"\u5047\u8bbe",(0,l.kt)("inlineCode",{parentName:"p"},"akara-project"),"\u7684\u914d\u7f6e\u5982\u4e0a\uff0c\u90a3\u4e48\u5168\u5c40\u5b89\u88c5",(0,l.kt)("inlineCode",{parentName:"p"},"akara-project"),"\u65f6\u4f1a\u521b\u5efa",(0,l.kt)("inlineCode",{parentName:"p"},"/usr/local/bin/akara"),"\u7b26\u53f7\u94fe\u63a5\uff08\u6307\u5411\u7740",(0,l.kt)("inlineCode",{parentName:"p"},"/usr/local/lib/node_modules/akara-project/index.js"),"\uff09\uff0c\u6240\u4ee5\u73b0\u5728\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u5728\u547d\u4ee4\u884c\u4e2d\u8f93\u5165",(0,l.kt)("inlineCode",{parentName:"p"},"akara"),"\u6765\u6267\u884c\u5bf9\u5e94\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"index.js"),"\uff08\u5f53\u7136\u5b9e\u9645\u4e0a\u6211\u4eec\u8fd8\u9700\u8981\u4e24\u4e2a\u5c0f\u6b65\u9aa4\uff0c\u4e00\u662f\u6211\u4eec\u9700\u8981\u89c4\u5b9a",(0,l.kt)("inlineCode",{parentName:"p"},"index.js"),"\u8fd9\u4e2a\u6587\u4ef6\u6267\u884c\u7684\u73af\u5883\uff0c\u56e0\u6b64\u9700\u8981\u5728",(0,l.kt)("inlineCode",{parentName:"p"},"index.js"),"\u4ee3\u7801\u7684\u7b2c\u4e00\u884c\u52a0\u4e0a",(0,l.kt)("inlineCode",{parentName:"p"},"#!/usr/bin/env node"),"\uff1b\u4e8c\u662f\u6211\u4eec\u9700\u8981\u901a\u8fc7\u6267\u884c",(0,l.kt)("inlineCode",{parentName:"p"},"chmod +x index.js"),"\u6765\u7ed9\u4e88\u8be5\u6587\u4ef6\u53ef\u6267\u884c\u6743\u9650\uff09"),(0,l.kt)("p",null,"\u5982\u679c\u6211\u4eec\u662f\u672c\u5730\u5b89\u88c5\u800c\u4e0d\u662f\u5168\u5c40\u5b89\u88c5",(0,l.kt)("inlineCode",{parentName:"p"},"akara-project"),"\uff0c\u90a3\u4e48\u521b\u5efa\u7684\u7b26\u53f7\u94fe\u63a5",(0,l.kt)("inlineCode",{parentName:"p"},"akara"),"\u4f1a\u88ab\u653e\u5728",(0,l.kt)("inlineCode",{parentName:"p"},"project/node_modules/.bin"),"\u4e0b\u9762\uff0c\u6b64\u65f6\u65e0\u6cd5\u76f4\u63a5\u901a\u8fc7\u5728\u547d\u4ee4\u884c\u8f93\u5165",(0,l.kt)("inlineCode",{parentName:"p"},"akara"),"\u6765\u6267\u884c\u547d\u4ee4\uff0c\u6211\u4eec\u6709\u5176\u4ed6\u7684\u51e0\u79cd\u65b9\u5f0f"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"./node_modules/.bin/akara"))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"package.json"),"\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"script"),"\u5b57\u6bb5\u4e2d\u586b\u5199\u6267\u884c\u65b9\u5f0f\uff0c\u5982"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-1"},'{\n    "script": {\n        "run-my-script": "akara"\n    }\n}\n'))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"npm exec akara"))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"npx akara")))),(0,l.kt)("h3",{id:"script"},"script"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"npm"),"\u9664\u4e86 ",(0,l.kt)("inlineCode",{parentName:"p"},"npm ci"),"\u3001",(0,l.kt)("inlineCode",{parentName:"p"},"npm install"),"\u7b49\u5185\u7f6e\u811a\u672c\uff0c\u8fd8\u5305\u62ec ",(0,l.kt)("inlineCode",{parentName:"p"},"hook script"),"\uff08",(0,l.kt)("inlineCode",{parentName:"p"},"pre/post script\uff09"),"\u548c ",(0,l.kt)("inlineCode",{parentName:"p"},"lifecycle script"),"\u3002"),(0,l.kt)("h4",{id:"pre--post"},"pre & Post"),(0,l.kt)("p",null,"\u5bf9\u4e8e\u4e00\u4e2a\u811a\u672c\u6211\u4eec\u53ef\u80fd\u60f3\u8981\u5728\u5176\u6267\u884c\u4e4b\u524d\u6216\u4e4b\u540e\u6267\u884c\u67d0\u4e9b\u64cd\u4f5c\uff0c\u6b64\u65f6\u53ef\u4ee5\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"pre"),"\u6216 ",(0,l.kt)("inlineCode",{parentName:"p"},"post"),"\u524d\u7f00\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "script": {\n        "test": "echo \\"i\'m test\\"",\n        "pretest": "echo \\"\u5728test\u811a\u672c\u6267\u884c\u524d\u6267\u884c\\"",\n        "posttest": "echo \\"\u5728test\u811a\u672c\u6267\u884c\u540e\u6267\u884c\\""\n    }\n}\n')),(0,l.kt)("h4",{id:"lifecycle"},"LifeCycle"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"npm"),"\u5185\u7f6e\u4e86\u4e00\u4e9b\u751f\u547d\u5468\u671f\u811a\u672c\uff0c\u5982",(0,l.kt)("inlineCode",{parentName:"p"},"prepare"),"\u3001",(0,l.kt)("inlineCode",{parentName:"p"},"prepack"),"\u7b49"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "script": {\n        "prepare": "echo \\"hello akara\\""\n    }\n}\n')),(0,l.kt)("h3",{id:"dependencies"},"dependencies"),(0,l.kt)("p",null,"\u9879\u76ee\u7684\u4f9d\u8d56"),(0,l.kt)("h3",{id:"devdependencies"},"devDependencies"),(0,l.kt)("p",null,"\u9879\u76ee\u7684\u5f00\u53d1\u4f9d\u8d56\u3002\u5982\u679c\u6211\u4eec\u5728NPM\u53d1\u5e03\u4e86\u4e00\u4e2a\u6a21\u5757A\uff0c\u4e4b\u540e\u5f53\u6211\u4eec ",(0,l.kt)("inlineCode",{parentName:"p"},"npm install A"),"\u65f6\u4f1a\u81ea\u52a8\u5b89\u88c5\u6a21\u5757A\u7684\u4f9d\u8d56\uff0c\u4f46\u4e0d\u4f1a\u5b89\u88c5\u6a21\u5757A\u7684\u5f00\u53d1\u4f9d\u8d56\u3002"),(0,l.kt)("h3",{id:"peerdependencies"},"peerDependencies"),(0,l.kt)("p",null,"\b\u5047\u8bbe\u5b58\u5728A\u5e93\uff0c\u8be5\u5e93\u5b58\u5728\u4e00\u4e2a\u63d2\u4ef6B\uff0c\u90a3\u4e48\u5f88\u660e\u663e\u63d2\u4ef6B\u81ea\u8eab\u662f\u4e0d\u4f9d\u8d56\u4e8e\u5e93A\u7684\uff0c\u4f46\u662f\u53c8\u9700\u8981\u4f60\u7684\u9879\u76ee\u4e2d\u5b58\u5728\u5e93A\uff0c\u90a3\u4e48\u63d2\u4ef6B\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"package.json"),"\u4e2d\u5c31\u53ef\u4ee5\u901a\u8fc7 ",(0,l.kt)("inlineCode",{parentName:"p"},"peerDependencies"),"\u6765\u6307\u5b9a\u540c\u7ea7\u4f9d\u8d56\u5173\u7cfb\u3002\u6bd4\u5982\u63d2\u4ef6B\u53ea\u80fd\u57281.0\u7248\u672c\u7684A\u5e93\u4e2d\u8d77\u4f5c\u7528\uff0c\u90a3\u4e48 ",(0,l.kt)("inlineCode",{parentName:"p"},"peerDependencies"),"\u53ef\u80fd\u662f ",(0,l.kt)("inlineCode",{parentName:"p"},"A@1.0.0"),"\uff0c\u5f53\u4f60\u7684\u9879\u76ee\u4e2d\u540c\u65f6\u5b89\u88c5\u4e86\u63d2\u4ef6B\u548c2.0\u7248\u672c\u7684A\u5e93\u65f6\u5c31\u4f1a\u51fa\u73b0\u8b66\u544a\u3002"),(0,l.kt)("h3",{id:"resolutions"},"resolutions"),(0,l.kt)("p",null,"\u5047\u8bbe\u6211\u4eec\u9879\u76ee\u76f4\u63a5\u4f9d\u8d56",(0,l.kt)("inlineCode",{parentName:"p"},"react-router"),"\uff0c\u800c",(0,l.kt)("inlineCode",{parentName:"p"},"react-router"),"\u5185\u90e8\u53c8\u4f9d\u8d56",(0,l.kt)("inlineCode",{parentName:"p"},"@types/react: '*'"),"\u3002\u8fd9\u610f\u5473\u7740\u5f53\u6211\u4eec\u5b89\u88c5",(0,l.kt)("inlineCode",{parentName:"p"},"react-router"),"\u65f6\u4f1a\u81ea\u52a8\u5b89\u88c5\u6700\u65b0\u7248\u672c\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"@types/react"),"\uff0c\u53c8\u5df2\u77e5\u6700\u65b0\u7248\u672c\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"@types/react"),"\uff08\u6bd4\u5982",(0,l.kt)("inlineCode",{parentName:"p"},"v18"),"\uff09\u5f15\u5165\u4e86\u4e00\u4e9b\u7834\u574f\u6027\u53d8\u66f4\uff0c\u6211\u4eec\u6b64\u65f6\u5e0c\u671b\u80fd\u591f\u5b89\u88c5\u66f4\u4f4e\u7248\u672c\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"@types/react"),"\u6765\u907f\u514d\u9519\u8bef\u63d0\u793a\uff0c\u8fd9\u4e2a\u65f6\u5019\u53ef\u4ee5\u7ed9",(0,l.kt)("inlineCode",{parentName:"p"},"package.json"),"\u6dfb\u52a0",(0,l.kt)("inlineCode",{parentName:"p"},"resolutions"),"\u5b57\u6bb5\uff0c\u5e76\u901a\u8fc7",(0,l.kt)("inlineCode",{parentName:"p"},"yarn install"),"\u91cd\u65b0\u5b89\u88c5\u3002",(0,l.kt)("a",{parentName:"p",href:"https://classic.yarnpkg.com/lang/en/docs/selective-version-resolutions/"},"Selective dependency resolutions")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},"{\n  resolutions: {\n    '@types/react': '^17.0.0'\n  }\n}\n")),(0,l.kt)("h3",{id:"browser--module"},"browser | module"),(0,l.kt)("p",null,"\u4e00\u822c ",(0,l.kt)("inlineCode",{parentName:"p"},"browser"),"\u5b57\u6bb5\u6307\u5411 ",(0,l.kt)("inlineCode",{parentName:"p"},"cjs"),"\u6216 ",(0,l.kt)("inlineCode",{parentName:"p"},"umd"),"\u6a21\u5757\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"module"),"\u5b57\u6bb5\u6307\u5411 ",(0,l.kt)("inlineCode",{parentName:"p"},"es"),"\u6a21\u5757\uff0c\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u8fd9\u4e24\u4e2a\u5b57\u6bb5\u90fd\u6ca1\u4ec0\u4e48\u7528\u5904\u3002"),(0,l.kt)("p",null,"\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u7279\u522b\u662f\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"webpack"),"\u6253\u5305\u6a21\u5757\u65f6\uff0c\u5f53 ",(0,l.kt)("inlineCode",{parentName:"p"},"webpack"),"\u914d\u7f6e\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"target"),"\u4e3a ",(0,l.kt)("inlineCode",{parentName:"p"},"web"),"\uff08\u9ed8\u8ba4\u503c\uff09\uff0c\u4f1a\u6839\u636e\u6a21\u5757\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"browser"),"\u5b57\u6bb5\u5bfc\u5165\u6a21\u5757\uff1b\u901a\u8fc7\u8bbe\u7f6e ",(0,l.kt)("inlineCode",{parentName:"p"},"target"),"\u4e3a ",(0,l.kt)("inlineCode",{parentName:"p"},"node"),"\uff0c\u4f1a\u6839\u636e ",(0,l.kt)("inlineCode",{parentName:"p"},"module"),"\u5b57\u6bb5\u5bfc\u5165\u6a21\u5757\u3002"),(0,l.kt)("p",null,"\u53e6\u5916\uff0c\u5f53 ",(0,l.kt)("inlineCode",{parentName:"p"},"package.json"),"\u4e0d\u5b58\u5728\u5bf9\u5e94\u7684\u5165\u53e3\u5b57\u6bb5\uff0c\u4f1a\u6839\u636e ",(0,l.kt)("inlineCode",{parentName:"p"},"browser -> module -> main"),"\u7684\u4f18\u5148\u7ea7\u5bfc\u5165\u6a21\u5757\u3002\u8fd9\u4e2a\u4f18\u5148\u7ea7\u662f\u6839\u636e\u914d\u7f6e ",(0,l.kt)("inlineCode",{parentName:"p"},"resolve.mainFields"),"\u5b57\u6bb5\u6307\u5b9a\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4fee\u6539\u8be5\u5b57\u6bb5\u6765\u8c03\u6574\u4f18\u5148\u7ea7\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"// webpack.config.js\nmodule.exports = {\n    target: 'node', // \u9ed8\u8ba4\u503cweb\n    resolve: {\n        mainFields: ['main', 'module', 'browser'] // \u9ed8\u8ba4\u503c ['browser', 'module', 'main']\n    }\n}\n")),(0,l.kt)("h2",{id:"package-lockjson"},"package-lock.json"),(0,l.kt)("p",null,"\u5728 ",(0,l.kt)("inlineCode",{parentName:"p"},"package.json"),"\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"dependencies"),"\u5b57\u6bb5\u4e2d\u6211\u4eec\u7ecf\u5e38\u80fd\u770b\u89c1\u8fd9\u79cd\u5f62\u5f0f\u7684\u7248\u672c\u53f7 ",(0,l.kt)("inlineCode",{parentName:"p"},'"react": "^17.0.2"'),"\u3001",(0,l.kt)("inlineCode",{parentName:"p"},'"xx": "~0.10.0"'),"\uff0c\u8fd9\u79cd\u5199\u6cd5\u901a\u5e38\u88ab\u79f0\u4e3a",(0,l.kt)("a",{parentName:"p",href:"https://github.com/npm/node-semver"},(0,l.kt)("inlineCode",{parentName:"a"},"semver"),"\u8868\u793a\u6cd5"),"\uff0c\u4e09\u4e2a\u6570\u5b57\u5206\u522b\u8868\u793a\u4e3b\u8981\u7248\u672c\u3001\u6b21\u8981\u7248\u672c\u3001\u8865\u4e01\u7248\u672c\u3002"),(0,l.kt)("p",null,"\u5f53\u6211\u4eec\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"npm install <name>"),"\u6765\u5b89\u88c5\u4f9d\u8d56\uff0c\u6216\u8005\u662f\u5728\u5df2\u6709\u7684\u9879\u76ee\u4e2d\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"npm update"),"\u6765\u66f4\u65b0\u4f9d\u8d56\uff0c\u90fd\u4f1a\u6839\u636e ",(0,l.kt)("inlineCode",{parentName:"p"},"semver"),"\u89c4\u5219\u5b89\u88c5\u5bf9\u5e94\u7248\u672c\u7684\u6a21\u5757\uff0c\u4e5f\u5c31\u662f\u8bf4",(0,l.kt)("strong",{parentName:"p"},"\u5b9e\u9645\u5b89\u88c5\u7248\u672c\u5e76\u4e0d\u662f\u56fa\u5b9a\u7684"),"\u3002"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"^"),"\uff1a\u8868\u793a\u53ea\u4f1a\u6267\u884c\u4e0d\u66f4\u6539\u6700\u5de6\u8fb9\u975e\u96f6\u6570\u5b57\u7684\u66f4\u65b0\u3002\u6bd4\u5982 ",(0,l.kt)("inlineCode",{parentName:"li"},"^0.10.0"),"\uff0c\u610f\u5473\u7740\u6211\u4eec\u53ef\u4ee5\u5b89\u88c5\uff08\u6216\u66f4\u65b0\uff0c\u4e0b\u540c\uff09",(0,l.kt)("inlineCode",{parentName:"li"},"0.10.1"),"\u7b49\u7248\u672c\uff0c\u4f46\u4e0d\u80fd\u5b89\u88c5 ",(0,l.kt)("inlineCode",{parentName:"li"},"0.11.0"),"\u6216\u66f4\u9ad8\u7684\u7248\u672c\uff1b\u53c8\u6bd4\u5982 ",(0,l.kt)("inlineCode",{parentName:"li"},"^1.10.0"),"\uff0c\u610f\u5473\u7740\u6211\u4eec\u53ef\u4ee5\u5b89\u88c5 ",(0,l.kt)("inlineCode",{parentName:"li"},"1.10.1"),"\u3001",(0,l.kt)("inlineCode",{parentName:"li"},"1.11.0"),"\u7b49\u7248\u672c\uff0c\u4f46\u4e0d\u80fd\u5b89\u88c5 ",(0,l.kt)("inlineCode",{parentName:"li"},"2.0.0"),"\u6216\u66f4\u9ad8\u7684\u7248\u672c\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"~"),"\uff1a\u5982\u679c\u6211\u5728\u6bd4\u8f83\u5668\u4e2d\u6307\u5b9a\u4e86\u6b21\u8981\u7248\u672c\uff0c\u90a3\u4e48\u53ea\u5141\u8bb8\u8865\u4e01\u7248\u672c\u7684\u66f4\u65b0\uff1b\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u6b21\u8981\u7248\u672c\uff0c\u90a3\u4e48\u53ef\u4ee5\u5141\u8bb8\u6b21\u8981\u7248\u672c\u7684\u66f4\u65b0\uff0c\u6240\u4ee5\u901a\u5e38\u60c5\u51b5 ",(0,l.kt)("inlineCode",{parentName:"li"},"~"),"\u53ea\u5141\u8bb8\u8865\u4e01\u7ea7\u522b\u7684\u66f4\u65b0\u3002\u6bd4\u5982 ",(0,l.kt)("inlineCode",{parentName:"li"},"~1.10.0"),"\u7684\u4f9d\u8d56\uff0c\u610f\u5473\u7740\u6211\u4eec\u53ea\u80fd\u5b89\u88c5 ",(0,l.kt)("inlineCode",{parentName:"li"},"1.10.x"),"\u7684\u7248\u672c\uff0c\u4e0d\u80fd\u5b89\u88c5 ",(0,l.kt)("inlineCode",{parentName:"li"},"1.11.0"),"\u7684\u7248\u672c\u3002")),(0,l.kt)("p",null,"\u800c\u8fd9\u4e5f\u5e26\u6765\u4e86\u4e00\u4e2a\u65b0\u7684\u95ee\u9898\uff0c\u5bf9\u4e8e\u540c\u4e00\u4e2a\u9879\u76ee\u5728\u4e0d\u540c\u65f6\u673a\u5b89\u88c5\u7684\u4f9d\u8d56\u7248\u672c\u53ef\u80fd\u4e0d\u4e00\u81f4\uff0c\u8fd9\u5c31\u5e26\u6765\u4e86\u76f8\u5f53\u5927\u7684\u98ce\u9669\u548c\u4e0d\u53ef\u63a7\u6027\uff0c\u7279\u522b\u662f\u5f53\u4f9d\u8d56\u7684\u67d0\u4e2a\u5305\u66f4\u65b0\u4e86\u4e00\u4e2a\u6f0f\u6d1e\uff0c\u90a3\u4e5f\u4f1a\u5f71\u54cd\u5230\u6211\u4eec\u65b0\u6784\u5efa\u7684\u4ee3\u7801\u3002"),(0,l.kt)("p",null,"\u56e0\u6b64\u9ad8\u7248\u672c",(0,l.kt)("inlineCode",{parentName:"p"},"yarn"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"npm"),"\u90fd\u9ed8\u8ba4\u542f\u7528\u4e86",(0,l.kt)("inlineCode",{parentName:"p"},"lock"),"\u673a\u5236\uff0c\u5f53\u6211\u4eec",(0,l.kt)("inlineCode",{parentName:"p"},"npm install <name>"),"\u5b89\u88c5\u4f9d\u8d56\u6216",(0,l.kt)("inlineCode",{parentName:"p"},"npm update"),"\u66f4\u65b0\u4f9d\u8d56\u7684\u65f6\u5019\u90fd\u4f1a\u751f\u6210",(0,l.kt)("inlineCode",{parentName:"p"},"package-lock.json"),"\uff08",(0,l.kt)("inlineCode",{parentName:"p"},"yarn"),"\u5bf9\u5e94",(0,l.kt)("inlineCode",{parentName:"p"},"yarn.lock"),"\uff09\uff0c\u90a3\u5f53\u5176\u4ed6\u4eba",(0,l.kt)("inlineCode",{parentName:"p"},"clone"),"\u9879\u76ee\u5e76",(0,l.kt)("inlineCode",{parentName:"p"},"npm install"),"\u65f6\u5219\u4f1a\u6839\u636e",(0,l.kt)("inlineCode",{parentName:"p"},"package-lock.json"),"\u6765\u5b89\u88c5\u6307\u5b9a\u7248\u672c\u7684\u6a21\u5757\u3002"),(0,l.kt)("hr",null),(0,l.kt)("p",null,"\u4e0d\u8fc7\u5f88\u660e\u663e\u9501\u4e0d\u9501\u7248\u672c\u90fd\u6709\u5bf9\u5e94\u7684\u597d\u5904\u548c\u574f\u5904\uff0c\u6240\u4ee5\u793e\u533a\u5bf9\u662f\u5426\u9501\u7248\u672c\u8fd8\u5b58\u5728\u7740\u4e00\u4e9b",(0,l.kt)("a",{parentName:"p",href:"https://www.zhihu.com/question/65536076"},"\u4e89\u8bba"),"\u3002"),(0,l.kt)("p",null,"\u53e6\u5916\uff0c\u65e0\u8bba\u662f\u5426\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"lock"),"\u673a\u5236\uff0c\u90fd\u4e0d\u5e94\u8be5\u628a ",(0,l.kt)("inlineCode",{parentName:"p"},"package-lock.json"),"\u5199\u5165 ",(0,l.kt)("inlineCode",{parentName:"p"},".gitignore"),"\u4e2d\u3002"),(0,l.kt)("p",null,"\u5982\u679c\u6211\u4eec\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"lock"),"\u673a\u5236\uff0c\u5e94\u8be5\u76f4\u63a5\u628a ",(0,l.kt)("inlineCode",{parentName:"p"},"package-lock.json"),"\u63d0\u4ea4\u8fdb\u4ed3\u5e93\uff1b\u5982\u679c\u6211\u4eec\u4e0d\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"lock"),"\u673a\u5236\uff0c\u5219\u5e94\u8be5\u5728 ",(0,l.kt)("inlineCode",{parentName:"p"},".npmrc"),"\u4e2d\u5199\u5165 ",(0,l.kt)("inlineCode",{parentName:"p"},"package-lock=false"),"\u6765\u5173\u95ed ",(0,l.kt)("inlineCode",{parentName:"p"},"lock"),"\u673a\u5236\uff0c\u5e76\u628a ",(0,l.kt)("inlineCode",{parentName:"p"},"package-lock.json"),"\u63d0\u4ea4\u5230\u4ed3\u5e93\u4e2d\u3002",(0,l.kt)("a",{parentName:"p",href:"https://www.zhihu.com/question/264560841"},"\u53c2\u8003")),(0,l.kt)("h2",{id:"node_modules"},"node_modules"),(0,l.kt)("p",null,"\u5728 ",(0,l.kt)("inlineCode",{parentName:"p"},"NPM"),"\u7684\u65e9\u671f\u7248\u672c\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"node_modules"),"\u4f7f\u7528\u5d4c\u5957\u7ed3\u6784\u6765\u7ba1\u7406\u6a21\u5757\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\u3002\u800c\u6211\u4eec\u7684\u5f88\u591a\u6a21\u5757\u90fd\u53c8\u53ef\u80fd\u4f9d\u8d56\u4e8e\u540c\u4e00\u4e2a\u6a21\u5757\uff0c\u8fd9\u6837\u7684\u7ed3\u6784\u53ef\u80fd\u5bfc\u81f4\u6027\u80fd\u7684\u6d6a\u8d39\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"- A -> B\n- C -> B\n")),(0,l.kt)("p",null,"\u6240\u4ee5\u5728 ",(0,l.kt)("inlineCode",{parentName:"p"},"NPM@3.x"),"\u4ee5\u540e\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"node_modules"),"\u4e3b\u8981\u4f7f\u7528\u6241\u5e73\u7ed3\u6784\u6765\u7ba1\u7406\u6a21\u5757\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\u3002\u5047\u8bbe\u6211\u4eec\u5b89\u88c5\u4e86A\u548cC\u6a21\u5757\uff0c\u8fd9\u4e24\u4e2a\u6a21\u5757\u540c\u65f6\u4f9d\u8d56\u4e8e\u540c\u4e00\u4e2a\u7248\u672c\u7684B\u6a21\u5757\uff0c\u6b64\u65f6 ",(0,l.kt)("inlineCode",{parentName:"p"},"node_modules"),"\u7ed3\u6784\u5982\u4e0b\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"- A\n- C\n- B\n")),(0,l.kt)("p",null,"\u4e0d\u8fc7\u6709\u7684\u65f6\u5019\uff0c\u6211\u4eec\u5b89\u88c5\u7684\u6a21\u5757A\u548cC\u53ef\u80fd\u4f9d\u8d56\u4e8e\u540c\u4e00\u4e2a\u6a21\u5757B\u7684\u4e0d\u540c\u7248\u672c\u3002"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u5047\u8bbe ",(0,l.kt)("inlineCode",{parentName:"p"},"node_modules"),"\u5b58\u5728 ",(0,l.kt)("inlineCode",{parentName:"p"},"B@1.1.0"),"\u3002\u7136\u540e\u6211\u4eec\u5b89\u88c5\u7684\u6a21\u5757A\u4f9d\u8d56\u4e8e ",(0,l.kt)("inlineCode",{parentName:"p"},"B@^1.1.0"),"\uff0c\u5373\u4f7f\u6a21\u5757B\u6700\u65b0\u7248\u672c\u5df2\u7ecf\u5230\u4e86 ",(0,l.kt)("inlineCode",{parentName:"p"},"1.9.0"),"\uff0c\u6211\u4eec\u4e5f\u4f1a\u590d\u7528\u539f\u672c\u5df2\u5b89\u88c5\u7684\u6a21\u5757\u3002"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre"},"- A\n- B@1.1.0\n"))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u5047\u8bbe ",(0,l.kt)("inlineCode",{parentName:"p"},"node_modules"),"\u5b58\u5728 ",(0,l.kt)("inlineCode",{parentName:"p"},"B@1.1.0"),"\u3002\u7136\u540e\u6211\u4eec\u5b89\u88c5\u7684\u6a21\u5757A\u4f9d\u8d56\u4e8e ",(0,l.kt)("inlineCode",{parentName:"p"},"B@^1.2.0"),"\uff0c\u5219\u4f1a\u5b89\u88c5\u6700\u65b0\u7684\u6a21\u5757\uff08\u5982 ",(0,l.kt)("inlineCode",{parentName:"p"},"B@1.9.0"),"\uff09"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre"},"- A -> B@1.9.0 \n- B@1.1.0\n")))))}u.isMDXComponent=!0}}]);