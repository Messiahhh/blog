"use strict";(self.webpackChunkakara=self.webpackChunkakara||[]).push([[7603],{3905:function(e,n,t){t.d(n,{Zo:function(){return s},kt:function(){return k}});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var c=r.createContext({}),i=function(e){var n=r.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},s=function(e){var n=i(e.components);return r.createElement(c.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),m=i(t),k=a,d=m["".concat(c,".").concat(k)]||m[k]||u[k]||o;return t?r.createElement(d,l(l({ref:n},s),{},{components:t})):r.createElement(d,l({ref:n},s))}));function k(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,l=new Array(o);l[0]=m;var p={};for(var c in n)hasOwnProperty.call(n,c)&&(p[c]=n[c]);p.originalType=e,p.mdxType="string"==typeof e?e:a,l[1]=p;for(var i=2;i<o;i++)l[i]=t[i];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},5773:function(e,n,t){t.r(n),t.d(n,{assets:function(){return s},contentTitle:function(){return c},default:function(){return k},frontMatter:function(){return p},metadata:function(){return i},toc:function(){return u}});var r=t(7462),a=t(3366),o=(t(7294),t(3905)),l=["components"],p={sidebarDepth:4},c="\u9519\u8bef\u76d1\u63a7",i={unversionedId:"\u9519\u8bef\u76d1\u63a7",id:"\u9519\u8bef\u76d1\u63a7",title:"\u9519\u8bef\u76d1\u63a7",description:"\u5f02\u5e38\u6355\u83b7",source:"@site/docs/\u9519\u8bef\u76d1\u63a7.md",sourceDirName:".",slug:"/\u9519\u8bef\u76d1\u63a7",permalink:"/blog/docs/\u9519\u8bef\u76d1\u63a7",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/\u9519\u8bef\u76d1\u63a7.md",tags:[],version:"current",frontMatter:{sidebarDepth:4},sidebar:"tutorialSidebar",previous:{title:"Rust",permalink:"/blog/docs/Rust"},next:{title:"\u6027\u80fd\u4f18\u5316",permalink:"/blog/docs/\u7f51\u7ad9\u4f18\u5316"}},s={},u=[{value:"\u5f02\u5e38\u6355\u83b7",id:"\u5f02\u5e38\u6355\u83b7",level:2},{value:"\u5185\u5b58\u6cc4\u6f0f",id:"\u5185\u5b58\u6cc4\u6f0f",level:2},{value:"\u5e38\u89c1\u5185\u5b58\u6cc4\u6f0f",id:"\u5e38\u89c1\u5185\u5b58\u6cc4\u6f0f",level:3}],m={toc:u};function k(e){var n=e.components,t=(0,a.Z)(e,l);return(0,o.kt)("wrapper",(0,r.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"\u9519\u8bef\u76d1\u63a7"},"\u9519\u8bef\u76d1\u63a7"),(0,o.kt)("h2",{id:"\u5f02\u5e38\u6355\u83b7"},"\u5f02\u5e38\u6355\u83b7"),(0,o.kt)("p",null,"\u8fd0\u884c\u65f6\u4ee3\u7801\u5f02\u5e38\uff0c\u4f1a",(0,o.kt)("strong",{parentName:"p"},"\u81ea\u52a8\u629b\u51fa\u9519\u8bef"),"\uff0c\u5e76",(0,o.kt)("strong",{parentName:"p"},"\u4e2d\u65ad\u540e\u7eed\u4ee3\u7801\u7684\u6267\u884c"),"\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// \u4f8b\u5b501\nlet x = y\nconsole.log('aka') // \u4e0d\u4f1a\u8f93\u51fa\n\n// \u4f8b\u5b502\nJSON.parse('hello aka') \nconsole.log('aka') // \u4e0d\u4f1a\u8f93\u51fa\n\n// \u4f8b\u5b503\nJSON.parse(undefined)\nconsole.log('aka') // \u4e0d\u4f1a\u8f93\u51fa\n")),(0,o.kt)("p",null,"\u6211\u4eec\u4e5f\u53ef\u4ee5\u901a\u8fc7",(0,o.kt)("inlineCode",{parentName:"p"},"throw"),"\u6765",(0,o.kt)("strong",{parentName:"p"},"\u624b\u52a8\u629b\u51fa\u9519\u8bef"),"\uff0c"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// \u4f8b\u5b504\nthrow new Error('\u624b\u52a8\u629b\u51fa\u7684\u9519\u8bef')\nconsole.log('aka') // \u4e0d\u4f1a\u8f93\u51fa\n")),(0,o.kt)("p",null,"\u4e3a\u4e86\u907f\u514d\u4ee3\u7801\u7684\u5f02\u5e38\u4e0d\u4f1a\u5f71\u54cd\u540e\u7eed\u4ee3\u7801\u7684\u6267\u884c\uff0c\u6211\u4eec\u5e94\u8be5\u4f7f\u7528",(0,o.kt)("inlineCode",{parentName:"p"},"try...catch"),"\u6765",(0,o.kt)("strong",{parentName:"p"},"\u6355\u83b7\u5f02\u5e38")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// \u4f8b\u5b501\ntry {\n    let x = y\n} catch(err) {\n    console.log(err)\n}\nconsole.log('aka') // \u8f93\u51fa\n\n// \u4f8b\u5b502\ntry {\n    JSON.parse('hello aka')\n} catch(err) {\n    console.log(err)\n}\nconsole.log('aka') // \u8f93\u51fa\n\n// \u4f8b\u5b504\ntry {\n    throw new Error('\u624b\u52a8\u629b\u51fa\u7684\u9519\u8bef')\n} catch(err) {\n    console.log(err)\n}\nconsole.log('aka')\n")),(0,o.kt)("p",null,"\u4ee5\u4e0a\u91cd\u70b9\u5728\u4ee3\u7801\u7684\u9519\u8bef\uff0c\u63a5\u4e0b\u6765\u662f\u8bf8\u5982\u6587\u4ef6\u8bfb\u53d6\u3001I/O\u64cd\u4f5c\u7c7b\u578b\u7684\u9519\u8bef"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"fs.readFile('file', (err, data) => {\n    if (err) { \n        console.log(err) // \u8bfb\u53d6\u5931\u8d25\u65f6\uff0c\u53ef\u8f93\u51fa\u9519\u8bef\u4fe1\u606f\u4ee5\u4f9b\u5f00\u53d1\u8005\u53c2\u8003\n    }\n    console.log(data) // \u8bfb\u53d6\u5931\u8d25\u65f6\u4e3aundefined\n})\n")),(0,o.kt)("p",null,"\u5373\u4f7f\u6587\u4ef6\u8bfb\u53d6\u5931\u8d25\uff0c",(0,o.kt)("inlineCode",{parentName:"p"},"fs"),"\u6a21\u5757\u4e5f\u4f1a\u5e2e\u6211\u4eec",(0,o.kt)("strong",{parentName:"p"},"\u6355\u83b7\u5f02\u5e38"),"\uff0c\u56e0\u6b64\u540e\u7eed\u4ee3\u7801\u7684\u6267\u884c\u4e0d\u53d7\u5f71\u54cd\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"fetch('A')\n.then(res => res.json()) \n.then(data => fetch('b', data))\n.then(res => res.json())\n.catch(err => console.log(err))\n")),(0,o.kt)("p",null,"\u8be5\u4ee3\u7801\u4e2d\uff0c\u65e0\u8bba\u662f",(0,o.kt)("inlineCode",{parentName:"p"},"fetch"),"\u5931\u8d25\u629b\u51fa\u9519\u8bef\uff0c\u8fd8\u662f",(0,o.kt)("inlineCode",{parentName:"p"},"then"),"\u5185\u90e8\u51fa\u73b0\u4ee3\u7801\u5f02\u5e38\u629b\u51fa\u9519\u8bef\uff0c\u90fd\u4f1a\u8ba9",(0,o.kt)("inlineCode",{parentName:"p"},"promise"),"\u7684\u72b6\u6001\u53d8\u6210",(0,o.kt)("inlineCode",{parentName:"p"},"rejected"),"\uff0c\u6b64\u65f6\u4f1a\u628a\u629b\u51fa\u7684\u9519\u8bef\u4f20\u7ed9\u672b\u7aef\u7684",(0,o.kt)("inlineCode",{parentName:"p"},"catch")),(0,o.kt)("p",null,"\u800c\u6700\u7ec8\u5f62\u6001\u7684\u5f02\u5e38\u6355\u83b7\u5c31\u662f",(0,o.kt)("inlineCode",{parentName:"p"},"try...catch"),"\u914d\u5408",(0,o.kt)("inlineCode",{parentName:"p"},"await"),"\u6765\u6355\u83b7",(0,o.kt)("inlineCode",{parentName:"p"},"promise"),"\u5185\u90e8\u7684\u5f02\u5e38"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"try {\n    const data = await fetch()\n} catch (e) {\n    console.log(e)\n}\n")),(0,o.kt)("p",null,"\u8865\u51451\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"let p = new Promise((resolve, reject) => {\n    throw new Error('error')\n    console.log(1) // \u4e0d\u8f93\u51fa\n})\nconsole.log(2) // \u8f93\u51fa\n")),(0,o.kt)("p",null,"\u7b80\u5355\u6765\u8bb2\uff0c",(0,o.kt)("inlineCode",{parentName:"p"},"promise"),"\u5185\u90e8\u51fa\u73b0\u7684\u5f02\u5e38\u4f1a\u4e2d\u65ad\u5185\u90e8\u540e\u7eed\u4ee3\u7801\u7684\u6267\u884c\uff0c\u540c\u65f6",(0,o.kt)("inlineCode",{parentName:"p"},"promise"),"\u7684\u72b6\u6001\u53d8\u6210",(0,o.kt)("inlineCode",{parentName:"p"},"rejected"),"\uff0c\u7b49\u5f85\u7740\u5916\u90e8\u8fdb\u884c\u5f02\u5e38\u7684\u6355\u83b7\u3002\u901a\u5e38\u6211\u4eec\u4f1a\u7528",(0,o.kt)("inlineCode",{parentName:"p"},".catch"),"\u6216",(0,o.kt)("inlineCode",{parentName:"p"},"try...catch + await"),"\u6765\u6355\u83b7\u8be5\u5f02\u5e38\u3002"),(0,o.kt)("p",null,"\u8865\u51452\uff1a"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"try...catch"),"\u6355\u83b7\u6355\u83b7\u5f02\u6b65\u4ee3\u7801\u5185\u90e8\u7684\u9519\u8bef\uff0c\u5982\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"try {\n    setTimeout(() => {\n        throw new Error('222')\n    })\n} catch (e) {\n    console.log(2) // \u4e0d\u8f93\u51fa\uff0c\u56e0\u4e3a\u6ca1\u6709\u6355\u83b7\u5230\u5f02\u5e38\n}\n")),(0,o.kt)("p",null,"\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"async function A() {\n    try {\n        await new Promise((resolve, reject) => {\n            setTimeout(() => {\n                reject(new Error('222'))\n            })\n        })\n    } catch (e) {\n        console.log(e)\n    }\n}\n")),(0,o.kt)("p",null,"\u8865\u51453\uff1a"),(0,o.kt)("p",null,"\u4e5f\u53ef\u4ee5\u4f7f\u7528\u7c7b\u4f3c",(0,o.kt)("inlineCode",{parentName:"p"},"window.onerror"),"\u7684\u65b9\u6cd5\u6765\u6355\u83b7\u4e00\u4e9b\u8d44\u6e90\u52a0\u8f7d\u7684\u9519\u8bef"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"window.onerror = function(errorMessage, scriptURI, lineNo, columnNo, error) {\n    console.log('errorMessage: ' + errorMessage); // \u5f02\u5e38\u4fe1\u606f\n    console.log('scriptURI: ' + scriptURI); // \u5f02\u5e38\u6587\u4ef6\u8def\u5f84\n    console.log('lineNo: ' + lineNo); // \u5f02\u5e38\u884c\u53f7\n    console.log('columnNo: ' + columnNo); // \u5f02\u5e38\u5217\u53f7\n    console.log('error: ' + error); // \u5f02\u5e38\u5806\u6808\u4fe1\u606f\n}\n")),(0,o.kt)("h2",{id:"\u5185\u5b58\u6cc4\u6f0f"},"\u5185\u5b58\u6cc4\u6f0f"),(0,o.kt)("p",null,"\u5185\u5b58\u6cc4\u6f0f\uff08memory leak\uff09\uff0c\u6307\u7684\u662f\u4e0d\u518d\u4f7f\u7528\u7684\u5185\u5b58\uff0c\u5374\u6ca1\u6709\u88ab\u5373\u65f6\u7684\u91ca\u653e\u3002"),(0,o.kt)("p",null,"\u4e00\u4e2a\u5e7f\u4e3a\u6d41\u4f20\u7684",(0,o.kt)("strong",{parentName:"p"},"\u9519\u8bef\u89c2\u70b9"),"\uff1a\u95ed\u5305\u4f1a\u9020\u6210\u5185\u5b58\u6cc4\u6f0f\u3002"),(0,o.kt)("p",null,"\u5b9e\u9645\u4e0a\u8fd9\u662f\u5341\u5206\u9519\u8bef\u7684\uff0c\u4e4b\u6240\u4ee5\u8fd9\u79cd\u89c2\u70b9\u4f1a\u6d41\u4f20\u81f3\u4eca\uff0c\u662f\u56e0\u4e3a\u65e9\u5e74\u7684IE\u6d4f\u89c8\u5668\u5b58\u5728\u5783\u573e\u56de\u6536\u7684BUG\u3002\u5185\u5b58\u6cc4\u6f0f\u6307\u7684\u662f\u4e0d\u518d\u4f7f\u7528\u7684\u53d8\u91cf\u6ca1\u6709\u88ab\u56de\u6536\uff0c\u53ef\u662f\u95ed\u5305\u4e2d\u7684\u53d8\u91cf\u662f\u6211\u4eec\u9700\u8981\u7528\u5230\u7684\u5440\u3002\u6bcf\u4e00\u4e2a\u4f20\u64ad\u201c\u95ed\u5305\u4f1a\u9020\u6210\u5185\u5b58\u6cc4\u6f0f\u201d\u8fd9\u79cd\u9519\u8bef\u89c2\u5ff5\u7684\u540c\u5b66\u90fd\u5e94\u8be5\u88ab\u6253\u4e00\u987f...\u53ea\u8981\u7a0b\u5e8f\u5199\u9519\u4e86\u624d\u4f1a\u9020\u6210\u5185\u5b58\u6cc4\u6f0f\u3002"),(0,o.kt)("h3",{id:"\u5e38\u89c1\u5185\u5b58\u6cc4\u6f0f"},"\u5e38\u89c1\u5185\u5b58\u6cc4\u6f0f"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"\u610f\u5916\u7684\u5168\u5c40\u53d8\u91cf"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// \u610f\u5916\u7684\u58f0\u660e\u4e86\u5168\u5c40\u7684\u53d8\u91cf\uff0c\u5728\u9875\u9762\u5173\u95ed\u524da\u53d8\u91cf\u90fd\u4e0d\u4f1a\u88ab\u56de\u6536\n(function A() {\n    a = '123'\n})()\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"\u5faa\u73af\u5f15\u7528")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"\u5220\u9664DOM\u65f6\uff0c\u8fd8\u5b58\u5728DOM\u7684\u5f15\u7528"),(0,o.kt)("p",{parentName:"li"},"\u6bd4\u5982\uff0c\u6211\u4eec\u7ed9DOM\u7ed1\u5b9a\u70b9\u51fb\u4e8b\u4ef6\uff0c\u4e4b\u540e\u5220\u9664DOM\u8282\u70b9\u3002\u56e0\u4e3a\u8fd8\u5b58\u5728\u5f15\u7528\uff0c\u6240\u4ee5\u5185\u5b58\u6ca1\u6709\u88ab\u91ca\u653e\u3002"))))}k.isMDXComponent=!0}}]);