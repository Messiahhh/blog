"use strict";(self.webpackChunkakara=self.webpackChunkakara||[]).push([[7766],{3905:function(e,n,t){t.d(n,{Zo:function(){return m},kt:function(){return d}});var a=t(7294);function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(e,n){if(null==e)return{};var t,a,l=function(e,n){if(null==e)return{};var t,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(l[t]=e[t]);return l}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var o=a.createContext({}),u=function(e){var n=a.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},m=function(e){var n=u(e.components);return a.createElement(o.Provider,{value:n},e.children)},s={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},k=a.forwardRef((function(e,n){var t=e.components,l=e.mdxType,r=e.originalType,o=e.parentName,m=p(e,["components","mdxType","originalType","parentName"]),k=u(t),d=l,c=k["".concat(o,".").concat(d)]||k[d]||s[d]||r;return t?a.createElement(c,i(i({ref:n},m),{},{components:t})):a.createElement(c,i({ref:n},m))}));function d(e,n){var t=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var r=t.length,i=new Array(r);i[0]=k;var p={};for(var o in n)hasOwnProperty.call(n,o)&&(p[o]=n[o]);p.originalType=e,p.mdxType="string"==typeof e?e:l,i[1]=p;for(var u=2;u<r;u++)i[u]=t[u];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}k.displayName="MDXCreateElement"},9565:function(e,n,t){t.r(n),t.d(n,{assets:function(){return m},contentTitle:function(){return o},default:function(){return d},frontMatter:function(){return p},metadata:function(){return u},toc:function(){return s}});var a=t(7462),l=t(3366),r=(t(7294),t(3905)),i=["components"],p={},o="Rust",u={unversionedId:"Rust",id:"Rust",title:"Rust",description:"\u521a\u5f00\u59cb\u5b66",source:"@site/docs/Rust.md",sourceDirName:".",slug:"/Rust",permalink:"/blog/docs/Rust",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Rust.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\u97f3\u89c6\u9891\u5b66\u4e60",permalink:"/blog/docs/\u97f3\u89c6\u9891\u5b66\u4e60"},next:{title:"\u5f02\u5e38\u5904\u7406",permalink:"/blog/docs/\u5f02\u5e38\u5904\u7406"}},m={},s=[{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:2},{value:"rustup\uff08rust\u7248\u672c\u7ba1\u7406\uff09",id:"rustuprust\u7248\u672c\u7ba1\u7406",level:3},{value:"rustc\uff08\u7f16\u8bd1\u5668\uff09",id:"rustc\u7f16\u8bd1\u5668",level:3},{value:"cargo\uff08\u5305\u7ba1\u7406\uff09",id:"cargo\u5305\u7ba1\u7406",level:3},{value:"Cargo.toml\uff08\u914d\u7f6e\u6587\u4ef6\uff09",id:"cargotoml\u914d\u7f6e\u6587\u4ef6",level:3},{value:"\u57fa\u7840",id:"\u57fa\u7840",level:2},{value:"\u5e38\u91cf",id:"\u5e38\u91cf",level:3},{value:"\u53d8\u91cf",id:"\u53d8\u91cf",level:3},{value:"shadow",id:"shadow",level:4},{value:"\u57fa\u672c\u6570\u636e\u7c7b\u578b",id:"\u57fa\u672c\u6570\u636e\u7c7b\u578b",level:3},{value:"\u6807\u91cf\u7c7b\u578b\uff08scalar\uff09",id:"\u6807\u91cf\u7c7b\u578bscalar",level:4},{value:"\u590d\u5408\u7c7b\u578b\uff08compound\uff09",id:"\u590d\u5408\u7c7b\u578bcompound",level:4},{value:"\u5143\u7ec4",id:"\u5143\u7ec4",level:5},{value:"\u6570\u7ec4",id:"\u6570\u7ec4",level:5},{value:"\u51fd\u6570",id:"\u51fd\u6570",level:3},{value:"\u8bed\u53e5\u548c\u8868\u8fbe\u5f0f",id:"\u8bed\u53e5\u548c\u8868\u8fbe\u5f0f",level:3},{value:"\u8bed\u53e5\uff08statement\uff09",id:"\u8bed\u53e5statement",level:4},{value:"\u8868\u8fbe\u5f0f\uff08expression\uff09",id:"\u8868\u8fbe\u5f0fexpression",level:4},{value:"\u63a7\u5236\u6d41",id:"\u63a7\u5236\u6d41",level:3},{value:"if expression",id:"if-expression",level:4},{value:"loop expression",id:"loop-expression",level:4},{value:"loop label",id:"loop-label",level:5},{value:"while",id:"while",level:4},{value:"for...in",id:"forin",level:4},{value:"\u6240\u6709\u6743\uff08Ownership\uff09",id:"\u6240\u6709\u6743ownership",level:3},{value:"\u6240\u6709\u6743\u8f6c\u79fb\uff08move\uff09",id:"\u6240\u6709\u6743\u8f6c\u79fbmove",level:4},{value:"\u5f15\u7528\uff08borrow\uff09",id:"\u5f15\u7528borrow",level:4},{value:"\u751f\u547d\u5468\u671f",id:"\u751f\u547d\u5468\u671f",level:4},{value:"Generic Lifetimes Parameter",id:"generic-lifetimes-parameter",level:4},{value:"Static Lifetimes",id:"static-lifetimes",level:4},{value:"\u7ed3\u6784\u4f53\uff08Struct\uff09",id:"\u7ed3\u6784\u4f53struct",level:3},{value:"impl",id:"impl",level:4},{value:"struct update syntax",id:"struct-update-syntax",level:4},{value:"tuple struct",id:"tuple-struct",level:4},{value:"unit-like struct",id:"unit-like-struct",level:4},{value:"Enum",id:"enum",level:3},{value:"<code>Option&lt;T&gt;</code>",id:"optiont",level:4},{value:"match expression",id:"match-expression",level:4},{value:"If let",id:"if-let",level:4},{value:"\u6a21\u5f0f\u5339\u914d\uff08pattern match\uff09",id:"\u6a21\u5f0f\u5339\u914dpattern-match",level:3},{value:"<code>refutable</code>\u3001<code>irrefutable</code>",id:"refutableirrefutable",level:4},{value:"Multiple patterns",id:"multiple-patterns",level:4},{value:"\u5339\u914d\u8303\u56f4<code>..=</code>",id:"\u5339\u914d\u8303\u56f4",level:4},{value:"\u89e3\u6784\u8d4b\u503c",id:"\u89e3\u6784\u8d4b\u503c",level:4},{value:"\u89e3\u6784Struct",id:"\u89e3\u6784struct",level:5},{value:"\u89e3\u6784\u679a\u4e3e",id:"\u89e3\u6784\u679a\u4e3e",level:5},{value:"\u89e3\u6784\u5143\u7ec4",id:"\u89e3\u6784\u5143\u7ec4",level:5},{value:"\u7701\u7565\u53d8\u91cf",id:"\u7701\u7565\u53d8\u91cf",level:4},{value:"Match Guard",id:"match-guard",level:4},{value:"@bindings",id:"bindings",level:4},{value:"\u96c6\u5408\u7c7b\u578b",id:"\u96c6\u5408\u7c7b\u578b",level:3},{value:"Vec",id:"vec",level:4},{value:"String",id:"string",level:4},{value:"HashMap",id:"hashmap",level:4},{value:"Range",id:"range",level:4},{value:"\u9519\u8bef\u5904\u7406",id:"\u9519\u8bef\u5904\u7406",level:3},{value:"panic",id:"panic",level:4},{value:"Result",id:"result",level:4},{value:"unwrap",id:"unwrap",level:5},{value:"expect",id:"expect",level:5},{value:"propagating errors",id:"propagating-errors",level:5},{value:"unwrap_or_else",id:"unwrap_or_else",level:5},{value:"\u6cdb\u578b",id:"\u6cdb\u578b",level:3},{value:"\u5355\u6001\u5316",id:"\u5355\u6001\u5316",level:4},{value:"Trait",id:"trait",level:3},{value:"Trait Bound",id:"trait-bound",level:4},{value:"Trait Object",id:"trait-object",level:4},{value:"\u95ed\u5305",id:"\u95ed\u5305",level:3},{value:"\u8fed\u4ee3\u5668\uff08iteration\uff09",id:"\u8fed\u4ee3\u5668iteration",level:3},{value:"<em>consuming adaptors</em>",id:"consuming-adaptors",level:4},{value:"<em>Iterator adaptors</em>",id:"iterator-adaptors",level:4},{value:"\u667a\u80fd\u6307\u9488",id:"\u667a\u80fd\u6307\u9488",level:3},{value:"<em>Deref</em>",id:"deref",level:4},{value:"<em>Drop</em>",id:"drop",level:4},{value:"<code>Box&lt;T&gt;</code>",id:"boxt",level:4},{value:"<code>Rc&lt;T&gt;</code>",id:"rct",level:4},{value:"<code>RefCell&lt;T&gt;</code>",id:"refcellt",level:4},{value:"\u591a\u7ebf\u7a0b\u7f16\u7a0b",id:"\u591a\u7ebf\u7a0b\u7f16\u7a0b",level:3},{value:"Join Handles",id:"join-handles",level:4},{value:"move \u95ed\u5305",id:"move-\u95ed\u5305",level:4},{value:"\u7ebf\u7a0b\u95f4\u901a\u4fe1",id:"\u7ebf\u7a0b\u95f4\u901a\u4fe1",level:4},{value:"\u6a21\u5757\u5316",id:"\u6a21\u5757\u5316",level:3},{value:"use",id:"use",level:4},{value:"pub",id:"pub",level:4},{value:"struct",id:"struct",level:5},{value:"\u9ad8\u7ea7\u7279\u6027",id:"\u9ad8\u7ea7\u7279\u6027",level:2},{value:"Unsafe Rust",id:"unsafe-rust",level:3},{value:"Advanced Traits",id:"advanced-traits",level:3},{value:"Advanced Type",id:"advanced-type",level:3},{value:"Advanced Function",id:"advanced-function",level:3},{value:"\u5b8f\uff08Macro\uff09",id:"\u5b8fmacro",level:3},{value:"\u58f0\u660e\u5b8f",id:"\u58f0\u660e\u5b8f",level:4},{value:"\u5b9a\u4e49",id:"\u5b9a\u4e49",level:6},{value:"\u4f7f\u7528",id:"\u4f7f\u7528",level:6},{value:"\u8fc7\u7a0b\u5b8f",id:"\u8fc7\u7a0b\u5b8f",level:4},{value:"\u6d3e\u751f\u5b8f",id:"\u6d3e\u751f\u5b8f",level:5},{value:"\u5b9a\u4e49",id:"\u5b9a\u4e49-1",level:6},{value:"\u4f7f\u7528",id:"\u4f7f\u7528-1",level:6},{value:"\u5c5e\u6027\u5b8f",id:"\u5c5e\u6027\u5b8f",level:5},{value:"\u5b9a\u4e49",id:"\u5b9a\u4e49-2",level:6},{value:"\u4f7f\u7528",id:"\u4f7f\u7528-2",level:6},{value:"\u51fd\u6570\u5f0f\u5b8f",id:"\u51fd\u6570\u5f0f\u5b8f",level:5},{value:"\u5b9a\u4e49",id:"\u5b9a\u4e49-3",level:6},{value:"\u4f7f\u7528",id:"\u4f7f\u7528-3",level:6},{value:"WebAssembly",id:"webassembly",level:2},{value:"wasm-pack",id:"wasm-pack",level:3},{value:"\u5176\u4ed6",id:"\u5176\u4ed6",level:2},{value:"r#...#",id:"r",level:3},{value:"\u53d1\u5e03\u4e8c\u8fdb\u5236",id:"\u53d1\u5e03\u4e8c\u8fdb\u5236",level:3},{value:"\u5185\u7f6e\u6a21\u5757",id:"\u5185\u7f6e\u6a21\u5757",level:2},{value:"std::fs",id:"stdfs",level:3}],k={toc:s};function d(e){var n=e.components,t=(0,l.Z)(e,i);return(0,r.kt)("wrapper",(0,a.Z)({},k,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"rust"},"Rust"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u521a\u5f00\u59cb\u5b66")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://doc.rust-lang.org/book/title-page.html"},"\u53c2\u8003\uff1aRust Book")),(0,r.kt)("h2",{id:"\u5b89\u88c5"},"\u5b89\u88c5"),(0,r.kt)("h3",{id:"rustuprust\u7248\u672c\u7ba1\u7406"},"rustup\uff08rust\u7248\u672c\u7ba1\u7406\uff09"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"rustup"),"\u662f\u7ba1\u7406",(0,r.kt)("inlineCode",{parentName:"p"},"rust"),"\u7248\u672c\u7684\u5de5\u5177\uff0c\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u5373\u53ef\u5b89\u88c5\u6700\u65b0\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"rust"),"\u7f16\u8bd1\u5668",(0,r.kt)("inlineCode",{parentName:"p"},"rustc"),"\u53ca\u5176\u5305\u7ba1\u7406\u5de5\u5177",(0,r.kt)("inlineCode",{parentName:"p"},"cargo")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"curl --proto '=https' --tlsv1.2 https://sh.rustup.rs -sSf | sh\nrustup update\n")),(0,r.kt)("h3",{id:"rustc\u7f16\u8bd1\u5668"},"rustc\uff08\u7f16\u8bd1\u5668\uff09"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"rustc --version \n\nrustc main.rs\n./main\n")),(0,r.kt)("h3",{id:"cargo\u5305\u7ba1\u7406"},"cargo\uff08\u5305\u7ba1\u7406\uff09"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u529f\u80fd\u7c7b\u4f3cNPM\uff0c\u5305\u62ec\u9879\u76ee\u7684\u521d\u59cb\u5316\u3001\u6a21\u5757\u7684\u5b89\u88c5\u4e0e\u7ba1\u7406\u3001\u4fbf\u6377\u7684\u811a\u672c\u547d\u4ee4")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"cargo --version \n\ncargo new projectName # \u521d\u59cb\u5316\u9879\u76ee\ncargo build # \u6784\u5efa/\u7f16\u8bd1\ncargo run # \u7f16\u8bd1\u540e\u7acb\u523b\u8fd0\u884c\ncargo check # \u7f16\u8bd1\u5e76\u8fdb\u884c\u4ee3\u7801\u68c0\u67e5\uff0c\u4f46\u4e0d\u751f\u6210\u4ea7\u7269\n")),(0,r.kt)("h3",{id:"cargotoml\u914d\u7f6e\u6587\u4ef6"},"Cargo.toml\uff08\u914d\u7f6e\u6587\u4ef6\uff09"),(0,r.kt)("p",null,"\u9879\u76ee\u914d\u7f6e\u6587\u4ef6\uff0c\u7c7b\u4f3c",(0,r.kt)("inlineCode",{parentName:"p"},"package.json")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-toml"},'[package]\nname = "guessing_game"\nversion = "0.1.0"\nedition = "2021"\n\n# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html\n[dependencies]\n')),(0,r.kt)("h2",{id:"\u57fa\u7840"},"\u57fa\u7840"),(0,r.kt)("h3",{id:"\u5e38\u91cf"},"\u5e38\u91cf"),(0,r.kt)("p",null,"\u901a\u8fc7",(0,r.kt)("inlineCode",{parentName:"p"},"const"),"\u5b9a\u4e49\u5e38\u91cf\u503c\u6216\u5e38\u91cf\u8868\u8fbe\u5f0f\uff0c\u4f46\u4e0d\u80fd\u4e3a\u8fd0\u884c\u65f6\u7684\u6c42\u503c\u7ed3\u679c"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"const HP: u32 = 100;\nconst PI: f32 = 3.14;\nconst N: u32 = 1 + 1;\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"// error[E0015]: cannot call non-const fn `test` in constants\nconst hp: u32 = test();\n\nfn test() -> u32 {\n    return 200\n}\n")),(0,r.kt)("h3",{id:"\u53d8\u91cf"},"\u53d8\u91cf"),(0,r.kt)("p",null,"\u901a\u8fc7",(0,r.kt)("inlineCode",{parentName:"p"},"let"),"\u58f0\u660e\u53d8\u91cf\u3002\u9ed8\u8ba4\u60c5\u51b5\u58f0\u660e\u4e0d\u53ef\u53d8\uff08immutable\uff09\u7684\u53d8\u91cf\uff0c\u901a\u8fc7",(0,r.kt)("inlineCode",{parentName:"p"},"let mut"),"\u58f0\u660e\u53ef\u53d8\uff08mutable\uff09\u53d8\u91cf\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"let mut mp: u32 = 100;\nmp = 200; // ok\n\nlet hp: u32 = 100;\nhp = 200; // error\n")),(0,r.kt)("h4",{id:"shadow"},"shadow"),(0,r.kt)("p",null,"\u5728\u540c\u4e00\u4e2a\u4f5c\u7528\u57df\u4e0b\u53ef\u4ee5\u591a\u6b21",(0,r.kt)("inlineCode",{parentName:"p"},"let"),"\u540c\u4e00\u4e2a\u53d8\u91cf\u540d\uff0c\u540e\u4e00\u6b21\u5c06\u4f1a",(0,r.kt)("inlineCode",{parentName:"p"},"shadow"),"\u524d\u4e00\u6b21\u7684\u58f0\u660e\u3002\u4e3e\u4e2aJavaScript\u7684\u4f8b\u5b50\u4e3a\u4ec0\u4e48\u6211\u4eec\u9700\u8981\u8fd9\u6837\u7684\u529f\u80fd\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"function main() {\n      const { data } = test()\n    const data2 = test2(data)\n    return {\n        data: data2\n    }\n}\n\n// \u671f\u671b\u7684\u5199\u6cd5\nfunction main() {\n   const { data } = test()\n    const data = test2(data)\n    return {\n        data // \u66f4\u7b80\u6d01\n    }\n}\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'let hp: u32 = 100;\nlet hp: f32 = 100.12;\nprintln!("{}", hp) // 100.12\n')),(0,r.kt)("h3",{id:"\u57fa\u672c\u6570\u636e\u7c7b\u578b"},"\u57fa\u672c\u6570\u636e\u7c7b\u578b"),(0,r.kt)("h4",{id:"\u6807\u91cf\u7c7b\u578bscalar"},"\u6807\u91cf\u7c7b\u578b\uff08scalar\uff09"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6574\u6570",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u7b26\u53f7\u6574\u6570\uff0c\u5982",(0,r.kt)("inlineCode",{parentName:"li"},"i32"),"\u3001",(0,r.kt)("inlineCode",{parentName:"li"},"i64")),(0,r.kt)("li",{parentName:"ul"},"\u65e0\u7b26\u53f7\u6574\u6570\uff0c\u5982",(0,r.kt)("inlineCode",{parentName:"li"},"u32"),"\u3001",(0,r.kt)("inlineCode",{parentName:"li"},"u64")))),(0,r.kt)("li",{parentName:"ul"},"\u6d6e\u70b9\u6570",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5982",(0,r.kt)("inlineCode",{parentName:"li"},"f32"),"\u3001",(0,r.kt)("inlineCode",{parentName:"li"},"f64")))),(0,r.kt)("li",{parentName:"ul"},"\u5e03\u5c14\u503c",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"let value: bool = true;")))),(0,r.kt)("li",{parentName:"ul"},"\u5b57\u7b26",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"let c: char = 'a';"))))),(0,r.kt)("h4",{id:"\u590d\u5408\u7c7b\u578bcompound"},"\u590d\u5408\u7c7b\u578b\uff08compound\uff09"),(0,r.kt)("p",null,"\u6807\u91cf\u7c7b\u578b\u53ea\u80fd\u5305\u542b\u4e00\u4e2a\u503c\uff1b\u800c\u590d\u5408\u7c7b\u578b\u53ef\u4ee5\u5305\u542b\u591a\u4e2a\u503c\u3002"),(0,r.kt)("h5",{id:"\u5143\u7ec4"},"\u5143\u7ec4"),(0,r.kt)("p",null,"\u6bcf\u4e00\u9879\u7684\u7c7b\u578b\u53ef\u4ee5\u4e0d\u540c\uff0c\u957f\u5ea6\u56fa\u5b9a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"fn main() {\n  let tup: (i32, f64, u8) = (500, 6.4, 1);\n  let a = tup.0;\n  let b = tup.1;\n  let c = tup.2;\n  let (x, y, z) = tup;\n}\n\n")),(0,r.kt)("h5",{id:"\u6570\u7ec4"},"\u6570\u7ec4"),(0,r.kt)("p",null,"\u6bcf\u4e00\u9879\u7684\u7c7b\u578b\u5fc5\u987b\u76f8\u540c\uff0c\u957f\u5ea6\u540c\u6837\u56fa\u5b9a\uff08\u8fd9\u4e00\u70b9\u548cJavaScript\u4e0d\u540c\uff09"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"fn main() {\n    let q = [1, 2, 3, 4, 5];\n    let w: [i32; 5] = [1, 2, 3, 4, 5];\n    let e = [3; 5]; // [3, 3, 3, 3, 3]\n    let x = q[0];\n    let y = q[1];\n}\n")),(0,r.kt)("h3",{id:"\u51fd\u6570"},"\u51fd\u6570"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"fn main() {\n    let value = test();\n}\n\nfn test() -> i32 {\n    return 200\n}\n")),(0,r.kt)("h3",{id:"\u8bed\u53e5\u548c\u8868\u8fbe\u5f0f"},"\u8bed\u53e5\u548c\u8868\u8fbe\u5f0f"),(0,r.kt)("h4",{id:"\u8bed\u53e5statement"},"\u8bed\u53e5\uff08statement\uff09"),(0,r.kt)("p",null,"\u8bed\u53e5\u4e0d\u5305\u542b\u6c42\u503c\u64cd\u4f5c\uff0c\u5b83\u662f\u4e00\u4e2a\u72ec\u7acb\u7684\u5355\u5143\u3002"),(0,r.kt)("h4",{id:"\u8868\u8fbe\u5f0fexpression"},"\u8868\u8fbe\u5f0f\uff08expression\uff09"),(0,r.kt)("p",null,"\u8868\u8fbe\u5f0f\u6c42\u503c\u7684\u7ed3\u679c\u5c06\u8fd4\u56de\u7ed9\u4e0a\u5c42\u7684AST\u8282\u70b9\u53bb\u4f7f\u7528\u3002\u5bf9\u4e8e",(0,r.kt)("inlineCode",{parentName:"p"},"x + 1"),"\uff0c\u5982\u679c\u6211\u4eec\u7ed9\u5b83\u52a0\u4e0a\u5206\u53f7\uff0c\u5b83\u4f1a\u88ab\u89c6\u4e3a\u72ec\u7acb\u7684\u8bed\u53e5\uff1b\u5982\u679c\u6211\u4eec\u4e0d\u7ed9\u4ed6\u52a0\u4e0a\u5206\u53f7\uff0c\u5b83\u5c31\u4f1a\u88ab\u89c6\u4e3a\u8868\u8fbe\u5f0f\u3002"),(0,r.kt)("p",null,"\u9664\u4e86\u5e38\u89c1\u7684\u5404\u79cd\u8868\u8fbe\u5f0f\uff08\u5982",(0,r.kt)("inlineCode",{parentName:"p"},"1 + 1"),"\u3001\u51fd\u6570\u8c03\u7528\u7b49\uff09\uff0c\u5728Rust\u4e2d",(0,r.kt)("inlineCode",{parentName:"p"},"if"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"loop"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"match"),"\uff08\u7c7b\u4f3c",(0,r.kt)("inlineCode",{parentName:"p"},"switch"),"\uff09\u4e5f\u662f\u8868\u8fbe\u5f0f\uff0c\u751a\u81f3\u5757\u7ea7\u4f5c\u7528\u57df\u4e5f\u662f\u8868\u8fbe\u5f0f\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'let value = {\n    let x = 1;\n    x + 1\n};\nprintln!("{:?}", value) // 2\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'let value = {};\nprintln!("{:?}", value) // ()\n')),(0,r.kt)("h3",{id:"\u63a7\u5236\u6d41"},"\u63a7\u5236\u6d41"),(0,r.kt)("h4",{id:"if-expression"},"if expression"),(0,r.kt)("p",null,"Rust\u4e0d\u4f1a\u81ea\u52a8\u628a\u76ee\u6807\u503c\u8f6c\u5316\u4e3a\u5bf9\u5e94\u7684\u5e03\u5c14\u503c"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"if 2 > 1 { // \u6ca1\u6709\u5c0f\u62ec\u53f7\n\n} else if 3 > 2 {\n\n} else {\n\n}\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'let condition = true;\nlet number = if condition { 5 } else { 6 };\n\nprintln!("The value of number is: {number}");\n')),(0,r.kt)("h4",{id:"loop-expression"},"loop expression"),(0,r.kt)("p",null,"\u901a\u8fc7",(0,r.kt)("inlineCode",{parentName:"p"},"loop"),"\u5173\u952e\u5b57\u5faa\u73af\u6267\u884c\u67d0\u4e9b\u64cd\u4f5c\uff0c\u901a\u8fc7",(0,r.kt)("inlineCode",{parentName:"p"},"break"),"\u9000\u51fa\u5f53\u524d\u5faa\u73af\uff0c\u540c\u65f6",(0,r.kt)("inlineCode",{parentName:"p"},"break"),"\u7684\u503c\u4f1a\u4f5c\u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"loop"),"\u8868\u8fbe\u5f0f\u7684\u6c42\u503c\u7ed3\u679c\u8fdb\u884c\u8fd4\u56de\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'fn main() {\n    let mut counter = 0;\n\n    let result = loop {\n        counter += 1;\n\n        if counter == 10 {\n            break counter * 2;\n        }\n    };\n\n    println!("The result is {result}"); // 20\n}\n')),(0,r.kt)("h5",{id:"loop-label"},"loop label"),(0,r.kt)("p",null,"\u901a\u8fc7\u7ed9",(0,r.kt)("inlineCode",{parentName:"p"},"loop"),"\u4e00\u4e2a\u6307\u5b9a\u7684\u540d\u79f0\uff0c\u5728\u591a\u4e2a",(0,r.kt)("inlineCode",{parentName:"p"},"loop"),"\u8868\u8fbe\u5f0f\u5d4c\u5957\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u53ef\u4ee5",(0,r.kt)("inlineCode",{parentName:"p"},"break"),"\u67d0\u4e2a\u5177\u540d\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"loop")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"fn main() {\n  'test: loop {\n    loop {\n      break 'test;\n    }\n  }\n}\n")),(0,r.kt)("h4",{id:"while"},"while"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"fn main() {\n  while true {\n    // do somethign\n  }\n}\n")),(0,r.kt)("h4",{id:"forin"},"for...in"),(0,r.kt)("p",null,"\u4e0eJavaScript\u4e2d\u7528\u6765\u8fed\u4ee3\u5bf9\u8c61\u7684key\u503c\u96c6\u5408\u4e0d\u540c\uff0cRust\u4e2d",(0,r.kt)("inlineCode",{parentName:"p"},"for...in"),"\u76f4\u63a5\u7528\u6765\u8fed\u4ee3\u96c6\u5408"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'fn main() {\n    let a = [10, 20, 30, 40, 50];\n\n    for element in a {\n        println!("the value is: {element}");\n    }\n}\n\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'fn main() {\n    for number in (1..4).rev() { // (1..4)\u4e3aRange\uff0c\u5de6\u95ed\u53f3\u5f00\u533a\u95f4\n        println!("{number}!");\n    }\n    println!("LIFTOFF!!!");\n}\n')),(0,r.kt)("h3",{id:"\u6240\u6709\u6743ownership"},"\u6240\u6709\u6743\uff08Ownership\uff09"),(0,r.kt)("blockquote",null,(0,r.kt)("ul",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ul"},"Each value in Rust has an ",(0,r.kt)("em",{parentName:"li"},"owner"),"."),(0,r.kt)("li",{parentName:"ul"},"There can only be one owner at a time."),(0,r.kt)("li",{parentName:"ul"},"When the owner goes out of scope, the value will be dropped."))),(0,r.kt)("p",null,"Rust\u4e2d\u6709\u4e00\u4e2a\u72ec\u7279\u7684\u6982\u5ff5\u53eb\u505a",(0,r.kt)("strong",{parentName:"p"},"\u6240\u6709\u6743"),"\u3002\u5bf9\u4e8e\u50cfC\u3001C++\u8fd9\u7c7b\u7684\u4f20\u7edf\u8bed\u8a00\uff0c\u6211\u4eec\u9700\u8981\u5728\u8fd0\u884c\u65f6\u624b\u52a8\u8fdb\u884c\u5185\u5b58\u7684\u5206\u914d\u4e0e\u91ca\u653e\uff0c\u8fd9\u4f1a\u589e\u5927\u6211\u4eec\u7684\u5fc3\u667a\u8d1f\u62c5\uff1b\u56e0\u6b64\u66f4\u591a\u7684\u8bed\u8a00\uff08\u5982Go\u3001Java\u3001JavaScript\uff09\uff0c\u90fd\u662f\u901a\u8fc7\u5783\u573e\u6536\u96c6\uff08GC\uff09\u5b9e\u73b0\u5bf9\u65e0\u7528\u7684\u5185\u5b58\u8fdb\u884c\u81ea\u52a8\u7684\u56de\u6536\uff0c\u4e00\u79cd\u5e38\u89c1\u7684\u505a\u6cd5\u662f\u201c\u5f15\u7528\u8ba1\u6570\u201d\uff0c\u6211\u4eec\u4f1a\u6536\u96c6\u5185\u5b58\u88ab\u5f15\u7528\u7684\u60c5\u51b5\uff0c\u5f53\u4e00\u5757\u5185\u5b58\u4e0d\u518d\u88ab\u4efb\u4f55\u6307\u9488\u6307\u5411\uff0c\u6211\u4eec\u5c31\u4f1a\u81ea\u52a8\u91ca\u653e\u8fd9\u5757\u5185\u5b58\u7a7a\u95f4\u3002GC\u53ef\u4ee5\u964d\u4f4e\u6211\u4eec\u7684\u5fc3\u667a\u8d1f\u62c5\uff0c\u4f46\u540c\u65f6\u4e5f\u4f1a\u964d\u4f4e\u8fd0\u884c\u6548\u7387\u3002\u800cRust\u5f15\u5165\u7684\u6240\u6709\u6743\u6982\u5ff5\uff0c\u5c31\u662f\u4e13\u95e8\u7528\u6765\u7ba1\u7406\u5185\u5b58\u56de\u6536\u7684\u3002"),(0,r.kt)("p",null,"\u5bf9\u4e8e\u4e00\u5757\u5185\u5b58\uff0c\u53ef\u80fd\u5b58\u5728\u591a\u4e2a\u53d8\u91cf\u540c\u65f6\u6307\u5411\uff0c\u56e0\u6b64\u6211\u4eec\u5f88\u96be\u77e5\u9053\u4ec0\u4e48\u65f6\u5019\u624d\u53bb\u91ca\u653e\u8fd9\u5757\u5185\u5b58\u3002\u800c\u6240\u6709\u6743\u8868\u793a\u7740\u8fd9\u5757\u5185\u5b58\u53ea\u80fd\u88ab\u4e00\u4e2a\u53d8\u91cf\u6240\u6709\uff0c\u6b64\u65f6\u5176\u4ed6\u7684\u53d8\u91cf\u90fd\u65e0\u6cd5\u8bbf\u95ee\u8fd9\u5757\u5185\u5b58\uff0c\u56e0\u6b64\u5f53\u8be5\u53d8\u91cf\u79bb\u5f00\u4f5c\u7528\u57df\u7684\u65f6\u5019\u6211\u4eec\u53ef\u4ee5\u65e0\u8d1f\u62c5\u7684\u91ca\u653e\u6389\u8fd9\u5757\u5185\u5b58\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'fn test() {\n  let A = String::from("hello");\n    let B = A;\n\n    A.as_bytes(); // error\n}\n\ntest();\n')),(0,r.kt)("p",null,"\u5bf9\u4e8e\u4e0a\u65b9\u4ee3\u7801\uff0c\u6211\u4eec\u901a\u8fc7",(0,r.kt)("inlineCode",{parentName:"p"},'String::from("hello")'),"\u5206\u914d\u4e86\u4e00\u5757\u5806\u5185\u5b58\uff0c\u53d8\u91cfA\u7684\u6307\u9488\u6307\u5411\u7740\u8fd9\u5757\u5806\u5185\u5b58\uff0c\u6b64\u65f6\u53d8\u91cfA\u62e5\u6709\u8fd9\u5757\u5806\u5185\u5b58\u7684\u6240\u6709\u6743\u3002\u5f53\u6211\u4eec\u6267\u884c",(0,r.kt)("inlineCode",{parentName:"p"},"let B = A"),"\u7684\u65f6\u5019\uff0c\u4f1a\u628a\u53d8\u91cfA\u7684\u6307\u9488\u8d4b\u503c\u7ed9\u53d8\u91cfB\uff0c\u90a3\u4e48\u6b64\u65f6\u53d8\u91cfA\u548c\u53d8\u91cfB\u90fd\u6307\u5411\u7740\u8fd9\u5757\u5806\u5185\u5b58\uff0c\u4f46\u8fd9\u5757\u5185\u5b58\u7684\u6240\u6709\u6743\u4e5f\u540c\u65f6\u4ece\u53d8\u91cfA\u8f6c\u79fb\u5230\u53d8\u91cfB\u8eab\u4e0a\u4e86\uff0c\u56e0\u6b64\u867d\u7136\u53d8\u91cfA\u7684\u6307\u9488\u662f\u6307\u5411\u7740\u8fd9\u5757\u5806\u5185\u5b58\u7684\uff0c\u4f46\u5b83\u5df2\u7ecf\u65e0\u6743\u8bbf\u95ee\u8fd9\u5757\u5806\u5185\u5b58\u4e86\uff0c\u5177\u4f53\u7684\u8868\u73b0\u662f\u6211\u4eec\u4e0d\u518d\u80fd\u8c03\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"A.as_bytes()"),"\u8fd9\u79cd\u65b9\u6cd5\u4e86\u3002\u800c\u5f53\u51fd\u6570\u8c03\u7528\u5b8c\u6210\u540e\uff0c\u53d8\u91cfA\u5c31\u79bb\u5f00\u4f5c\u7528\u57df\u4e86\uff0c\u6b64\u65f6\u6211\u4eec\u4f1a\u81ea\u52a8\u91ca\u653e\u53d8\u91cfA\u6240\u6307\u5411\u7684\u5806\u5185\u5b58\u3002"),(0,r.kt)("h4",{id:"\u6240\u6709\u6743\u8f6c\u79fbmove"},"\u6240\u6709\u6743\u8f6c\u79fb\uff08move\uff09"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'fn main() {\n    let A = String::from("hello");\n\n    let B = test(A);\n    B.as_bytes();\n}\n\nfn test(C: String) -> String {\n    println!("{:?}", C.as_bytes());\n    C\n}\n')),(0,r.kt)("p",null,"\u6240\u6709\u6743\u7684\u8f6c\u79fb\u4e0d\u4ec5\u53d1\u751f\u5728\u8d4b\u503c\u64cd\u4f5c\u4e2d\uff0c\u51fd\u6570\u7684\u4f20\u53c2\u3001\u8fd4\u56de\u503c\uff0c\u90fd\u4f1a\u53d1\u751f\u6240\u6709\u6743\u7684\u8f6c\u79fb\u3002"),(0,r.kt)("p",null,"\u5bf9\u4e8e\u4ee5\u4e0a\u4ee3\u7801\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"main"),"\u51fd\u6570\u4e2d\u53d8\u91cfA\u6307\u5411\u7740\u4e00\u5757\u5806\u5185\u5b58\uff0c\u8c03\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"test"),"\u51fd\u6570\u7684\u65f6\u5019\u6240\u6709\u6743\u4ece\u53d8\u91cfA\u8f6c\u79fb\u5230\u51fd\u6570\u5185\u90e8\u7684\u53c2\u6570C\u8eab\u4e0a\uff0c\u4e3a\u4e86\u80fd\u5728\u540e\u7eed\u7ee7\u7eed\u4f7f\u7528\u8fd9\u5757\u5185\u5b58\u6211\u4eec\u53c8\u9700\u8981\u4ece",(0,r.kt)("inlineCode",{parentName:"p"},"test"),"\u51fd\u6570\u4ece\u628aC\u8fd4\u56de\u51fa\u6765\uff0c\u4ece\u800c\u5b9e\u73b0\u628a\u6240\u6709\u6743\u4ece\u53c2\u6570C\u8f6c\u79fb\u5230\u53d8\u91cfB\u8eab\u4e0a\u3002"),(0,r.kt)("p",null,"\u53ef\u4ee5\u770b\u51fa\u867d\u7136\u6240\u6709\u6743\u5f88\u5927\u7a0b\u5ea6\u89e3\u51b3\u4e86\u5185\u5b58\u91ca\u653e\u7684\u95ee\u9898\uff0c\u4f46\u4f7f\u7528\u8d77\u6765\u5374\u5f88\u9ebb\u70e6\uff0cRust\u5f15\u5165\u4e86",(0,r.kt)("strong",{parentName:"p"},"\u5f15\u7528"),"\u7684\u6982\u5ff5\u6765\u5904\u7406\u8fd9\u6837\u7684\u95ee\u9898\u3002"),(0,r.kt)("h4",{id:"\u5f15\u7528borrow"},"\u5f15\u7528\uff08borrow\uff09"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'let A: String = String::from("hello");\nlet B: &String = &A;\n')),(0,r.kt)("p",null,"\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u901a\u8fc7",(0,r.kt)("inlineCode",{parentName:"p"},"&A"),"\u521b\u5efa\u4e86\u4e00\u4e2a\u5f15\u7528B\uff0cB\u901a\u8fc7\u5730\u5740\u6307\u5411A\uff0c\u800cA\u53c8\u901a\u8fc7\u6307\u9488\u6307\u5411\u5806\u5185\u5b58\u3002A\u62e5\u6709\u8fd9\u5757\u5806\u5185\u5b58\u7684\u6240\u6709\u6743\uff0c\u800cB\u5219\u901a\u8fc7A\u6765\u95f4\u63a5\u8bfb/\u5199\u8fd9\u5757\u5185\u5b58\uff0c\u56e0\u6b64\u4e5f\u88ab\u79f0\u4e3a\u501f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"borrow"),"\u3002"),(0,r.kt)("p",null,"Rust\u4e2d\u6307\u9488\u548c\u5f15\u7528\u7684\u533a\u522b\u5728\u4e8e\uff0c\u6307\u9488\u901a\u5e38\u9664\u4e86\u5730\u5740",(0,r.kt)("inlineCode",{parentName:"p"},"ptr"),"\u5916\uff0c\u8fd8\u4f1a\u4fdd\u5b58",(0,r.kt)("inlineCode",{parentName:"p"},"len"),"\u548c",(0,r.kt)("inlineCode",{parentName:"p"},"capacity"),"\uff0c\u5373\u6307\u9488\u662f\u62e5\u6709\u6240\u6307\u5411\u5185\u5b58\u7684\u6240\u6709\u6743\u7684\uff1b\u800c\u4e00\u822c\u5f15\u7528\u53ea\u4f1a\u4fdd\u5b58\u5730\u5740",(0,r.kt)("inlineCode",{parentName:"p"},"ptr"),"\uff0c\u4e00\u79cd\u7279\u522b\u7684\u5f15\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"Slice"),"\u9664\u4e86\u4fdd\u5b58\u5730\u5740\u5916\u8fd8\u4f1a\u4fdd\u5b58",(0,r.kt)("inlineCode",{parentName:"p"},"len"),"\uff0c\u4f46\u65e0\u8bba\u5982\u4f55\u5f15\u7528\u90fd\u4e0d\u4f1a\u4fdd\u5b58",(0,r.kt)("inlineCode",{parentName:"p"},"capacity"),"\uff0c\u56e0\u6b64\u4e0d\u62e5\u6709\u4efb\u4f55\u7684\u6240\u6709\u6743\u3002"),(0,r.kt)("h4",{id:"\u751f\u547d\u5468\u671f"},"\u751f\u547d\u5468\u671f"),(0,r.kt)("p",null,"\u5f15\u7528\u7684\u751f\u547d\u5468\u671f\uff0c\u6307\u7684\u662f\u4ece\u8be5\u5f15\u7528\u88ab\u521b\u5efa\uff08\u6216\u8005\u53eb",(0,r.kt)("inlineCode",{parentName:"p"},"borrow"),"\uff09\u5230\u6700\u540e\u4e00\u6b21\u7528\u5230\u7684\u8fd9\u6bb5\u533a\u95f4\u3002"),(0,r.kt)("p",null,"\u901a\u8fc7\u5f15\u5165\u6240\u6709\u6743\u548c\u5f15\u7528\u7684\u6982\u5ff5\uff0cRust\u4e2d\u5b9e\u9645\u4e0a\u4f1a\u5b58\u5728\u591a\u4e2a\u5730\u5740\u6307\u5411\u540c\u4e00\u5757\u5185\u5b58\uff0c\u53ea\u4e0d\u8fc7\u53ea\u6709\u4e00\u4e2a\u5730\u5740\uff08\u5373\u6307\u9488\uff09\u62e5\u6709\u8fd9\u5757\u5185\u5b58\u7684\u6240\u6709\u6743\uff0c\u5f53\u8be5\u6307\u9488\u79bb\u5f00\u4f5c\u7528\u57df\u65f6\u4f1a\u81ea\u52a8\u91ca\u653e\u5bf9\u5e94\u7684\u5185\u5b58\u3002\u6240\u4ee5\u5728\u7f16\u8bd1\u65f6Rust\u7f16\u8bd1\u5668\u4f1a\u901a\u8fc7Borrow Checker\u6765\u5bf9\u6240\u6709\u5f15\u7528\u7684\u751f\u547d\u5468\u671f\u8fdb\u884c\u68c0\u67e5\uff0cBorrow Checker\u6709\u51e0\u6761\u89c4\u5219\uff0c\u5176\u4e2d\u4e00\u6761\u6700\u663e\u800c\u6613\u89c1\u7684\u5c31\u662f\u5f15\u7528\u7684\u751f\u547d\u5468\u671f\u5e94\u8be5\u5728\u5bf9\u5e94\u6307\u9488\u7684\u751f\u547d\u5468\u671f\u8303\u56f4\u5185\u3002"),(0,r.kt)("p",null,"\u6bd4\u5982\u4ee5\u4e0b\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u6307\u9488",(0,r.kt)("inlineCode",{parentName:"p"},"s"),"\uff0c\u540c\u65f6\u521b\u5efa\u4e86\u4e00\u4e2a",(0,r.kt)("inlineCode",{parentName:"p"},"s"),"\u7684\u5f15\u7528\u8d4b\u503c\u7ed9",(0,r.kt)("inlineCode",{parentName:"p"},"r"),"\uff0c\u5f53\u5757\u7ea7\u4f5c\u7528\u57df\u7ed3\u675f\u65f6",(0,r.kt)("inlineCode",{parentName:"p"},"s"),"\u53d8\u91cf\u91ca\u653e\uff0c\u6211\u4eec\u4e0d\u80fd\u518d\u901a\u8fc7",(0,r.kt)("inlineCode",{parentName:"p"},"r"),"\u53bb\u83b7\u53d6\u8be5\u5185\u5b58\uff0c\u8fd9\u7c7b\u95ee\u9898\u4f1a\u5728\u7f16\u8bd1\u65f6\u5c31\u63d0\u524d\u66b4\u9732\u51fa\u6765\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'fn main() {\n    let r;\n    {\n        let s = String::from("hello");\n        r = &s; // \u62a5\u9519\n    }\n    r.as_bytes();\n}\n')),(0,r.kt)("h4",{id:"generic-lifetimes-parameter"},"Generic Lifetimes Parameter"),(0,r.kt)("p",null,"Rust\u4e2d\u7684\u6cdb\u578b\u9664\u4e86\u5e38\u89c1\u7684\u7c7b\u578b\u53c2\u6570\uff08",(0,r.kt)("inlineCode",{parentName:"p"},"type parameter"),"\uff0c\u5982",(0,r.kt)("inlineCode",{parentName:"p"},"T"),"\uff09\u8fd8\u652f\u6301\u4e00\u4e2a\u7279\u6b8a\u7684\u53c2\u6570\uff0c\u53eb\u505a\u751f\u547d\u5468\u671f\u53c2\u6570\uff08",(0,r.kt)("inlineCode",{parentName:"p"},"lifetimes parameter"),"\uff0c\u5982",(0,r.kt)("inlineCode",{parentName:"p"},"'a"),"\uff09\u3002\u7c7b\u578b\u53c2\u6570",(0,r.kt)("inlineCode",{parentName:"p"},"T"),"\u7528\u6765\u5b9e\u73b0\u591a\u4e2a\u53c2\u6570\u548c\u8fd4\u56de\u503c\u7684\u7c7b\u578b\u7684\u663e\u5f0f\u5173\u8054\uff0c\u5bf9\u5e94\u7684\u751f\u547d\u5468\u671f\u53c2\u6570",(0,r.kt)("inlineCode",{parentName:"p"},"'a"),"\u7528\u6765\u5b9e\u73b0\u591a\u4e2a\u53c2\u6570\u548c\u8fd4\u56de\u503c\u7684\u751f\u547d\u5468\u671f\u7684\u663e\u5f0f\u5173\u8054\u3002"),(0,r.kt)("p",null,"\u6211\u4eec\u4e4b\u524d\u63d0\u5230\u8fc7\u5728\u7f16\u8bd1\u65f6Rust\u9700\u8981\u901a\u8fc7Borrow Checker\u6765\u68c0\u67e5\u6240\u6709\u5f15\u7528\u7684\u751f\u547d\u5468\u671f\u662f\u5426\u90fd\u662f\u6709\u6548\u7684\uff0c\u4ee5\u4e0b\u65b9\u7684\u4ee3\u7801\u4e3e\u4f8b\uff0c\u51fd\u6570",(0,r.kt)("inlineCode",{parentName:"p"},"longest"),"\u63a5\u6536\u4e24\u4e2a\u5f15\u7528\u4f5c\u4e3a\u53c2\u6570\uff0c\u5e76\u4f1a\u5c06\u5176\u4e2d\u7684\u4e00\u4e2a\u5f15\u7528\u4f5c\u4e3a\u51fd\u6570\u8fd4\u56de\u503c\u3002\u5728\u4f7f\u7528\u8be5\u51fd\u6570\u7684\u65f6\u5019\uff0c\u6211\u4eec\u65e0\u6cd5\u786e\u5b9a\u786e\u5b9a",(0,r.kt)("inlineCode",{parentName:"p"},"longest"),"\u8fd4\u56de\u503c\u7684\u751f\u547d\u5468\u671f\uff0c\u56e0\u6b64\u65e0\u6cd5\u901a\u8fc7Borrow Checker\u7684\u68c0\u67e5\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u5728\u5b9a\u4e49",(0,r.kt)("inlineCode",{parentName:"p"},"longest"),"\u51fd\u6570\u7684\u65f6\u5019\u6211\u4eec\u9700\u8981\u901a\u8fc7",(0,r.kt)("inlineCode",{parentName:"p"},"lifetimes parameter"),"\u663e\u5f0f\u7684\u5efa\u7acb\u53c2\u6570\u548c\u8fd4\u56de\u503c\u7684\u751f\u547d\u5468\u671f\u7684\u8054\u7cfb\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'fn main() {\n    let string1 = String::from("abcd");\n    let string2 = "xyz";\n\n    let result = longest(string1.as_str(), string2);\n    println!("The longest string is {}", result);\n}\n\nfn longest(x: &str, y: &str) -> &str { // \u62a5\u9519\n    if x.len() > y.len() {\n        x\n    } else {\n        y\n    }\n}\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"fn longest<'a>(x: &'a str, y: &'a str) -> &'a str { // \u6b63\u786e\n    if x.len() > y.len() {\n        x\n    } else {\n        y\n    }\n}\n")),(0,r.kt)("h4",{id:"static-lifetimes"},"Static Lifetimes"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'let s: &str = "hello world"\n')),(0,r.kt)("p",null,"\u6240\u6709\u7684\u5b57\u7b26\u4e32\u5b57\u9762\u91cf\u90fd\u662f\u76f4\u63a5\u5b58\u50a8\u5728\u7a0b\u5e8f\u7684\u4e8c\u8fdb\u5236\u5f53\u4e2d\uff0c\u5728\u6574\u4e2a\u7a0b\u5e8f\u7684\u4efb\u4f55\u65f6\u5019\u90fd\u662f\u53ef\u7528\u7684\uff0c\u56e0\u6b64\u5b83\u4eec\u7684\u5f15\u7528\u7684\u751f\u547d\u5468\u671f\u88ab\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"'static"),"\u6807\u8bc6\uff0c\u8868\u793a\u8fd9\u4e2a\u5f15\u7528\u53ef\u4ee5\u5728\u6574\u4e2a\u7a0b\u5e8f\u7684\u5468\u671f\u4e2d\u5b58\u5728\u3002"),(0,r.kt)("h3",{id:"\u7ed3\u6784\u4f53struct"},"\u7ed3\u6784\u4f53\uff08Struct\uff09"),(0,r.kt)("h4",{id:"impl"},"impl"),(0,r.kt)("p",null,"\u901a\u8fc7",(0,r.kt)("inlineCode",{parentName:"p"},"impl"),"\u5173\u952e\u5b57\u5b9e\u73b0\u7ed3\u6784\u4f53\u7684\u65b9\u6cd5\uff08\u7c7b\u4f3c\u539f\u578b\u65b9\u6cd5\uff09\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e0d\u662f\u5b9e\u4f8b",(0,r.kt)("inlineCode",{parentName:"p"},"self"),"\u7684\u65b9\u6cd5\u88ab\u79f0\u4f5c\u5173\u8054\u51fd\u6570",(0,r.kt)("inlineCode",{parentName:"p"},"associted function"),"\uff08\u7c7b\u4f3c\u9759\u6001\u65b9\u6cd5\uff09"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'struct People {\n    name: String,\n    age: u32,\n    male: bool,\n}\n\nimpl People {\n    fn is_male(&self) -> bool {\n        self.male\n    }\n\n    fn is_young(&self) -> bool {\n        self.age < 20\n    }\n\n    fn new(name: String, age: u32, male: bool) -> People {\n        People {\n            name,\n            age,\n            male,\n        }\n    }\n}\n\nfn main() {\n   let p = People::new(String::from("akara"), 20, true);\n\n   let is_male = p.is_male();\n   let is_young = p.is_young();\n\n   println!("{}, {}, {}", p.name, is_male, is_young);\n}\n')),(0,r.kt)("h4",{id:"struct-update-syntax"},"struct update syntax"),(0,r.kt)("p",null,"\u7c7b\u4f3c\u6269\u5c55\u8fd0\u7b97\u7b26",(0,r.kt)("inlineCode",{parentName:"p"},"spread syntax"),"\uff0cRust\u901a\u8fc7",(0,r.kt)("inlineCode",{parentName:"p"},".."),"\u6765\u6839\u636e\u4e00\u4e2a\u7ed3\u6784\u4f53\u751f\u6210\u4e00\u4e2a\u65b0\u7684\u7ed3\u6784\u4f53"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'let p3 = People {\n    age: 30,\n    ..p2 // \u4e24\u4e2a\u70b9\n};\nprintln!("{}, {}", p1.is_male(), p3.age)\n')),(0,r.kt)("h4",{id:"tuple-struct"},"tuple struct"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"struct Point(i32, i32, i32);\n\nlet p = Point(1, 1, 0);\nlet People(x, y, z) = p;\nlet a = p.0;\n")),(0,r.kt)("h4",{id:"unit-like-struct"},"unit-like struct"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"struct Point;\n\nlet p = Point;\n")),(0,r.kt)("h3",{id:"enum"},"Enum"),(0,r.kt)("p",null,"\u5728Rust\u4e2d\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"enum"),"\u5b9a\u4e49\u679a\u4e3e\uff0c\u5176\u5b9e\u7b49\u4ef7\u4e8e\u5b9a\u4e49\u4e86\u4e00\u7ec4\u7c7b\u578b\u76f8\u540c\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"struct"),"\u3002\u5982\u4e0b\u65b9\u6211\u4eec\u901a\u8fc7",(0,r.kt)("inlineCode",{parentName:"p"},"enum Days"),"\u5b9a\u4e49\u4e86\u56db\u4e2a\u679a\u4e3e\u7684\u53d8\u4f53",(0,r.kt)("inlineCode",{parentName:"p"},"variants"),"\uff0c\u8fd9\u56db\u4e2a\u53d8\u4f53\u5176\u5b9e\u5206\u522b\u662f",(0,r.kt)("inlineCode",{parentName:"p"},"unit-like struct"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"tuple struct"),"\u4ee5\u53ca\u666e\u901a\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"struct"),"\uff0c\u5b83\u4eec\u7684\u7c7b\u578b\u90fd\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"Days"),"\u8868\u793a\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'enum Days {\n    One,\n    Two(u32),\n    Three(bool, bool),\n    Four {\n        x: i32,\n        y: i32,\n    }\n}\n\nfn main() {\n    let num = test(Days::Two(20));\n    println!("{}", num);\n}\n\n\nfn test(e: Days) -> u32 {\n    match e {\n        Days::One => (),\n        Days::Two(num) => {\n            num\n        },\n        Days::Three(a, b) => (),\n        Days::Four { x, y } => (),\n        _ => (),\n    }\n}\n')),(0,r.kt)("h4",{id:"optiont"},(0,r.kt)("inlineCode",{parentName:"h4"},"Option<T>")),(0,r.kt)("p",null,"Rust\u4e2d\u4e0d\u5b58\u5728\u7a7a\u503c\u7684\u6982\u5ff5\uff0c\u4e00\u822c\u901a\u8fc7\u5185\u7f6e\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"Option<T>"),"\u6a21\u62df\u53ef\u80fd\u4e3a\u7a7a\u503c\u7684\u60c5\u51b5"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"enum Option<T> {\n    None,\n    Some(T),\n}\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'fn main() {\n    let a = test(Option::Some(20));\n    println!("{}", a)\n}\n\nfn test(o: Option<u32>) -> u32 {\n    match o {\n        None => 0,\n        Some(value) => {\n            value\n        }\n    }\n}\n')),(0,r.kt)("h4",{id:"match-expression"},"match expression"),(0,r.kt)("p",null,"Rust\u4e2d\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"match"),"\u8868\u8fbe\u5f0f\u7c7b\u4f3c\u4e00\u822c\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"switch"),"\u4f46\u529f\u80fd\u66f4\u52a0\u5f3a\u5927\uff0c\u56e0\u4e3a\u5b83\u652f\u6301\u6a21\u5f0f\u5339\u914d",(0,r.kt)("inlineCode",{parentName:"p"},"pattern match "),"\uff0c\u6a21\u5f0f\u53ef\u4ee5\u662f\u5b57\u9762\u91cf\u7684\u503c\u3001\u53d8\u91cf\u540d\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"wildcards"),"\u3001\u4ee5\u53ca\u5176\u4ed6\u7684\u4e1c\u897f\u3002"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"match"),"\u7ecf\u5e38\u88ab\u7528\u6765\u5bf9\u679a\u4e3e\u8fdb\u884c\u6a21\u5f0f\u5339\u914d\uff0c\u5e76\u80fd\u591f\u83b7\u53d6\u5230\u5bf9\u5e94\u7684\u679a\u4e3e\u5185\u90e8\u503c\u3002"),(0,r.kt)("h4",{id:"if-let"},"If let"),(0,r.kt)("p",null,"Rust\u8fd8\u63d0\u4f9b\u4e86",(0,r.kt)("inlineCode",{parentName:"p"},"match"),"\u7684\u8bed\u6cd5\u7cd6\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"if let"),"\u53ef\u4ee5\u8ba9\u6211\u4eec\u5feb\u901f\u5339\u914d\u67d0\u4e2a\u6a21\u5f0f\u5e76\u63d0\u53d6\u503c"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'\nfn main() {\n    let a = test(Option::Some(20));\n    let b = test(Option::None);\n    println!("{}, {}", a, b)\n}\n\n\nfn test(o: Option<u32>) -> u32 {\n    if let Some(value) = o { // \u5355\u7b49\u53f7\n        value\n    } else {\n        0\n    }\n}\n')),(0,r.kt)("h3",{id:"\u6a21\u5f0f\u5339\u914dpattern-match"},"\u6a21\u5f0f\u5339\u914d\uff08pattern match\uff09"),(0,r.kt)("p",null,"\u6a21\u5f0f\uff08",(0,r.kt)("inlineCode",{parentName:"p"},"pattern"),"\uff09\u901a\u5e38\u7531\u4ee5\u4e0b\u5185\u5bb9\u7ec4\u6210\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5b57\u9762\u91cf\uff0c\u5982",(0,r.kt)("inlineCode",{parentName:"li"},"1")),(0,r.kt)("li",{parentName:"ul"},"\u53d8\u91cf\uff0c\u5982",(0,r.kt)("inlineCode",{parentName:"li"},"x")),(0,r.kt)("li",{parentName:"ul"},"\u89e3\u6784\u6570\u7ec4\u3001\u5143\u7956\u3001\u7ed3\u6784\u4f53\u3001\u679a\u4e3e\uff0c\u5982",(0,r.kt)("inlineCode",{parentName:"li"},"[x, y, z]"),"\u3001",(0,r.kt)("inlineCode",{parentName:"li"},"(a, b, c)"),"\u3001",(0,r.kt)("inlineCode",{parentName:"li"},"Point { x, y }"),"\u3001",(0,r.kt)("inlineCode",{parentName:"li"},"Some(x)")),(0,r.kt)("li",{parentName:"ul"},"\u901a\u914d\u7b26\u4e0e\u5360\u4f4d\u7b26\uff0c\u5982",(0,r.kt)("inlineCode",{parentName:"li"},"_"),"\u6216\u4ee5",(0,r.kt)("inlineCode",{parentName:"li"},"_"),"\u5f00\u5934\u7684\u53d8\u91cf")),(0,r.kt)("p",null,"\u6a21\u5f0f\u4e3b\u8981\u5728\u4ee5\u4e0b\u5730\u65b9\u4f7f\u7528\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"match"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"match VALUE {\n    PATTERN => EXPRESSION,\n    PATTERN => EXPRESSION,\n    PATTERN => EXPRESSION,\n}\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"if let"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"if let Some(x) = y {\n  \n} else if xx {\n  \n} else if let Some(z) = w {\n  \n} else {\n  \n}\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"while let"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"while let Some(x) = y {\n  \n}\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"for...in"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'let vector = vec![Point { x: 100, y: 200}, Point { x: 200, y: 400}];\nfor &Point { x, y } in vector.iter() {\n    println!("{}, {}", x, y);\n}\n'))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"let"),(0,r.kt)("p",{parentName:"li"},"\u4e8b\u5b9e\u4e0a",(0,r.kt)("inlineCode",{parentName:"p"},"let"),"\u8bed\u53e5\u4e2d\u7684\u53d8\u91cf\u540d\u4e5f\u662f\u8868\u8fbe\u5f0f"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"let x = 5; // let PATTERN = EXPRESSION;\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u51fd\u6570\u53c2\u6570"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'fn print_coordinates(&(x, y): &(i32, i32)) {\n    println!("Current location: ({}, {})", x, y);\n}\n\nfn main() {\n    let point = (3, 5);\n    print_coordinates(&point);\n}\n')))),(0,r.kt)("h4",{id:"refutableirrefutable"},(0,r.kt)("inlineCode",{parentName:"h4"},"refutable"),"\u3001",(0,r.kt)("inlineCode",{parentName:"h4"},"irrefutable")),(0,r.kt)("p",null,"\u6a21\u5f0f\u7684\u4e24\u79cd\u5f62\u5f0f\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"refutable"),"\u548c",(0,r.kt)("inlineCode",{parentName:"p"},"irrefutable")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"irrefutable"),"\uff0c\u6307\u7684\u662f\u80fd\u591f\u5339\u914d\u4efb\u4f55\u53ef\u80fd\u7684\u503c\uff0c\u5982",(0,r.kt)("inlineCode",{parentName:"li"},"let x = 1"),"\u4e2d\u7684\u6a21\u5f0f",(0,r.kt)("inlineCode",{parentName:"li"},"x"),"\uff0c\u6216\u8005\u7ed3\u6784\u4f53\uff0c\u53c8\u6216\u8005\u53ea\u6709\u4e00\u4e2a\u53d8\u4f53\u7684\u679a\u4e3e"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"refutable"),"\uff0c\u503c\u5f97\u662f\u53ef\u80fd\u5b58\u5728\u65e0\u6cd5\u5339\u914d\u7684\u60c5\u51b5\uff0c\u5982",(0,r.kt)("inlineCode",{parentName:"li"},"if let Some(x) = y"),"\u4e2d\u7684\u6a21\u5f0f",(0,r.kt)("inlineCode",{parentName:"li"},"Some(x)"),"\uff0c\u5f53",(0,r.kt)("inlineCode",{parentName:"li"},"y"),"\u4e3a",(0,r.kt)("inlineCode",{parentName:"li"},"None"),"\u65f6\u5339\u914d\u5931\u8d25")),(0,r.kt)("p",null,"\u51fd\u6570\u53c2\u6570\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"let"),"\u8bed\u53e5\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"for"),"\u5faa\u73af\u53ea\u63a5\u6536",(0,r.kt)("inlineCode",{parentName:"p"},"irrefutable"),"\u6a21\u5f0f\uff0c\u5373\u6211\u4eec\u4e0d\u80fd\u4f7f\u7528\u7c7b\u4f3c\u8fd9\u6837\u7684\u8bed\u6cd5",(0,r.kt)("inlineCode",{parentName:"p"},"let Some(x) = 100"),"\uff1b\u800c",(0,r.kt)("inlineCode",{parentName:"p"},"if let"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"while let"),"\u63a5\u6536\u4efb\u4f55\u6a21\u5f0f\uff0c\u53ea\u662f\u5728\u63a5\u6536",(0,r.kt)("inlineCode",{parentName:"p"},"irrefutable"),"\u7684\u6a21\u5f0f\u65f6\u4f1a\u8fdb\u884c\u8b66\u544a\uff0c\u56e0\u4e3a\u4e00\u822c\u4e0d\u63a8\u8350\u8fd9\u4e48\u505a\uff0c\u5982",(0,r.kt)("inlineCode",{parentName:"p"},"if let x = 100"),"\u3002"),(0,r.kt)("h4",{id:"multiple-patterns"},"Multiple patterns"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'let x = 1;\n\nmatch x {\n    1 | 2 => println!("one or two"),\n    3 => println!("three"),\n    _ => println!("anything"),\n}\n')),(0,r.kt)("h4",{id:"\u5339\u914d\u8303\u56f4"},"\u5339\u914d\u8303\u56f4",(0,r.kt)("inlineCode",{parentName:"h4"},"..=")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'let x = 5;\n\nmatch x {\n    1..=5 => println!("one through five"),\n    _ => println!("something else"),\n}\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"let x = 'c';\n\nmatch x {\n    'a'..='j' => println!(\"early ASCII letter\"),\n    'k'..='z' => println!(\"late ASCII letter\"),\n    _ => println!(\"something else\"),\n}\n")),(0,r.kt)("h4",{id:"\u89e3\u6784\u8d4b\u503c"},"\u89e3\u6784\u8d4b\u503c"),(0,r.kt)("h5",{id:"\u89e3\u6784struct"},"\u89e3\u6784Struct"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"let p = Point { x: 0, y: 7 };\n\nlet Point { x: a, y: b } = p;\n")),(0,r.kt)("h5",{id:"\u89e3\u6784\u679a\u4e3e"},"\u89e3\u6784\u679a\u4e3e"),(0,r.kt)("p",null,"\u901a\u5e38\u6765\u8bf4\u679a\u4e3e\u5b58\u5728\u591a\u4e2a\u53d8\u4f53",(0,r.kt)("inlineCode",{parentName:"p"},"variants"),"\uff0c\u8fd9\u4e9b\u53d8\u4f53\u7684\u7c7b\u578b\u90fd\u662f\u76f8\u540c\u7684\u3002\u5bf9\u4e8e\u53ea\u6709\u4e00\u79cd\u53d8\u4f53\u7684\u679a\u4e3e\u4f1a\u88ab\u89c6\u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"irrefutable"),"\uff0c\u53ef\u4ee5\u901a\u8fc7",(0,r.kt)("inlineCode",{parentName:"p"},"let"),"\u76f4\u63a5\u89e3\u6784\u8d4b\u503c\uff0c\u800c\u5b58\u5728\u591a\u4e2a\u53d8\u4f53\u7684\u679a\u4e3e\u901a\u5e38\u90fd\u9700\u8981\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"match"),"\u6765\u5339\u914d\u6bcf\u4e00\u79cd\u53d8\u4f53"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"enum Akara {\n    P2 { x: u32, y: u32},\n}\n\nlet aka = Akara::P2 { x: 100, y: 200 };\nlet Akara::P2 { x, y } = aka; // success\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"enum Akara {\n    P1,\n    P2 { x: u32, y: u32},\n}\n\nlet aka = Akara::P2 { x: 100, y: 200 };\nlet Akara::P2 { x, y } = aka; // error\n\nmatch aka {\n    Akara::P1 => (),\n    Akara::P2 { x, y } => (),\n    _ => () \n}\n")),(0,r.kt)("h5",{id:"\u89e3\u6784\u5143\u7ec4"},"\u89e3\u6784\u5143\u7ec4"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"let ((feet, inches), Point { x, y }) = ((3, 10), Point { x: 3, y: -10 });\n")),(0,r.kt)("h4",{id:"\u7701\u7565\u53d8\u91cf"},"\u7701\u7565\u53d8\u91cf"),(0,r.kt)("p",null,"\u901a\u8fc7",(0,r.kt)("inlineCode",{parentName:"p"},"_"),"\u6216\u8005\u4ee5",(0,r.kt)("inlineCode",{parentName:"p"},"_"),"\u5f00\u5934\u7684\u53d8\u91cf\u6765\u7701\u7565\u53d8\u91cf\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"_"),"\u548c",(0,r.kt)("inlineCode",{parentName:"p"},"_x"),"\u7684\u533a\u522b\u5728\u4e8e",(0,r.kt)("inlineCode",{parentName:"p"},"_x"),"\u4ecd\u7136\u4f1a\u7ed1\u5b9a\u5177\u4f53\u7684\u503c\u53ea\u4e0d\u8fc7\u7f16\u8bd1\u5668\u5e76\u4e0d\u4f1a\u62a5\u9519\uff0c\u800c",(0,r.kt)("inlineCode",{parentName:"p"},"_"),"\u5e76\u4e0d\u4f1a\u7ed1\u5b9a\u4efb\u4f55\u7684\u503c\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'struct Point {\n    x: i32,\n    y: i32,\n    z: i32,\n}\n\nlet origin = Point { x: 0, y: 0, z: 0 };\n\nmatch origin {\n    Point { x, .. } => println!("x is {}", x),\n}\n')),(0,r.kt)("h4",{id:"match-guard"},"Match Guard"),(0,r.kt)("p",null,"\u5728",(0,r.kt)("inlineCode",{parentName:"p"},"match"),"\u8868\u8fbe\u5f0f\u4e2d\uff0c\u5bf9\u4e8e\u4e00\u4e9b\u6a21\u5f0f\u96be\u4ee5\u8868\u8fbe\u7684\u590d\u6742\u903b\u8f91\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"match guard"),"\u6765\u8f85\u52a9\u52a0\u5f3a\u6a21\u5f0f\u7684\u529f\u80fd\uff0c\u6240\u8c13",(0,r.kt)("inlineCode",{parentName:"p"},"match guard"),"\u6307\u7684\u662f",(0,r.kt)("inlineCode",{parentName:"p"},"match"),"\u5206\u652f\u4e2d\u6a21\u5f0f\u540e\u9762\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"if"),"\u6761\u4ef6"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'let num = Some(4);\n\nmatch num {\n    Some(x) if x % 2 == 0 => println!("The number {} is even", x),\n    Some(x) => println!("The number {} is odd", x),\n    None => (),\n}\n')),(0,r.kt)("h4",{id:"bindings"},"@bindings"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'enum Akara {\n    P1,\n    P2 { x: u32, y: u32},\n}\n\nlet aka = Akara::P2 { x: 100, y: 200 };\nmatch aka {\n   Akara::P1 => (),\n   Akara::P2 { x: 1..=200, y} => println!("{}, {}", x, y), // error. cannot find value `x` in this scope\n   _ => () \n}\n')),(0,r.kt)("p",null,"\u5bf9\u4e8e\u4e0a\u8ff0\u60c5\u51b5\uff0c\u6211\u4eec\u9700\u8981\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"@"),"\u8fdb\u884c\u663e\u5f0f\u7684\u7ed1\u5b9a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'match aka {\n   Akara::P1 => (),\n   Akara::P2 { x: xx @ 1..=200, y} => println!("{}, {}", xx, y),\n   _ => () \n}\n')),(0,r.kt)("h3",{id:"\u96c6\u5408\u7c7b\u578b"},"\u96c6\u5408\u7c7b\u578b"),(0,r.kt)("p",null,"Rust\u63d0\u4f9b\u4e86\u4e00\u4e9b\u5e38\u7528\u7684\u5185\u7f6e\u96c6\u5408\u7c7b\u578b\uff0c\u5982",(0,r.kt)("inlineCode",{parentName:"p"},"Vec"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"String"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"HashMap"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"Range"),"\uff0c\u8fd9\u4e9b\u7c7b\u578b\u90fd\u662f\u901a\u8fc7",(0,r.kt)("inlineCode",{parentName:"p"},"struct"),"\u5b9e\u73b0\u7684"),(0,r.kt)("h4",{id:"vec"},"Vec"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Vec"),"\u662f\u957f\u5ea6\u53ef\u53d8\uff0c\u53c2\u6570\u7c7b\u578b\u76f8\u540c\u7684\u96c6\u5408\u3002\u4e5f\u53ef\u4ee5\u901a\u8fc7",(0,r.kt)("inlineCode",{parentName:"p"},"Vec"),"\u5b58\u679a\u4e3e\uff0c\u6765\u95f4\u63a5\u5b9e\u73b0\u957f\u5ea6\u53ef\u53d8\uff0c\u7c7b\u578b\u4e0d\u540c\u7684\u96c6\u5408"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'fn main() {\n  let mut value: Vec<i32> = Vec::new();\n  value.push(1);\n  value.push(2);\n\n  let mut value2 = vec![1, 2, 3]; // macro\n\n  let a: &mut i32 = &mut value2[0];\n  *a = 4;\n  println!("{}", a);\n\n  let b: Option<&i32> = value2.get(1);\n  if let Some(x) = b {\n      println!("{}", x);\n  }\n\n\n\n  for i in &mut value2 {\n      *i = 20;\n      println!("{}", i);\n  }\n\n  // ---\n\n\n  fn largest(list: &[i32]) -> i32 {\n      let mut largest = list[0];\n\n      for &item in list { // 18\u7ae0,\u6a21\u5f0f\u5339\u914d\n          if item > largest {\n              largest = item;\n          }\n      }\n\n      largest\n  }\n}\n')),(0,r.kt)("h4",{id:"string"},"String"),(0,r.kt)("p",null,"\u9700\u8981\u6ce8\u610f\u7684\u662f",(0,r.kt)("inlineCode",{parentName:"p"},"String"),"\u5e76\u4e0d\u652f\u6301\u76f4\u63a5\u901a\u8fc7\u7d22\u5f15\u8fdb\u884c\u53d6\u503c"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'fn main() {\n  let mut s = String::from("hello");\n  s.push_str(" world");\n  s.push(\'!\'); // char\u662f\u5355\u5f15\u53f7\n  println!("{}", s); \n}\n\n')),(0,r.kt)("h4",{id:"hashmap"},"HashMap"),(0,r.kt)("p",null,"\u867d\u7136\u90fd\u5728\u6807\u51c6\u5e93\u5f53\u4e2d\uff0c\u4f46\u662f\u7531\u4e8e\u4e0d\u50cf",(0,r.kt)("inlineCode",{parentName:"p"},"Vec"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"String"),"\u4f7f\u7528\u7684\u90a3\u4e48\u9891\u7e41\uff0c\u56e0\u6b64",(0,r.kt)("inlineCode",{parentName:"p"},"HashMap"),"\u5e76\u6ca1\u6709\u88ab",(0,r.kt)("inlineCode",{parentName:"p"},"preclude"),"\uff0c\u6240\u4ee5\u4f7f\u7528\u7684\u65f6\u5019\u9700\u8981\u901a\u8fc7",(0,r.kt)("inlineCode",{parentName:"p"},"use"),"\u624b\u52a8\u5f15\u5165"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'use std::collections::HashMap;\n\nfn main() {\n  let mut scores = HashMap::new();\n  scores.insert(String::from("Blue"), 10);\n  scores.insert(String::from("Yellow"), 50);\n\n  for (key, value) in &scores {\n      println!("{}: {}", key, value);\n  }\n}\n\n')),(0,r.kt)("h4",{id:"range"},"Range"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"use core::ops::Range;\n\nlet v: Vec<i32> = (1..4).into_iter().map( |x| x * x).collect();\n")),(0,r.kt)("h3",{id:"\u9519\u8bef\u5904\u7406"},"\u9519\u8bef\u5904\u7406"),(0,r.kt)("p",null,"Rust\u628a\u9519\u8bef\u5206\u4e3a\u4e24\u79cd\u7c7b\u578b\uff0c\u53ef\u6062\u590d\u9519\u8bef\u548c\u4e0d\u53ef\u6062\u590d\u9519\u8bef\u3002"),(0,r.kt)("p",null,"\u53ef\u6062\u590d\u9519\u8bef\uff0c\u6bd4\u5982\u8bf4\u8bfb\u53d6\u4e00\u4e2a\u6587\u4ef6\uff0c\u5982\u679c\u6587\u4ef6\u4e0d\u5b58\u5728\u65f6\u6211\u4eec\u5e94\u8be5\u8ba9\u5916\u90e8\u80fd\u591f\u611f\u77e5\u5230\uff1b\u4e0d\u53ef\u6062\u590d\u9519\u8bef\uff0c\u6bd4\u5982\u8d8a\u754c\u8bbf\u95ee\u6570\u7ec4\uff0c\u4e00\u65e6\u51fa\u73b0\u4e86\u8fd9\u79cd\u4e0d\u5b89\u5168\u7684\u5185\u5b58\u8bbf\u95eeBUG\u6211\u4eec\u53ef\u80fd\u4f1a\u76f4\u63a5\u901a\u8fc7",(0,r.kt)("inlineCode",{parentName:"p"},"panic!"),"\u6765\u9000\u51fa\u8fdb\u7a0b\u3002"),(0,r.kt)("h4",{id:"panic"},"panic"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"panic"),"\u4e5f\u5b58\u5728\u4e24\u79cd\u884c\u4e3a\uff0c\u9ed8\u8ba4\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"unwind"),"\u548c",(0,r.kt)("inlineCode",{parentName:"p"},"abort"),"\u3002\u5176\u4e2d",(0,r.kt)("inlineCode",{parentName:"p"},"unwind"),"\u610f\u5473\u7740\u9000\u51fa\u7a0b\u5e8f\u7684\u65f6\u5019Rust\u4f1a\u81ea\u52a8\u5c55\u5f00\u5806\u6808\u5e76\u6e05\u7a7a\u6570\u636e\uff0c\u4f46\u8fd9\u4f1a\u6709\u4e00\u4e9b\u5de5\u4f5c\u91cf\u3002\u800c\u4e00\u65e6\u91c7\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"abort"),"\uff0c\u90a3\u4e48\u7a0b\u5e8f\u4e2d\u4f7f\u7528\u7684\u5185\u5b58\u5c31\u4e0d\u4f1a\u88ab\u81ea\u52a8\u56de\u6536\uff0c\u6211\u4eec\u9700\u8981\u901a\u8fc7\u64cd\u4f5c\u7cfb\u7edf\u6765\u624b\u52a8\u8fdb\u884c\u6e05\u9664\u3002\u4e00\u822c\u901a\u8fc7\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u6765\u8c03\u6574\u8be5\u884c\u4e3a\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-toml"},"# cargo.toml\n[profile.release]\npanic = 'abort'\n")),(0,r.kt)("h4",{id:"result"},"Result"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"enum Result<T, E> {\n    Ok(T),\n    Err(E),\n}\n")),(0,r.kt)("p",null,"\u5728\u679a\u4e3e\u4e00\u8282\u4e2d\uff0c\u6211\u4eec\u4e86\u89e3\u5230\u53ef\u4ee5\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"Option<T>"),"\u6765\u5305\u88c5\u8868\u660e\u67d0\u4e2a\u503c\u53ef\u80fd\u4e3a\u7a7a\u3002\u7c7b\u4f3c\u7684\u9053\u7406\uff0c\u6211\u4eec\u901a\u8fc7",(0,r.kt)("inlineCode",{parentName:"p"},"Result<T, E>"),"\u6765\u4f5c\u4e3a\u51fd\u6570\u7684\u8fd4\u56de\u503c\uff0c\u6765\u8868\u660e\u8fd9\u4e2a\u51fd\u6570\u53ef\u80fd\u4f1a\u5b58\u5728\u5f02\u5e38\u60c5\u51b5\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'use std::fs::File;\n\nfn main() {\n    let f = File::open("hello.txt");\n\n    let f = match f {\n        Ok(file) => file,\n        Err(error) => panic!("Problem opening the file: {:?}", error),\n    };\n}\n')),(0,r.kt)("p",null,"\u4e00\u822c\u901a\u8fc7",(0,r.kt)("inlineCode",{parentName:"p"},"match"),"\u6765\u5339\u914d\u679a\u4e3e\u7684\u4e0d\u540c\u53ef\u80fd\u503c\uff0c\u4f46\u8fd9\u6709\u4e9b\u5197\u4f59\uff0c\u56e0\u6b64",(0,r.kt)("inlineCode",{parentName:"p"},"Result"),"\u5b9e\u73b0\u4e86\u4e00\u4e9b\u65b9\u4fbf\u7684\u65b9\u6cd5"),(0,r.kt)("h5",{id:"unwrap"},"unwrap"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"unwrap"),"\u65b9\u6cd5\u80fd\u591f\u5728",(0,r.kt)("inlineCode",{parentName:"p"},"Result"),"\u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"Ok"),"\u7684\u65f6\u5019\u8fd4\u56de\u5185\u90e8\u503c\uff0c\u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"Err"),"\u7684\u65f6\u5019",(0,r.kt)("inlineCode",{parentName:"p"},"panic"),"\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'fn main() {\n    let f = File::open("hello.txt").unwrap();\n}\n')),(0,r.kt)("h5",{id:"expect"},"expect"),(0,r.kt)("p",null,"\u4e0e",(0,r.kt)("inlineCode",{parentName:"p"},"unwrap"),"\u529f\u80fd\u4e00\u81f4\uff0c\u533a\u5206\u5728\u4e8e\u6211\u4eec\u53ef\u4ee5\u6307\u5b9a\u62a5\u9519\u65f6\u663e\u793a\u7ed9\u7528\u6237\u7684\u4fe1\u606f"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'fn main() {\n    let f = File::open("hello.txt").expect("\u9519\u8bef\u4fe1\u606f");\n}\n')),(0,r.kt)("h5",{id:"propagating-errors"},"propagating errors"),(0,r.kt)("p",null,"\u5f53\u4e00\u4e2a\u51fd\u6570\u7684\u5b9e\u73b0\u8c03\u7528\u4e86\u53ef\u80fd\u62a5\u9519\u7684\u5176\u4ed6\u51fd\u6570\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u624b\u52a8\u5bf9\u9519\u8bef\u8fdb\u884c\u5904\u7406\uff0c\u4f46\u4e5f\u53ef\u4ee5\u76f4\u63a5\u628a\u9519\u8bef\u629b\u51fa\u53bb\uff0c\u8fd9\u88ab\u79f0\u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"propagating errors"),"\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"Result"),"\u63d0\u4f9b\u4e86",(0,r.kt)("inlineCode",{parentName:"p"},"?"),"\u64cd\u4f5c\u7b26\u6765\u5feb\u901f\u5b9e\u73b0\u3002"),(0,r.kt)("p",null,"\u5bf9\u4e8e\u4ee5\u4e0b\u4ee3\u7801\uff0c\u5f53",(0,r.kt)("inlineCode",{parentName:"p"},"Result"),"\u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"Ok"),"\u65f6\u4f1a\u8fd4\u56de\u5185\u90e8\u503c\uff0c\u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"Err"),"\u7684\u65f6\u5019\u4f1a\u76f4\u63a5\u628a",(0,r.kt)("inlineCode",{parentName:"p"},"Err"),"\u4f5c\u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"test"),"\u51fd\u6570\u7684\u8fd4\u56de\u503c\u8fd4\u56de\u51fa\u53bb\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'fn test() {\n    let f = File::open("hello.txt")?;\n}\n')),(0,r.kt)("h5",{id:"unwrap_or_else"},"unwrap_or_else"),(0,r.kt)("p",null,"\u4e4b\u524d\u63d0\u5230\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"unwrap"),"\u548c",(0,r.kt)("inlineCode",{parentName:"p"},"expect"),"\u90fd\u4f1a\u5728",(0,r.kt)("inlineCode",{parentName:"p"},"Err"),"\u7684\u65f6\u5019\u76f4\u63a5",(0,r.kt)("inlineCode",{parentName:"p"},"panic"),"\uff0c\u8fd9\u53ef\u80fd\u4e0d\u662f\u6211\u4eec\u60f3\u8981\u7684\u7ed3\u679c\uff0c\u8fd9\u65f6\u5019\u6211\u4eec\u9700\u8981\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"unwrap_or_else"),"\u5e76\u4f20\u9012\u4e00\u4e2a\u95ed\u5305\u4f5c\u4e3a\u53c2\u6570"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'fn main() {\n    let f = File::open("hello.txt").unwrap_or_else(|error| {\n      // do something\n    })\n}\n')),(0,r.kt)("h3",{id:"\u6cdb\u578b"},"\u6cdb\u578b"),(0,r.kt)("h4",{id:"\u5355\u6001\u5316"},"\u5355\u6001\u5316"),(0,r.kt)("p",null,"Rust\u63d0\u4f9b\u4e86\u5f3a\u5927\u7684\u7c7b\u578b\u7cfb\u7edf\uff0c\u4f46\u662f\u4f7f\u7528\u6cdb\u578b\u5e76\u4e0d\u4f1a\u7ed9\u8fd0\u884c\u65f6\u5e26\u6765\u4efb\u4f55\u989d\u5916\u7684\u5f00\u9500\uff0c\u5373\u5e76\u4e0d\u4f1a\u964d\u4f4e\u8fd0\u884c\u65f6\u7684\u6548\u7387\uff0c\u8fd9\u4f9d\u8d56\u4e8eRust\u5728\u7f16\u8bd1\u65f6\u5bf9\u6240\u6709\u6cdb\u578b\u7c7b\u578b\u8fdb\u884c",(0,r.kt)("strong",{parentName:"p"},"\u5355\u6001\u5316\uff08",(0,r.kt)("em",{parentName:"strong"},"monomorphization"),"\uff09"),"\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"fn main() {\n        let integer = Some(5);\n        let float = Some(5.0);\n}\n")),(0,r.kt)("p",null,"\u5373\u5bf9\u4e8e\u4ee5\u4e0a\u4ee3\u7801\uff0c\u4f1a\u88ab\u7f16\u8bd1\u6210\u4ee5\u4e0b\u4ee3\u7801\uff0c\u8fd9\u4e5f\u88ab\u79f0\u4e3a",(0,r.kt)("strong",{parentName:"p"},"\u9759\u6001\u5206\u53d1\uff08",(0,r.kt)("em",{parentName:"strong"},"static dispatch"),"\uff09")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"enum Option_i32 {\n    Some(i32),\n    None,\n}\n\nenum Option_f64 {\n    Some(f64),\n    None,\n}\n\nfn main() {\n    let integer = Option_i32::Some(5);\n    let float = Option_f64::Some(5.0);\n}\n")),(0,r.kt)("p",null,"\u5355\u6001\u5316\u6700\u5927\u7684\u597d\u5904\u662f\u96f6\u8fd0\u884c\u65f6\u5f00\u9500\uff0c\u4f46\u4e5f\u5b58\u5728\u7740\u5bf9\u5e94\u7684\u7f3a\u70b9\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u4ea7\u7269\u4f53\u79ef\u589e\u5927"),(0,r.kt)("li",{parentName:"ol"},"\u7f16\u8bd1\u65f6\u95f4\u53d8\u957f")),(0,r.kt)("h3",{id:"trait"},"Trait"),(0,r.kt)("p",null,"Rust\u4e2d\u7684",(0,r.kt)("em",{parentName:"p"},"trait"),"\u7c7b\u4f3c\u4e8e\u901a\u5e38\u7684",(0,r.kt)("em",{parentName:"p"},"interface"),"\uff0c\u6709\u4ee5\u4e0b\u51e0\u4e2a\u6bd4\u8f83\u660e\u663e\u7684\u533a\u522b"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"trait"),"\u53ef\u4ee5\u63d0\u4f9b\u65b9\u6cd5\u7684\u9ed8\u8ba4\u5b9e\u73b0"),(0,r.kt)("li",{parentName:"ul"},"\u5728\u4f7f\u7528\u5b9e\u73b0\u4e86\u67d0\u4e2a",(0,r.kt)("em",{parentName:"li"},"trait"),"\u7684\u7ed3\u6784\u4f53\u65f6\uff0c\u6211\u4eec\u9700\u8981\u901a\u8fc7",(0,r.kt)("em",{parentName:"li"},"use"),"\u628a\u8be5",(0,r.kt)("em",{parentName:"li"},"trait"),"\u5f15\u5165")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'struct People {\n    name: String,\n}\n\ntrait Test {\n    fn run(&self) { // \u53ef\u4ee5\u63d0\u4f9b\u9ed8\u8ba4\u5b9e\u73b0\n        println!("run") \n    } \n    fn get_name(&self) -> &str;\n}\n\nimpl Test for People {\n    fn get_name(&self) -> &str {\n        &self.name\n    }\n}\n\nfn main() {\n    let p = People {\n        name: String::from("akara"),\n    };\n    p.run();\n    println!("{}", p.get_name());\n}\n')),(0,r.kt)("h4",{id:"trait-bound"},"Trait Bound"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"trait bound"),"\u7c7b\u4f3c\u4e8e\u6cdb\u578b\u7ea6\u675f\uff0c\u5982\u4ee5\u4e0b\u4ee3\u7801\u4e2d\u8981\u6c42\u7c7b\u578b\u53c2\u6570T\u5fc5\u987b\u5b9e\u73b0\u4e86",(0,r.kt)("em",{parentName:"p"},"Summary"),"\u8fd9\u4e2a",(0,r.kt)("em",{parentName:"p"},"trait")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'pub fn notify<T: Summary>(item: &T) {\n    println!("Breaking news! {}", item.summarize());\n}\n\n// \u8bed\u6cd5\u7cd6\npub fn notify(item: &impl Summary) {\n    println!("Breaking news! {}", item.summarize());\n}\n')),(0,r.kt)("p",null,"\u5f53\u7c7b\u4f3c\u53c2\u6570\u9700\u8981\u6ee1\u8db3\u591a\u4e2a\u7279\u5f81\u65f6\uff0c\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"+"),"\u8fdb\u884c\u5173\u8054\uff0c\u7c7b\u4f3c",(0,r.kt)("em",{parentName:"p"},"TS"),"\u4e2d\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"&")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"pub fn notify<T: Summary + Display>(item: &T);\n  \npub fn notify(item: &(impl Summary + Display));\n")),(0,r.kt)("p",null,"\u5f53trait bound\u592a\u957f\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528Where\u5b50\u53e5\u6765\u4f18\u5316\u5199\u6cd5"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"// before\nfn some_function<T: Display + Clone, U: Clone + Debug>(t: &T, u: &U) -> i32 {}\n  \n// after\nfn some_function<T, U>(t: &T, u: &U) -> i32\n    where T: Display + Clone,\n          U: Clone + Debug\n{}\n")),(0,r.kt)("h4",{id:"trait-object"},"Trait Object"),(0,r.kt)("p",null,"\u6cdb\u578b\u7684\u529f\u80fd\u5f88\u5f3a\u5927\uff0c\u4f46\u5374\u96be\u4ee5\u8868\u8fbe\u5f02\u6784\uff08",(0,r.kt)("em",{parentName:"p"},"heterogeneous"),"\uff09\u96c6\u5408\uff0c\u5982\u4ee5\u4e0b\u4ee3\u7801\u4e2d\u867d\u7136\u6211\u4eec\u4f7f\u7528",(0,r.kt)("em",{parentName:"p"},"Trait Bound"),"\u5bf9\u7c7b\u578b\u53c2\u6570",(0,r.kt)("em",{parentName:"p"},"T"),"\u8fdb\u884c\u4e86\u7ea6\u675f\uff0c\u4f46\u6700\u7ec8Vec\u96c6\u5408\u7684\u6bcf\u4e00\u9879\u7c7b\u578b\u90fd\u662f\u76f8\u540c\u7684\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"pub trait Draw {\n    fn draw(&self);\n}\n\npub struct Screen<T: Draw> {\n    pub components: Vec<T>,\n}\n")),(0,r.kt)("p",null,"\u901a\u8fc7\u4f7f\u7528",(0,r.kt)("em",{parentName:"p"},"Trait Object"),"\u53ef\u4ee5\u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898\uff0c\u8fd9\u91cc\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"Box<dyn Draw>"),"\u5c31\u662fTrait Object\uff0c\u4e00\u4e2a\u6cdb\u578b\u7c7b\u578b\u53c2\u6570\u53ea\u80fd\u88ab\u4e00\u4e2a\u5177\u4f53\u7684\u7c7b\u578b\u66ff\u6362\uff0c\u800cTrait Object\u5141\u8bb8\u5728\u8fd0\u884c\u65f6\u88ab\u591a\u4e2a\u5177\u4f53\u7684\u7c7b\u578b\u66ff\u6362\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"pub trait Draw {\n    fn draw(&self);\n}\n\npub struct Screen {\n    pub components: Vec<Box<dyn Draw>>,\n}\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Recall in the ",(0,r.kt)("a",{parentName:"p",href:"https://doc.rust-lang.org/book/ch10-01-syntax.html#performance-of-code-using-generics"},"\u201cPerformance of Code Using Generics\u201d")," section in Chapter 10 our discussion on the monomorphization process performed by the compiler when we use trait bounds on generics: the compiler generates nongeneric implementations of functions and methods for each concrete type that we use in place of a generic type parameter. The code that results from monomorphization is doing ",(0,r.kt)("em",{parentName:"p"},"static dispatch"),", which is when the compiler knows what method you\u2019re calling at compile time. This is opposed to ",(0,r.kt)("em",{parentName:"p"},"dynamic dispatch"),", which is when the compiler can\u2019t tell at compile time which method you\u2019re calling. In dynamic dispatch cases, the compiler emits code that at runtime will figure out which method to call.")),(0,r.kt)("h3",{id:"\u95ed\u5305"},"\u95ed\u5305"),(0,r.kt)("p",null,"\u5728",(0,r.kt)("em",{parentName:"p"},"JavaScript"),"\u4e2d\uff0c\u58f0\u660e\u51fd\u6570\u7684\u65f6\u5019\u6211\u4eec\u4f1a\u5728\u8be5\u51fd\u6570\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"[[scope]]"),"\u5c5e\u6027\u4e2d\u8bb0\u5f55\u8be5\u51fd\u6570\u7684\u4f5c\u7528\u57df\u94fe\uff08\u6267\u884c\u4e0a\u4e0b\u6587\u7684\u53d8\u91cf\u5bf9\u8c61VO\u7ec4\u6210\u7684\u6570\u7ec4\uff09\uff0c\u5728\u8c03\u7528\u8be5\u51fd\u6570\u7684\u65f6\u5019\u521b\u5efa\u65b0\u7684\u51fd\u6570\u6267\u884c\u4e0a\u4e0b\u6587\uff0c\u8be5\u51fd\u6570\u6267\u884c\u4e0a\u4e0b\u6587\u4e2d\u5305\u62ec\u51fd\u6570\u81ea\u8eab\u7684\u53d8\u91cf\u5bf9\u8c61\u4ee5\u53ca\u4f5c\u7528\u57df\u94fe\uff0c\u6267\u884c\u65f6\u5982\u679c\u5728\u5f53\u524d\u4f5c\u7528\u57df\u627e\u4e0d\u5230\u67d0\u4e2a\u53d8\u91cf\uff0c\u5219\u4f1a\u6cbf\u7740\u4f5c\u7528\u57df\u94fe\u5411\u4e0a\u67e5\u627e\u3002"),(0,r.kt)("p",null,"\u5bf9\u4e8e\u8fd9\u79cd\uff0c\u5728\u58f0\u660e\u51fd\u6570\u65f6\u6355\u83b7\u51fd\u6570\u4f5c\u7528\u57df\u7684\u884c\u4e3a\u901a\u5e38\u4e5f\u88ab\u79f0\u4f5c\u95ed\u5305\u3002"),(0,r.kt)("p",null,"\u4e0e",(0,r.kt)("em",{parentName:"p"},"JavaScript"),"\u4e0d\u540c\uff0c",(0,r.kt)("em",{parentName:"p"},"Rust"),"\u4e2d\u7684\u51fd\u6570\u4e0d\u4f1a\u6355\u83b7\u5f53\u524d\u7684\u4f5c\u7528\u57df\uff0c\u4e5f\u5c31\u610f\u5473\u7740\u4ee5\u4e0b\u7684\u4ee3\u7801\u662f\u65e0\u6548\u7684"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'fn main() {\n    let s = "hello";\n    fn test() {\n        println!("{}", s) // \u9519\u8bef\n    }\n\n    test();\n}\n')),(0,r.kt)("p",null,"\u4e3a\u4e86\u89e3\u51b3\u8fd9\u6837\u7684\u95ee\u9898\uff0cRust\u4e5f\u5f15\u5165\u4e86\u95ed\u5305\u51fd\u6570\uff0c\u95ed\u5305\u53ef\u4ee5\u6355\u83b7\u5f53\u524d\u4f5c\u7528\u57df\uff0c\u901a\u5e38\u662f\u4f5c\u4e3a\u533f\u540d\u51fd\u6570\u4fdd\u5b58\u5728\u53d8\u91cf\u4e2d\u3001\u6216\u8005\u76f4\u63a5\u4f5c\u4e3a\u51fd\u6570\u7684\u53c2\u6570\u4f7f\u7528\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'fn main() {\n    let s = "hello";\n    let f = |name: &str| {\n        println!("{}, {}", s, name)\n    };\n    f("world");\n}\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'let f = File::open("hello.txt").unwrap_or_else(|error| {\n        // do something\n})\n')),(0,r.kt)("h3",{id:"\u8fed\u4ee3\u5668iteration"},"\u8fed\u4ee3\u5668\uff08iteration\uff09"),(0,r.kt)("p",null,"\u5e38\u89c1\u7684\u96c6\u5408\u7c7b\u578b\uff0c\u5982",(0,r.kt)("em",{parentName:"p"},"Vector"),"\u90e8\u7f72\u7684",(0,r.kt)("inlineCode",{parentName:"p"},".iter()"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},".into_iter()"),"\u7b49\u65b9\u6cd5\u5c06\u4f1a\u8fd4\u56de\u8fed\u4ee3\u5668\u5bf9\u8c61\uff0c\u8fed\u4ee3\u5668\u90fd\u5b9e\u73b0\u4e86",(0,r.kt)("em",{parentName:"p"},"Iterator"),"\u8fd9\u4e2a",(0,r.kt)("em",{parentName:"p"},"trait"),"\uff0c\u5373\u53ef\u4ee5\u901a\u8fc7\u4e0d\u65ad\u8c03\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"next"),"\u65b9\u6cd5\u8bbf\u95ee\u96c6\u5408\u4e2d\u7684\u5143\u7d20\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},".iter()"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},".iter_mut()"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},".into_iter()")))),(0,r.kt)("h4",{id:"consuming-adaptors"},(0,r.kt)("em",{parentName:"h4"},"consuming adaptors")),(0,r.kt)("p",null,"\u5728\u5185\u90e8\u8c03\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"next"),"\u65b9\u6cd5\u7684\u65b9\u6cd5\u4e5f\u88ab\u79f0\u4e3a",(0,r.kt)("em",{parentName:"p"},"consuming adaptor"),"\uff0c\u5982",(0,r.kt)("inlineCode",{parentName:"p"},"sum"),"\u65b9\u6cd5"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'fn main() {\n    let v = vec![1, 2, 3];\n    let sum: u32 = v.iter().sum();\n    println!("{}", sum);\n}\n')),(0,r.kt)("h4",{id:"iterator-adaptors"},(0,r.kt)("em",{parentName:"h4"},"Iterator adaptors")),(0,r.kt)("p",null,"\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u8fed\u4ee3\u5668\u7684\u65b9\u6cd5\u4e5f\u88ab\u79f0\u4e3a",(0,r.kt)("em",{parentName:"p"},"iterator adaptor"),"\uff0c\u5982",(0,r.kt)("inlineCode",{parentName:"p"},"map"),"\u65b9\u6cd5"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'fn main() {\n    let v = vec![1, 2, 3];\n    let sum: u32 = v.iter().map(|x| 2 * x).sum();\n    println!("{}", sum);\n}\n')),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://stackoverflow.com/questions/65766866/why-the-closure-passed-to-map-does-not-take-a-reference-while-the-one-passed-t"},"https://stackoverflow.com/questions/65766866/why-the-closure-passed-to-map-does-not-take-a-reference-while-the-one-passed-t")," "),(0,r.kt)("h3",{id:"\u667a\u80fd\u6307\u9488"},"\u667a\u80fd\u6307\u9488"),(0,r.kt)("p",null,"\u667a\u80fd\u6307\u9488\uff0c\u901a\u5e38\u6307\u7684\u662f\u5177\u5907\u66f4\u5f3a\u5927\u80fd\u529b\u7684\u6307\u9488\u3002\u667a\u80fd\u6307\u9488\u901a\u5e38\u7531\u7ed3\u6784\u4f53\u5b9e\u73b0\uff0c\u540c\u65f6\u5b9e\u73b0\u4e86",(0,r.kt)("inlineCode",{parentName:"p"},"Deref"),"\u548c",(0,r.kt)("inlineCode",{parentName:"p"},"Drop"),"\u8fd9\u4e24\u4e2a",(0,r.kt)("em",{parentName:"p"},"Trait"),"\uff0c\u6211\u4eec\u4e4b\u524d\u4f7f\u7528\u5230\u7684String\u548cVector\u5c31\u662f\u5178\u578b\u7684\u667a\u80fd\u6307\u9488\uff0c\u4e0b\u6587\u4ecb\u7ecd\u6807\u51c6\u5e93\u4e2d\u6bd4\u5982\u91cd\u8981\u7684\u51e0\u4e2a\u667a\u80fd\u6307\u9488\u3002"),(0,r.kt)("h4",{id:"deref"},(0,r.kt)("em",{parentName:"h4"},"Deref")),(0,r.kt)("p",null,"\u901a\u8fc7\u5b9e\u73b0",(0,r.kt)("em",{parentName:"p"},"Deref Trait"),"\u5c06\u5141\u8bb8\u6211\u4eec\u81ea\u5b9a\u4e49\u5bf9\u7ed3\u6784\u4f53\u7684\u89e3\u5f15\u7528\u64cd\u4f5c\u7b26",(0,r.kt)("inlineCode",{parentName:"p"},"*"),"\u884c\u4e3a\uff0c\u4f7f\u5f97\u5176\u8868\u73b0\u7684\u548c\u5f15\u7528\u4e00\u6837\uff08\u5f15\u7528\u53ef\u4ee5\u76f4\u63a5\u8fdb\u884c\u89e3\u5f15\u7528\u64cd\u4f5c\uff09"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"fn main() {\n    let x = 5;\n    let y = &x;\n\n    assert_eq!(5, x);\n    assert_eq!(5, *y);\n}\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"use std::ops::Deref;\n\nimpl<T> Deref for MyBox<T> {\n    type Target = T;\n\n    fn deref(&self) -> &Self::Target {\n        &self.0\n    }\n}\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"*y"),"\u5b9e\u9645\u4e0a\u7b49\u4ef7\u4e8e",(0,r.kt)("inlineCode",{parentName:"p"},"*(y.deref())")),(0,r.kt)("h4",{id:"drop"},(0,r.kt)("em",{parentName:"h4"},"Drop")),(0,r.kt)("p",null,"\u901a\u8fc7\u5b9e\u73b0",(0,r.kt)("em",{parentName:"p"},"Drop Trait"),"\u5c06\u5141\u8bb8\u6211\u4eec\u81ea\u5b9a\u4e49\u53d8\u91cf\u79bb\u5f00\u4f5c\u7528\u57df\u65f6\u7684\u884c\u4e3a\uff0c\u4e3b\u8981\u7528\u6765\u91ca\u653e\u6587\u4ef6\u8d44\u6e90\u6216\u8005\u7f51\u7edc\u8fde\u63a5\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'struct CustomSmartPointer {\n    data: String,\n}\n\nimpl Drop for CustomSmartPointer {\n    fn drop(&mut self) {\n        println!("Dropping CustomSmartPointer with data `{}`!", self.data);\n    }\n}\n\nfn main() {\n    let c = CustomSmartPointer {\n        data: String::from("my stuff"),\n    };\n    let d = CustomSmartPointer {\n        data: String::from("other stuff"),\n    };\n    println!("CustomSmartPointers created.");\n}\n')),(0,r.kt)("h4",{id:"boxt"},(0,r.kt)("inlineCode",{parentName:"h4"},"Box<T>")),(0,r.kt)("p",null,"\u7528\u6765\u5728\u5806\u5185\u5b58\u5206\u914d\u503c\u3002"),(0,r.kt)("h4",{id:"rct"},(0,r.kt)("inlineCode",{parentName:"h4"},"Rc<T>")),(0,r.kt)("p",null,"\u5f15\u7528\u8ba1\u6570\u667a\u80fd\u6307\u9488\uff0c\u591a\u4e2a\u6307\u9488\u62e5\u6709\u540c\u4e00\u5757\u5185\u5b58\u7684\u6240\u6709\u6743\uff0c\u53ea\u6709\u5f53\u6240\u6709\u6307\u9488\u90fd\u79bb\u5f00\u4f5c\u7528\u57df\u65f6\u624d\u91ca\u653e\u8fd9\u5757\u5185\u5b58\u3002"),(0,r.kt)("h4",{id:"refcellt"},(0,r.kt)("inlineCode",{parentName:"h4"},"RefCell<T>")),(0,r.kt)("h3",{id:"\u591a\u7ebf\u7a0b\u7f16\u7a0b"},"\u591a\u7ebf\u7a0b\u7f16\u7a0b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'use std::thread;\nuse std::time::Duration;\n\nfn main() {\n    thread::spawn(|| {\n        for i in 1..10 {\n            println!("hi number {} from the spawned thread!", i);\n            thread::sleep(Duration::from_millis(1));\n        }\n    });\n\n    for i in 1..5 {\n        println!("hi number {} from the main thread!", i);\n        thread::sleep(Duration::from_millis(1));\n    }\n}\n')),(0,r.kt)("p",null,"\u901a\u8fc7",(0,r.kt)("inlineCode",{parentName:"p"},"thread::spawn"),"\u521b\u5efa\u65b0\u7684\u5b50\u7ebf\u7a0b\uff0c\u5f53\u4e3b\u7ebf\u7a0b\u7ed3\u675f\u65f6\u4f1a\u81ea\u52a8\u7ed3\u675f\u6240\u6709\u5b50\u7ebf\u7a0b\u3002"),(0,r.kt)("h4",{id:"join-handles"},"Join Handles"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"thread::spawn"),"\u8fd4\u56de\u503c\u7684\u7c7b\u578b\u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"JoinHandle"),"\uff0c\u5f53\u6211\u4eec\u8c03\u7528\u5b83\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"join"),"\u65b9\u6cd5\u65f6\uff0c\u4f1a\u7b49\u5f85\u8be5\u7ebf\u7a0b\u7ed3\u675f\uff0c\u5e76\u53ef\u4ee5\u901a\u8fc7",(0,r.kt)("inlineCode",{parentName:"p"},"unwrap"),"\u65b9\u6cd5\u83b7\u53d6\u8be5\u7ebf\u7a0b\u7684\u8fd4\u56de\u503c\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'fn main() {\n    let handle: JoinHandle<u32> = thread::spawn(|| {\n        thread::sleep(Duration::from_secs(1));\n        println!("\u4e00\u79d2\u540e");\n        100 + 200\n    });\n    \n    let value = handle.join().unwrap();\n\n    println!("{}", value); // 300\n}\n')),(0,r.kt)("h4",{id:"move-\u95ed\u5305"},"move \u95ed\u5305"),(0,r.kt)("p",null,"\u6838\u5fc3\u95ee\u9898\u5728\u4e8e\uff1aRust\u4e0d\u77e5\u9053\u5b50\u7ebf\u7a0b\u5c06\u8fd0\u884c\u591a\u4e45\uff0c\u56e0\u6b64\u96be\u4ee5\u5bf9\u95ed\u5305\u4e2d\u6355\u83b7\u7684\u5f15\u7528\u8fdb\u884c\u9759\u6001\u5206\u6790\uff08Borrow Check\uff09"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'use std::thread;\n\nfn main() {\n    let v = vec![1, 2, 3];\n\n    let handle = thread::spawn(|| { // error\n        println!("Here\'s a vector: {:?}", v);\n    });\n\n    handle.join().unwrap();\n}\n')),(0,r.kt)("p",null,"\u89e3\u51b3\u529e\u6cd5\uff1a\u5728\u521b\u5efa\u7ebf\u7a0b\u65f6\u4f20\u5165\u7684\u95ed\u5305\u4e2d\u663e\u5f0f\u6307\u5b9a",(0,r.kt)("inlineCode",{parentName:"p"},"move"),"\u6765\u8f6c\u79fb\u6240\u6709\u6743\uff0c\u800c\u4e0d\u662f\u8ba9Rust\u53bb\u9690\u5f0f\u63a8\u5bfc\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'use std::thread;\n\nfn main() {\n    let v = vec![1, 2, 3];\n\n    let handle = thread::spawn(move || {\n        println!("Here\'s a vector: {:?}", v);\n    });\n\n    handle.join().unwrap();\n}\n')),(0,r.kt)("h4",{id:"\u7ebf\u7a0b\u95f4\u901a\u4fe1"},"\u7ebf\u7a0b\u95f4\u901a\u4fe1"),(0,r.kt)("p",null,"\u901a\u8fc7\u4f7f\u7528",(0,r.kt)("em",{parentName:"p"},"channel"),"\u5b9e\u73b0\u7ebf\u7a0b\u95f4\u7684\u901a\u4fe1\uff0c\u4e0b\u65b9\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"tx"),"\u548c",(0,r.kt)("inlineCode",{parentName:"p"},"rx"),"\u5206\u522b\u8868\u793a\u7740",(0,r.kt)("inlineCode",{parentName:"p"},"transmitter"),"\u548c",(0,r.kt)("inlineCode",{parentName:"p"},"receiver")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'use std::sync::mpsc;\nuse std::thread;\n\nfn main() {\n    let (tx, rx) = mpsc::channel();\n\n    thread::spawn(move || {\n        let val = String::from("hi");\n        tx.send(val).unwrap();\n    });\n\n    let received = rx.recv().unwrap();\n    println!("Got: {}", received);\n}\n')),(0,r.kt)("h3",{id:"\u6a21\u5757\u5316"},"\u6a21\u5757\u5316"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'// src/main.rs\nmod aaa {\n    pub fn test() {\n        println!("aaa")\n    }\n}\nmod bbb;\n\nfn main() {\n    aaa::test();\n    bbb::test();\n    bbb::ccc::test();\n}\n\n// src/bbb.rs\npub fn test() {\n    println!("bbb")\n}\n\npub mod ccc;\n\n// src/bbb/ccc.rs\npub fn test() {\n    println!("ccc")\n}\n')),(0,r.kt)("h4",{id:"use"},"use"),(0,r.kt)("p",null,"path\u592a\u957f,use\u6765\u63d0\u4f9b\u5feb\u6377\u65b9\u5f0f"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"mod bbb;\n\nuse bbb::ccc::test;\n\nfn main() {\n    test(); // bbb::ccc::test()\n}\n")),(0,r.kt)("h4",{id:"pub"},"pub"),(0,r.kt)("p",null,"\u9ed8\u8ba4\u53ea\u80fd\u53d6sibling\u548cparent\u7684\u5185\u5bb9,\u9700\u8981\u628a\u6a21\u5757\u5185\u90e8\u7684\u4e1c\u897f\u53d8\u6210pub\u624d\u80fd\u53d6"),(0,r.kt)("h5",{id:"struct"},"struct"),(0,r.kt)("p",null,"\u7ed3\u6784\u4f53\u81ea\u8eab\u7684private\u548cpub\u3001\u5b57\u6bb5\u7684private\u548cpub(\u9ed8\u8ba4private)"),(0,r.kt)("p",null,"\u679a\u4e3eenum\u7684\u5b57\u6bb5\u9ed8\u8ba4pub"),(0,r.kt)("h2",{id:"\u9ad8\u7ea7\u7279\u6027"},"\u9ad8\u7ea7\u7279\u6027"),(0,r.kt)("h3",{id:"unsafe-rust"},"Unsafe Rust"),(0,r.kt)("h3",{id:"advanced-traits"},"Advanced Traits"),(0,r.kt)("h4",{id:""}),(0,r.kt)("h3",{id:"advanced-type"},"Advanced Type"),(0,r.kt)("h3",{id:"advanced-function"},"Advanced Function"),(0,r.kt)("h3",{id:"\u5b8fmacro"},"\u5b8f\uff08Macro\uff09"),(0,r.kt)("p",null,"\u5b8f\u662f\u4e00\u79cd\u5143\u7f16\u7a0b\uff0c\u901a\u8fc7\u5728\u7f16\u8bd1\u65f6\u5bf9\u6307\u5b9a\u7684\u6e90\u4ee3\u7801\u8fdb\u884c\u66ff\u6362\uff08\u5373\u5b8f\u5c55\u5f00\uff09\u53ef\u5b9e\u73b0\u5404\u79cd\u8fdb\u9636\u7684\u80fd\u529b\u3002Rust\u4e2d\u7684\u5b8f\u5206\u4e3a",(0,r.kt)("strong",{parentName:"p"},"\u58f0\u660e\u5b8f"),"\uff08",(0,r.kt)("em",{parentName:"p"},"declarative macros"),"\uff09\u548c\u4ee5\u4e0b\u4e09\u79cd",(0,r.kt)("strong",{parentName:"p"},"\u8fc7\u7a0b\u5b8f"),"\uff08 ",(0,r.kt)("em",{parentName:"p"},"procedural macros"),"\uff09"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6d3e\u751f\u5b8f\uff08",(0,r.kt)("em",{parentName:"li"},"Custom ",(0,r.kt)("inlineCode",{parentName:"em"},"#[derive]")," macros"),"\uff09"),(0,r.kt)("li",{parentName:"ul"},"\u5c5e\u6027\u5b8f\uff08",(0,r.kt)("em",{parentName:"li"},"Attribute-like macros"),"\uff09"),(0,r.kt)("li",{parentName:"ul"},"\u51fd\u6570\u5f0f\u5b8f\uff08",(0,r.kt)("em",{parentName:"li"},"Function-like macros"),"\uff09")),(0,r.kt)("p",null,"\u58f0\u660e\u5b8f\u548c\u8fc7\u7a0b\u5b8f\u4e2d\u7684\u51fd\u6570\u5f0f\u5b8f\u5728\u529f\u80fd\u4e0a\u5341\u5206\u8d34\u8fd1\uff0c\u4f7f\u7528\u4e0a\u4e5f\u90fd\u548c\u666e\u901a\u51fd\u6570\u975e\u5e38\u76f8\u4f3c\uff0c\u4e8c\u8005\u533a\u522b\u5728\u4e8e\u58f0\u660e\u5b8f\u4e3b\u8981\u662f\u505a\u5b57\u7b26\u4e32\u5c42\u9762\u4e0a\u7684\u5339\u914d\u4e0e\u66ff\u6362\uff0c\u800c\u8fc7\u7a0b\u5b8f\u662f\u57fa\u4e8eToken\u6d41\u4e43\u81f3\u8bed\u6cd5\u6811\u5c42\u9762\u4e0a\u7684\u64cd\u4f5c\u3002\u53e6\u5916\u76f8\u8f83\u4e8e\u666e\u901a\u51fd\u6570\u7684\u529f\u80fd\u6765\u8bf4\uff0c\u5b8f\u6700\u5927\u7684\u7279\u522b\u662f\u5728\u7f16\u8bd1\u65f6\u8fdb\u884c\u5c55\u5f00\uff0c\u5177\u5907\u66f4\u5f3a\u5927\u7684\u8868\u8fbe\u80fd\u529b\u3002"),(0,r.kt)("h4",{id:"\u58f0\u660e\u5b8f"},"\u58f0\u660e\u5b8f"),(0,r.kt)("h6",{id:"\u5b9a\u4e49"},"\u5b9a\u4e49"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"#[macro_export]\nmacro_rules! vec {\n    ( $( $x:expr ),* ) => {\n        {\n            let mut temp_vec = Vec::new();\n            $(\n                temp_vec.push($x);\n            )*\n            temp_vec\n        }\n    };\n}\n")),(0,r.kt)("h6",{id:"\u4f7f\u7528"},"\u4f7f\u7528"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"let v: Vec<u32> = vec![1, 2, 3];\n")),(0,r.kt)("h4",{id:"\u8fc7\u7a0b\u5b8f"},"\u8fc7\u7a0b\u5b8f"),(0,r.kt)("h5",{id:"\u6d3e\u751f\u5b8f"},"\u6d3e\u751f\u5b8f"),(0,r.kt)("p",null,"\u6d3e\u751f\u5b8f\u4e3b\u8981\u88ab\u7ed3\u6784\u4f53\u6216\u679a\u4e3e\u7c7b\u578b\u8fdb\u884c\u6d88\u8d39\uff0c\u6700\u5e38\u89c1\u7684\u505a\u6cd5\u662f\u7ed9\u7ed3\u6784\u4f53\u63d0\u4f9b\u67d0\u4e2aTrait\u7684\u9ed8\u8ba4\u5b9e\u73b0\u3002"),(0,r.kt)("h6",{id:"\u5b9a\u4e49-1"},"\u5b9a\u4e49"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'use proc_macro::TokenStream;\nuse quote::quote;\nuse syn;\n\n#[proc_macro_derive(HelloMacro)]\npub fn hello_macro_derive(input: TokenStream) -> TokenStream {\n    // Construct a representation of Rust code as a syntax tree\n    // that we can manipulate\n    let ast = syn::parse(input).unwrap();\n\n    // Build the trait implementation\n    impl_hello_macro(&ast)\n}\n\nfn impl_hello_macro(ast: &syn::DeriveInput) -> TokenStream {\n    let name = &ast.ident;\n    let gen = quote! {\n        impl HelloMacro for #name {\n            fn hello_macro() {\n                println!("Hello, Macro! My name is {}!", stringify!(#name));\n            }\n        }\n    };\n    gen.into()\n}\n')),(0,r.kt)("h6",{id:"\u4f7f\u7528-1"},"\u4f7f\u7528"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"use hello_macro::HelloMacro;\nuse hello_macro_derive::HelloMacro;\n\n#[derive(HelloMacro)]\nstruct Pancakes;\n\nfn main() {\n    Pancakes::hello_macro();\n}\n")),(0,r.kt)("h5",{id:"\u5c5e\u6027\u5b8f"},"\u5c5e\u6027\u5b8f"),(0,r.kt)("p",null,"\u5c5e\u6027\u5b8f\u4e0d\u4ec5\u53ef\u4ee5\u88ab\u7528\u6765\u66ff\u6362\u7ed3\u6784\u4f53\u548c\u679a\u4e3e\uff0c\u8fd8\u80fd\u66ff\u6362\u51fd\u6570\u7b49\u6e90\u4ee3\u7801\u7684\u5185\u5bb9\uff0c\u5e76\u4e14\u4f7f\u7528\u5c5e\u6027\u5b8f\u7684\u65f6\u5019\u53ef\u4ee5\u63a5\u6536\u66f4\u591a\u989d\u5916\u7684\u53c2\u6570\u3002"),(0,r.kt)("h6",{id:"\u5b9a\u4e49-2"},"\u5b9a\u4e49"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"#[proc_macro_attribute]\npub fn route(attr: TokenStream, item: TokenStream) -> TokenStream {\n}\n")),(0,r.kt)("h6",{id:"\u4f7f\u7528-2"},"\u4f7f\u7528"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'#[route(GET, "/")]\nfn index() {\n}\n')),(0,r.kt)("h5",{id:"\u51fd\u6570\u5f0f\u5b8f"},"\u51fd\u6570\u5f0f\u5b8f"),(0,r.kt)("p",null,"\u51fd\u6570\u5f0f\u5b8f\u5728\u4f7f\u7528\u4e0a\u7c7b\u4f3c\u4e8e\u76f4\u63a5\u8c03\u7528\u51fd\u6570\u3002"),(0,r.kt)("h6",{id:"\u5b9a\u4e49-3"},"\u5b9a\u4e49"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"#[proc_macro]\npub fn sql(input: TokenStream) -> TokenStream {\n}\n")),(0,r.kt)("h6",{id:"\u4f7f\u7528-3"},"\u4f7f\u7528"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"let sql = sql!(SELECT * FROM posts WHERE id=1);\n")),(0,r.kt)("h2",{id:"webassembly"},"WebAssembly"),(0,r.kt)("h3",{id:"wasm-pack"},"wasm-pack"),(0,r.kt)("h2",{id:"\u5176\u4ed6"},"\u5176\u4ed6"),(0,r.kt)("h3",{id:"r"},"r#...#"),(0,r.kt)("p",null,"\u7528\u6765\u8868\u793a\u539f\u59cb\u5b57\u7b26\u4e32\uff0c\u4e0d\u7528\u518d\u624b\u52a8\u8f6c\u4e49"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'let html = r#"\n    <!DOCTYPE html>\n    <meta charset="utf-8">\n    <title>Hello, world!</title>\n    <h1 class="foo">Hello, <i>world!</i></h1>\n"#;\n')),(0,r.kt)("h3",{id:"\u53d1\u5e03\u4e8c\u8fdb\u5236"},"\u53d1\u5e03\u4e8c\u8fdb\u5236"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"cargo login")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"cargo publish")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"cargo install <name>"))),(0,r.kt)("p",null,"\u901a\u8fc7",(0,r.kt)("inlineCode",{parentName:"p"},"cargo publish"),"\u5c06\u6e90\u4ee3\u7801\u63a8\u9001\u5230crates.io\uff0c\u5176\u4ed6\u4ebacargo install\u7684\u65f6\u5019\u4f1a\u62c9\u4e0b\u4ee3\u7801\u5e76\u81ea\u52a8\u901a\u8fc7cargo build --release\u751f\u6210\u4e8c\u8fdb\u5236\u4ea7\u7269"),(0,r.kt)("h2",{id:"\u5185\u7f6e\u6a21\u5757"},"\u5185\u7f6e\u6a21\u5757"),(0,r.kt)("h3",{id:"stdfs"},"std::fs"))}d.isMDXComponent=!0}}]);