
# Unicodeå­—ç¬¦é›†å’Œç¼–ç 
> æœ¬æ–‡ä¸ºåˆå­¦å‰ç«¯æ—¶æ‰€å†™ï¼Œæœªè¿›è¡Œå‹˜è¯¯ä¾¿ç§»æ¤äº†è¿‡æ¥ï¼Œè‹¥æœ‰é”™è¯¯è¯·è§è°…ã€‚

> éƒ¨åˆ†æ•°æ®æ‘˜è‡ªé˜®ä¸€å³°ï¼Œæ–‡æœ«æœ‰ç›¸å…³é“¾æ¥

Unicodeå­—ç¬¦é›†ï¼ŒæŒ‡çš„æ˜¯å­—ç¬¦å’Œç ç‚¹ï¼ˆCodePointï¼‰çš„ä¸€ä¸€å¯¹åº”ã€‚

è€Œå­—ç¬¦åˆ°åº•ä»¥ä»€ä¹ˆå½¢å¼åœ¨æœºå™¨ä¸­å‚¨å­˜ï¼Œçœ‹çš„æ˜¯ç¼–ç æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯ç ç‚¹å’ŒäºŒè¿›åˆ¶ä¸²çš„æ˜ å°„å…³ç³»ï¼Œåˆ†ä¸ºUTF8/16/32ã€‚



ç ç‚¹çš„èŒƒå›´æ˜¯U+0000 ~ U+10FFFFã€‚U+0000 ~ U+FFFF æ˜¯åŸºæœ¬å¹³é¢/BMPï¼Œå…¶ä»–æ˜¯è¾…åŠ©å¹³é¢/SMPã€‚

æœ‰ä¸€ç‚¹è¦æ³¨æ„ï¼ŒU+D800åˆ°U+DFFFçš„ç ç‚¹éƒ½ä¸å¯¹åº”ä»»ä½•çš„å­—ç¬¦ã€‚



æˆ‘ä»¬å…³å¿ƒçš„ä¸ä»…æ˜¯å­—ç¬¦æ˜¯å¦‚ä½•ç¼–ç æˆäºŒè¿›åˆ¶æ•°æ®ï¼Œ å½“æˆ‘ä»¬æ¥æ”¶åˆ°äºŒè¿›åˆ¶æ•°æ®çš„æ—¶å€™ï¼Œéœ€è¦çŸ¥é“å“ªäº›å­—èŠ‚æ˜¯ä¸€ä¸ªå­—ç¬¦ï¼Œä»è€Œè¿›è¡Œè§£ç ã€‚

### UTF32

æ˜ å°„å…³ç³»å¦‚ä¸‹ï¼Œ å…¨éƒ½æ˜¯å››å­—èŠ‚ä¿å­˜ã€‚

```
U+597D = 0x0000 597D
```



è§£ç çš„æ—¶å€™ï¼Œå››ä¸ªå­—èŠ‚è½¬åŒ–æˆä¸€ä¸ªå­—ç¬¦ã€‚

### UFT8

> å‚è€ƒé˜®ä¸€å³°

| ç ç‚¹èŒƒå›´                | å­—èŠ‚   |
| ------------------- | ---- |
| U+0000 - U+007F     | 1    |
| U+0080 - U+07FF     | 2    |
| U+0800 - U+FFFF     | 3    |
| U+010000 - U+10FFFF | 4    |

```
Unicodeç¬¦å·èŒƒå›´     |        UTF-8ç¼–ç æ–¹å¼
(åå…­è¿›åˆ¶)        |              ï¼ˆäºŒè¿›åˆ¶ï¼‰
----------------------+---------------------------------------------
0000 0000-0000 007F | 0xxxxxxx
0000 0080-0000 07FF | 110xxxxx 10xxxxxx
0000 0800-0000 FFFF | 1110xxxx 10xxxxxx 10xxxxxx
0001 0000-0010 FFFF | 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx
```

> UTF-8 çš„ç¼–ç è§„åˆ™å¾ˆç®€å•ï¼Œåªæœ‰äºŒæ¡ï¼š
>
> 1ï¼‰å¯¹äºå•å­—èŠ‚çš„ç¬¦å·ï¼Œå­—èŠ‚çš„ç¬¬ä¸€ä½è®¾ä¸º`0`ï¼Œåé¢7ä½ä¸ºè¿™ä¸ªç¬¦å·çš„ Unicode ç ã€‚å› æ­¤å¯¹äºè‹±è¯­å­—æ¯ï¼ŒUTF-8 ç¼–ç å’Œ ASCII ç æ˜¯ç›¸åŒçš„ã€‚
>
> 2ï¼‰å¯¹äº`n`å­—èŠ‚çš„ç¬¦å·ï¼ˆ`n > 1`ï¼‰ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚çš„å‰`n`ä½éƒ½è®¾ä¸º`1`ï¼Œç¬¬`n + 1`ä½è®¾ä¸º`0`ï¼Œåé¢å­—èŠ‚çš„å‰ä¸¤ä½ä¸€å¾‹è®¾ä¸º`10`ã€‚å‰©ä¸‹çš„äºŒè¿›åˆ¶ä½ï¼Œè¦ç ç‚¹æ‰€å¯¹åº”çš„äºŒè¿›åˆ¶ä½ä»åå¾€å‰å¡«å……ï¼Œè‹¥è¿˜å‰©ä¸‹ä½ç½®åˆ™å¡«0ã€‚



è§£ç çš„æ—¶å€™ï¼Œ æ ¹æ®å­—èŠ‚åºå°±å¯ä»¥åˆ¤æ–­æ˜¯å‡ ä¸ªå­—èŠ‚ä¸€ä¸ªå­—ç¬¦ã€‚

> å¦‚æœä¸€ä¸ªå­—èŠ‚çš„ç¬¬ä¸€ä½æ˜¯`0`ï¼Œåˆ™è¿™ä¸ªå­—èŠ‚å•ç‹¬å°±æ˜¯ä¸€ä¸ªå­—ç¬¦ï¼›å¦‚æœç¬¬ä¸€ä½æ˜¯`1`ï¼Œåˆ™è¿ç»­æœ‰å¤šå°‘ä¸ª`1`ï¼Œå°±è¡¨ç¤ºå½“å‰å­—ç¬¦å ç”¨å¤šå°‘ä¸ªå­—èŠ‚ã€‚

### UTF16

> åŸºæœ¬å¹³é¢çš„å­—ç¬¦å ç”¨2ä¸ªå­—èŠ‚ï¼Œè¾…åŠ©å¹³é¢çš„å­—ç¬¦å ç”¨4ä¸ªå­—èŠ‚ã€‚

å¯¹äºBMPï¼Œè½¬ç å…¬å¼ä¸º

```
U+597D = 0x597D
```

å¯¹äºSMPï¼Œè½¬ç å…¬å¼ä¸º

```javascript
H = Math.floor((c-0x10000) / 0x400)+0xD800

L = (c - 0x10000) % 0x400 + 0xDC00
```

Hä½äº0xD800åˆ°0xDBFF

Lä½äº0xDC00åˆ°0xDFFF

è¿™æ ·ï¼Œèƒ½è½»æ¾åŒºåˆ†å“ªäº›æ˜¯å››ä¸ªå­—èŠ‚å½“æˆä¸€ä¸ªå­—ç¬¦ï¼Œå“ªäº›æ˜¯ä¸¤ä¸ªå­—èŠ‚ä¸€ä¸ªå­—ç¬¦ã€‚æ¯”å¦‚ï¼Œå½“è¯»åˆ°0xD800ï¼Œå¯ä»¥åˆ¤æ–­å‡ºè¿™ä¸ªå­—èŠ‚å’Œä¸‹é¢çš„å­—èŠ‚å…±åŒç»„æˆäº†ä¸€ä¸ªå­—ç¬¦ã€‚å› ä¸ºå¦‚æœè¿™ä¸ªå­—èŠ‚å•ç‹¬æ˜¯ä¸ªå­—ç¬¦ï¼Œ0xD800å¯¹åº”çš„ç ç‚¹U+D800æ˜¯æ²¡æœ‰å¯¹åº”çš„å­—ç¬¦çš„ã€‚



### BOM

è°ˆåˆ°ç¼–ç ï¼Œå°±ä¸å¾—ä¸è°ˆåˆ°BOMï¼Œåœ¨è¿™ä¹‹å‰è°ˆä¸€ä¸‹å­—èŠ‚åºã€‚

> ç¼–ç æ–¹å¼ä½¿ç”¨çš„æœ€å°å­—èŠ‚ç»„åˆç§°ä¸ºç å…ƒï¼ˆCode Unitï¼‰ï¼ŒUTF-8çš„ç å…ƒæ˜¯1ä¸ªå­—èŠ‚ï¼ŒUTF-16çš„ç å…ƒæ˜¯2ä¸ªå­—èŠ‚ï¼Œè€ŒUTF-32çš„ç å…ƒæ˜¯4ä¸ªå­—èŠ‚ã€‚ç å…ƒå¤§äºä¸€ä¸ªå­—èŠ‚åˆ™åœ¨å­˜å‚¨å’Œä¼ è¾“æ—¶å°±è¦è€ƒè™‘å­—èŠ‚åºçš„é—®é¢˜ï¼Œå­—èŠ‚åºåˆ†ä¸¤ç§ï¼Œä¸€ç§æ˜¯å¤§ç«¯æ–¹å¼ï¼ˆBig Endianï¼‰ï¼Œä¸€ç§æ˜¯å°ç«¯æ–¹å¼ï¼ˆLittle Endianï¼‰ï¼Œå¤§ç«¯æ–¹å¼è§„å®šï¼Œä¸€ä¸ªç å…ƒå†…çš„å­—èŠ‚æŒ‰æ­£å¸¸æ–¹å¼å­˜å‚¨ï¼Œè€Œå°ç«¯æ–¹å¼è§„å®šï¼Œä¸€ä¸ªç å…ƒå†…çš„å­—èŠ‚åºæŒ‰åè¿‡æ¥çš„é¡ºåºå­˜å‚¨ï¼Œä¸ºäº†è¡¨ç¤ºå­—èŠ‚åºï¼ŒUnicodeè§„èŒƒä¸­è§„å®šUTF-16å’ŒUTF-32éœ€è¦ä½¿ç”¨BOMï¼ˆbyte order markï¼‰æè¿°å­—èŠ‚åºã€‚BOMæ˜¯ä¸€æ®µæ·»åŠ åœ¨æ•°æ®æµå¼€å¤´çš„å­—ç¬¦ä¸²ã€‚åŒæ—¶ï¼Œå¦‚æœBOMä¸å‡ºç°æ–‡ä»¶å¼€å¤´ï¼Œå®ƒåˆ™æ˜¯ä¸€ä¸ªé›¶å®½åº¦éæ¢è¡Œç©ºæ ¼ï¼šZERO WIDTH NON-BREAKING SPACEï¼Œç”¨æˆ·çœ‹åˆ°çš„ä»…ä»…æ˜¯ä¸€ä¸ªç©ºæ ¼ï¼Œä½†æ˜¯ä»Unicode3.2å¼€å§‹ï¼Œè§„å®šU+2060ä½œä¸ºé›¶å®½åº¦éæ¢è¡Œç©ºæ ¼ï¼Œè€ŒBOMå­—ç¬¦ä»…ä»…ç”¨äºæ–‡ä»¶å¼€å¤´è¡¨ç¤ºå­—èŠ‚åºï¼Œä»¥å…æ··æ·†ã€‚



| BOM                 | Encoding  | Endian        |
| ------------------- | --------- | ------------- |
| 0xEF 0xBB 0xBF      | UTF-8     | endianless    |
| 0xFF 0xFE           | UTF-16-LE | little endian |
| 0xFE 0xFF           | UTF-16-BE | big endian    |
| 0xFF 0xFE 0x00 0x00 | UTF-32-LE | little endian |
| 0x00 0x00 0xFE 0xFF | UTF-32-BE | big endian    |

å½“ç„¶ï¼Œå¦‚ä¸Šæ‰€è¯´ï¼ŒUTF-8æ˜¯ä¸éœ€è¦BOMçš„ã€‚



### å¾®è½¯è®°äº‹æœ¬

è¯´åˆ°BOMï¼Œå°±å¾—è°ˆè°ˆWindowsä¸‹çš„è®°äº‹æœ¬äº†ï¼Œä¸ºä»€ä¹ˆä¸è¦ç”¨è®°äº‹æœ¬ç¼–ç¨‹ï¼Ÿ

å› ä¸ºï¼Œåœ¨windowsçš„è®°äº‹æœ¬ä¸­ã€‚

- æ‰€è°“çš„ã€ŒANSIã€æŒ‡çš„æ˜¯å¯¹åº”å½“å‰ç³»ç»Ÿ locale çš„é—ç•™ï¼ˆlegacyï¼‰ç¼–ç ã€‚[1]
- æ‰€è°“çš„ã€ŒUnicodeã€æŒ‡çš„æ˜¯å¸¦æœ‰ BOM çš„å°ç«¯åº UTF-16ã€‚[2]
- æ‰€è°“çš„ã€ŒUTF-8ã€æŒ‡çš„æ˜¯å¸¦ BOM çš„ UTF-8ã€‚[3]







### JavaScriptçš„ç¼–ç ï¼šUCS-2

å› ä¸ºå†å²åŸå› ï¼ŒJSä½¿ç”¨çš„UCS-2ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯åªè®¤è¯†BMPçš„UTF16ï¼Œä¹Ÿå°±æ˜¯UTF16çš„å­é›†ã€‚è¿™æ„å‘³ç€JSå¼•æ“å¯¹SMPçš„å­—ç¬¦ï¼Œå³ä½¿ä¼šæ­£ç¡®æ˜¾ç¤ºå‡ºæ¥ï¼Œå´ä¼šå½“æˆä¸¤ä¸ªå­—ç¬¦ã€‚

```
'ğŒ†'.length // 2
'ğŒ†'.charAt(0) // "ï¿½"
'ğŒ†'.charAt(1) // "ï¿½"
'ğŒ†'.charCodeAt(0).toString(16) // "d834"
'ğŒ†'.charCodeAt(1).toString(16) // "df06"
```



æˆ‘ä»¬çŸ¥é“ï¼Œ æˆ‘ä»¬å¯ä»¥ç”¨'\uxxxx'çš„å½¢å¼è¡¨ç¤ºå­—ç¬¦ã€‚

å¦‚

```
"\u0061" // 'a'
```

ä½†æ˜¯åªèƒ½è¡¨ç¤ºBMPå¹³é¢ä¸Šçš„å­—ç¬¦ï¼Œ"\u20BB7" è¿™ç§å°±ä¸è¡Œ

å¯¹äºå­—ç¬¦ğ ®·ï¼ˆU+20BB7ï¼‰ï¼Œéœ€è¦ç”¨

```
"\uD842\uDFB7"
```

æ¥è¡¨ç¤º

å¥½åœ¨ES6ä¸­è¿›è¡Œäº†å¢å¼ºï¼Œå¯ä»¥ç”¨'\u{20BB7}'æ¥è¡¨ç¤º

é™¤æ­¤ä¹‹å¤–ï¼Œ ES6çš„codePointAtå¼¥è¡¥äº†charCodeAtæ— æ³•è¯†åˆ«å››å­—èŠ‚å­—ç¬¦çš„é—®é¢˜ï¼›String.fromCodePointå¼¥è¡¥äº†String.fromCharAtçš„ä¸è¶³ã€‚





### HTML å®ä½“ç¼–ç 

> åœ¨ HTML ä¸­æœ‰ä¸€ç§ç‰¹æ®Šçš„å­—ç¬¦è¢«ç§°ä¹‹ä¸º å­—ç¬¦å®ä½“. æ¯”å¦‚æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„

```
&nbsp;
```

è¿™æ˜¯ä¸€ç§ç‰¹æ®Šçš„è¡¨ç¤ºæ–¹å¼, æ›´æ ‡å‡†çš„æ–¹å¼æ˜¯`"&#"` + åè¿›åˆ¶ Unicode ç ç‚¹ + `";"`



### è¯·æ±‚URLä¸­æ±‰å­—çš„ç¼–ç 

HTTPæŠ¥æ–‡å¤´éƒ¨æ˜¯ASCIIç¼–ç çš„ï¼Œå®ä½“æ˜¯UTF8ã€‚é‚£ä¹ˆè¯·æ±‚URLå¦‚æœæ˜¯ä¸­æ–‡ï¼Œå¿…é¡»å…ˆç»è¿‡ç¼–ç ã€‚

æ¯”å¦‚

```
/wiki/æ˜¥
```

ä¼šè‡ªåŠ¨ç¼–ç æˆ

```
/wiki/%E6%98%A5
```

è€Œ'æ˜¥'çš„UTF8ç¼–ç æ­£æ˜¯E6 98 A5



### å‚è€ƒ

[å­—ç¬¦ç¼–ç ç¬”è®°ï¼šASCIIï¼ŒUnicode å’Œ UTF-8](http://www.ruanyifeng.com/blog/2007/10/ascii_unicode_and_utf-8.html)

[Unicodeä¸JavaScriptè¯¦è§£](http://www.ruanyifeng.com/blog/2014/12/unicode.html)

[Windows è®°äº‹æœ¬çš„ ANSIã€Unicodeã€UTF-8 è¿™ä¸‰ç§ç¼–ç æ¨¡å¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ](https://www.zhihu.com/question/20650946)

[ECMAScript 6 å…¥é—¨](http://es6.ruanyifeng.com/#docs/string)

[Unicodeçš„è®¾è®¡å’ŒåŸç†](http://quinnchen.me/2017/08/19/2017-08-19-encode_decode/)

[æµ…è°ˆå‰ç«¯çš„ Unicode](https://www.zeroling.com/qian-tan-qian-duan-de-unicode/)
